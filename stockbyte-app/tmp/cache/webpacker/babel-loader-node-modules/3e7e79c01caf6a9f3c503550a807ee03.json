{"ast":null,"code":"function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/*!\n * @license\n * TradingView Lightweight Charts v2.0.0\n * Copyright (c) 2019 TradingView, Inc.\n * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0\n */\nimport { bindToDevicePixelRatio as t } from \"fancy-canvas/coordinate-space\";\nvar i, n;\n\nfunction s(t, i) {\n  var n,\n      s = ((n = {})[0] = [], n[1] = [t.lineWidth, t.lineWidth], n[2] = [2 * t.lineWidth, 2 * t.lineWidth], n[3] = [6 * t.lineWidth, 6 * t.lineWidth], n[4] = [t.lineWidth, 4 * t.lineWidth], n)[i];\n  t.setLineDash(s);\n}\n\nfunction h(t, i, n, s) {\n  t.beginPath();\n  var h = t.lineWidth % 2 ? .5 : 0;\n  t.moveTo(n, i + h), t.lineTo(s, i + h), t.stroke();\n}\n\n!function (t) {\n  t[t.Simple = 0] = \"Simple\", t[t.WithSteps = 1] = \"WithSteps\";\n}(i || (i = {})), function (t) {\n  t[t.Solid = 0] = \"Solid\", t[t.Dotted = 1] = \"Dotted\", t[t.Dashed = 2] = \"Dashed\", t[t.LargeDashed = 3] = \"LargeDashed\", t[t.SparseDotted = 4] = \"SparseDotted\";\n}(n || (n = {}));\n\nvar _r = function r(t, i) {\n  return (_r = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (t, i) {\n    t.__proto__ = i;\n  } || function (t, i) {\n    for (var n in i) {\n      i.hasOwnProperty(n) && (t[n] = i[n]);\n    }\n  })(t, i);\n};\n\nfunction u(t, i) {\n  function n() {\n    this.constructor = t;\n  }\n\n  _r(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n());\n}\n\nvar _e = function e() {\n  return (_e = Object.assign || function (t) {\n    for (var i, n = 1, s = arguments.length; n < s; n++) {\n      for (var h in i = arguments[n]) {\n        Object.prototype.hasOwnProperty.call(i, h) && (t[h] = i[h]);\n      }\n    }\n\n    return t;\n  }).apply(this, arguments);\n};\n\nfunction o() {\n  for (var t = 0, i = 0, n = arguments.length; i < n; i++) {\n    t += arguments[i].length;\n  }\n\n  var s = Array(t),\n      h = 0;\n\n  for (i = 0; i < n; i++) {\n    for (var r = arguments[i], u = 0, e = r.length; u < e; u++, h++) {\n      s[h] = r[u];\n    }\n  }\n\n  return s;\n}\n\nfunction f(t, i) {\n  if (!t) throw new Error(\"Assertion failed\" + (i ? \": \" + i : \"\"));\n}\n\nfunction a(t) {\n  if (void 0 === t) throw new Error(\"Value is undefined\");\n  return t;\n}\n\nfunction c(t) {\n  if (null === t) throw new Error(\"Value is null\");\n  return t;\n}\n\nfunction l(t) {\n  return c(a(t));\n}\n\nfunction v(t) {\n  for (var i = [], n = 1; n < arguments.length; n++) {\n    i[n - 1] = arguments[n];\n  }\n\n  for (var s = 0, h = i; s < h.length; s++) {\n    var r = h[s];\n\n    for (var u in r) {\n      void 0 !== r[u] && (\"object\" != _typeof(r[u]) || void 0 === t[u] ? t[u] = r[u] : v(t[u], r[u]));\n    }\n  }\n\n  return t;\n}\n\nfunction d(t) {\n  return \"number\" == typeof t && isFinite(t);\n}\n\nfunction M(t) {\n  return \"number\" == typeof t && t % 1 == 0;\n}\n\nfunction w(t) {\n  return \"string\" == typeof t;\n}\n\nfunction b(t) {\n  return !(t <= 0 || t > 0);\n}\n\nfunction m(t) {\n  return \"boolean\" == typeof t;\n}\n\nfunction p(t) {\n  var i,\n      n,\n      s,\n      h = t;\n  if (!h || \"object\" != _typeof(h)) return h;\n\n  for (n in i = Array.isArray(h) ? [] : {}, h) {\n    h.hasOwnProperty(n) && (s = h[n], i[n] = s && \"object\" == _typeof(s) ? p(s) : s);\n  }\n\n  return i;\n}\n\nfunction g(t) {\n  return null !== t;\n}\n\nfunction y(t) {\n  return null === t ? void 0 : t;\n}\n\nvar k = function () {\n  function t() {\n    this.t = [];\n  }\n\n  return t.prototype.setRenderers = function (t) {\n    this.t = t;\n  }, t.prototype.draw = function (t, i, n, s) {\n    this.t.forEach(function (h) {\n      t.save(), h.draw(t, i, n, s), t.restore();\n    });\n  }, t;\n}(),\n    N = function () {\n  function t() {}\n\n  return t.prototype.draw = function (t, i, n, s) {\n    t.save(), t.scale(i, i), this._drawImpl(t, n, s), t.restore();\n  }, t.prototype.drawBackground = function (t, i, n, s) {\n    t.save(), t.scale(i, i), this._drawBackgroundImpl(t, n, s), t.restore();\n  }, t.prototype._drawBackgroundImpl = function (t, i, n) {}, t;\n}(),\n    S = function (t) {\n  function i() {\n    var i = null !== t && t.apply(this, arguments) || this;\n    return i._data = null, i;\n  }\n\n  return u(i, t), i.prototype.setData = function (t) {\n    this._data = t;\n  }, i.prototype._drawImpl = function (t) {\n    if (null !== this._data && null !== this._data.visibleRange) {\n      var i = this._data.visibleRange,\n          n = this._data,\n          s = function s(_s) {\n        t.beginPath();\n\n        for (var h = i.to - 1; h >= i.from; --h) {\n          var r = n.items[h];\n          t.moveTo(r.x, r.y), t.arc(r.x, r.y, _s, 0, 2 * Math.PI);\n        }\n\n        t.fill();\n      };\n\n      t.fillStyle = n.backColor, s(n.radius + 2), t.fillStyle = n.lineColor, s(n.radius);\n    }\n  }, i;\n}(N);\n\nvar x,\n    D,\n    C,\n    T,\n    E = {\n  from: 0,\n  to: 1\n},\n    L = function () {\n  function t(t, i) {\n    this.i = new k(), this.s = [], this.u = [], this.o = !0, this.l = t, this.v = i, this.i.setRenderers(this.s);\n  }\n\n  return t.prototype.update = function (t) {\n    var i = this,\n        n = this.l.serieses();\n    n.length !== this.s.length && (this.u = n.map(function () {\n      return {\n        items: [{\n          x: 0,\n          y: 0,\n          time: 0,\n          price: 0\n        }],\n        lineColor: \"\",\n        backColor: i.l.options().layout.backgroundColor,\n        radius: 0,\n        visibleRange: null\n      };\n    }), this.s = this.u.map(function (t) {\n      var i = new S();\n      return i.setData(t), i;\n    }), this.i.setRenderers(this.s)), this.o = !0;\n  }, t.prototype.renderer = function (t, i, n) {\n    return this.o && (this.M(), this.o = !1), this.i;\n  }, t.prototype.M = function () {\n    var t = this,\n        i = this.l.serieses(),\n        n = this.v.appliedIndex(),\n        s = this.l.timeScale();\n    i.forEach(function (i, h) {\n      var r = t.u[h],\n          u = i.markerDataAtIndex(n);\n\n      if (null !== u) {\n        var e = c(i.firstValue());\n        r.lineColor = i.barColorer().barStyle(n).barColor, r.backColor = t.l.options().layout.backgroundColor, r.radius = u.radius, r.items[0].price = u.price, r.items[0].y = i.priceScale().priceToCoordinate(u.price, e.value), r.items[0].time = n, r.items[0].x = s.indexToCoordinate(n), r.visibleRange = E;\n      } else r.visibleRange = null;\n    });\n  }, t;\n}(),\n    A = function () {\n  function t(t) {\n    this.m = t;\n  }\n\n  return t.prototype.draw = function (t, i, n, r) {\n    if (null !== this.m) {\n      var u = this.m.vertLine.visible,\n          e = this.m.horzLine.visible;\n\n      if (u || e) {\n        t.save();\n        var o = Math.round(this.m.x * i),\n            f = Math.round(this.m.y * i),\n            a = Math.ceil(this.m.w * i),\n            c = Math.ceil(this.m.h * i);\n        t.lineCap = \"butt\", u && o >= 0 && (t.lineWidth = Math.floor(this.m.vertLine.lineWidth * i), t.strokeStyle = this.m.vertLine.color, t.fillStyle = this.m.vertLine.color, s(t, this.m.vertLine.lineStyle), function (t, i, n, s) {\n          t.beginPath();\n          var h = t.lineWidth % 2 ? .5 : 0;\n          t.moveTo(i + h, n), t.lineTo(i + h, s), t.stroke();\n        }(t, o, 0, c)), e && f >= 0 && (t.lineWidth = Math.floor(this.m.horzLine.lineWidth * i), t.strokeStyle = this.m.horzLine.color, t.fillStyle = this.m.horzLine.color, s(t, this.m.horzLine.lineStyle), h(t, f, 0, a)), t.restore();\n      }\n    }\n  }, t;\n}(),\n    B = function () {\n  function t(t) {\n    this.o = !0, this.p = {\n      vertLine: {\n        lineWidth: 1,\n        lineStyle: 0,\n        color: \"\",\n        visible: !1\n      },\n      horzLine: {\n        lineWidth: 1,\n        lineStyle: 0,\n        color: \"\",\n        visible: !1\n      },\n      w: 0,\n      h: 0,\n      x: 0,\n      y: 0\n    }, this.g = new A(this.p), this.k = t;\n  }\n\n  return t.prototype.update = function () {\n    this.o = !0;\n  }, t.prototype.renderer = function (t, i) {\n    return this.o && this.M(), this.g;\n  }, t.prototype.M = function () {\n    var t = this.k.visible(),\n        i = c(this.k.pane()),\n        n = i.model().options().crosshair,\n        s = this.p;\n    s.horzLine.visible = t && this.k.horzLineVisible(i), s.vertLine.visible = t && this.k.vertLineVisible(), s.horzLine.lineWidth = n.horzLine.width, s.horzLine.lineStyle = n.horzLine.style, s.horzLine.color = n.horzLine.color, s.vertLine.lineWidth = n.vertLine.width, s.vertLine.lineStyle = n.vertLine.style, s.vertLine.color = n.vertLine.color, s.w = i.width(), s.h = i.height(), s.x = this.k.appliedX(), s.y = this.k.appliedY();\n  }, t;\n}(),\n    z = {\n  aliceblue: \"#f0f8ff\",\n  antiquewhite: \"#faebd7\",\n  aqua: \"#00ffff\",\n  aquamarine: \"#7fffd4\",\n  azure: \"#f0ffff\",\n  beige: \"#f5f5dc\",\n  bisque: \"#ffe4c4\",\n  black: \"#000000\",\n  blanchedalmond: \"#ffebcd\",\n  blue: \"#0000ff\",\n  blueviolet: \"#8a2be2\",\n  brown: \"#a52a2a\",\n  burlywood: \"#deb887\",\n  cadetblue: \"#5f9ea0\",\n  chartreuse: \"#7fff00\",\n  chocolate: \"#d2691e\",\n  coral: \"#ff7f50\",\n  cornflowerblue: \"#6495ed\",\n  cornsilk: \"#fff8dc\",\n  crimson: \"#dc143c\",\n  cyan: \"#00ffff\",\n  darkblue: \"#00008b\",\n  darkcyan: \"#008b8b\",\n  darkgoldenrod: \"#b8860b\",\n  darkgray: \"#a9a9a9\",\n  darkgreen: \"#006400\",\n  darkkhaki: \"#bdb76b\",\n  darkmagenta: \"#8b008b\",\n  darkolivegreen: \"#556b2f\",\n  darkorange: \"#ff8c00\",\n  darkorchid: \"#9932cc\",\n  darkred: \"#8b0000\",\n  darksalmon: \"#e9967a\",\n  darkseagreen: \"#8fbc8f\",\n  darkslateblue: \"#483d8b\",\n  darkslategray: \"#2f4f4f\",\n  darkturquoise: \"#00ced1\",\n  darkviolet: \"#9400d3\",\n  deeppink: \"#ff1493\",\n  deepskyblue: \"#00bfff\",\n  dimgray: \"#696969\",\n  dodgerblue: \"#1e90ff\",\n  feldspar: \"#d19275\",\n  firebrick: \"#b22222\",\n  floralwhite: \"#fffaf0\",\n  forestgreen: \"#228b22\",\n  fuchsia: \"#ff00ff\",\n  gainsboro: \"#dcdcdc\",\n  ghostwhite: \"#f8f8ff\",\n  gold: \"#ffd700\",\n  goldenrod: \"#daa520\",\n  gray: \"#808080\",\n  green: \"#008000\",\n  greenyellow: \"#adff2f\",\n  honeydew: \"#f0fff0\",\n  hotpink: \"#ff69b4\",\n  indianred: \"#cd5c5c\",\n  indigo: \"#4b0082\",\n  ivory: \"#fffff0\",\n  khaki: \"#f0e68c\",\n  lavender: \"#e6e6fa\",\n  lavenderblush: \"#fff0f5\",\n  lawngreen: \"#7cfc00\",\n  lemonchiffon: \"#fffacd\",\n  lightblue: \"#add8e6\",\n  lightcoral: \"#f08080\",\n  lightcyan: \"#e0ffff\",\n  lightgoldenrodyellow: \"#fafad2\",\n  lightgreen: \"#90ee90\",\n  lightgrey: \"#d3d3d3\",\n  lightpink: \"#ffb6c1\",\n  lightsalmon: \"#ffa07a\",\n  lightseagreen: \"#20b2aa\",\n  lightskyblue: \"#87cefa\",\n  lightslateblue: \"#8470ff\",\n  lightslategray: \"#778899\",\n  lightsteelblue: \"#b0c4de\",\n  lightyellow: \"#ffffe0\",\n  lime: \"#00ff00\",\n  limegreen: \"#32cd32\",\n  linen: \"#faf0e6\",\n  magenta: \"#ff00ff\",\n  maroon: \"#800000\",\n  mediumaquamarine: \"#66cdaa\",\n  mediumblue: \"#0000cd\",\n  mediumorchid: \"#ba55d3\",\n  mediumpurple: \"#9370d8\",\n  mediumseagreen: \"#3cb371\",\n  mediumslateblue: \"#7b68ee\",\n  mediumspringgreen: \"#00fa9a\",\n  mediumturquoise: \"#48d1cc\",\n  mediumvioletred: \"#c71585\",\n  midnightblue: \"#191970\",\n  mintcream: \"#f5fffa\",\n  mistyrose: \"#ffe4e1\",\n  moccasin: \"#ffe4b5\",\n  navajowhite: \"#ffdead\",\n  navy: \"#000080\",\n  oldlace: \"#fdf5e6\",\n  olive: \"#808000\",\n  olivedrab: \"#6b8e23\",\n  orange: \"#ffa500\",\n  orangered: \"#ff4500\",\n  orchid: \"#da70d6\",\n  palegoldenrod: \"#eee8aa\",\n  palegreen: \"#98fb98\",\n  paleturquoise: \"#afeeee\",\n  palevioletred: \"#d87093\",\n  papayawhip: \"#ffefd5\",\n  peachpuff: \"#ffdab9\",\n  peru: \"#cd853f\",\n  pink: \"#ffc0cb\",\n  plum: \"#dda0dd\",\n  powderblue: \"#b0e0e6\",\n  purple: \"#800080\",\n  red: \"#ff0000\",\n  rosybrown: \"#bc8f8f\",\n  royalblue: \"#4169e1\",\n  saddlebrown: \"#8b4513\",\n  salmon: \"#fa8072\",\n  sandybrown: \"#f4a460\",\n  seagreen: \"#2e8b57\",\n  seashell: \"#fff5ee\",\n  sienna: \"#a0522d\",\n  silver: \"#c0c0c0\",\n  skyblue: \"#87ceeb\",\n  slateblue: \"#6a5acd\",\n  slategray: \"#708090\",\n  snow: \"#fffafa\",\n  springgreen: \"#00ff7f\",\n  steelblue: \"#4682b4\",\n  tan: \"#d2b48c\",\n  teal: \"#008080\",\n  thistle: \"#d8bfd8\",\n  tomato: \"#ff6347\",\n  turquoise: \"#40e0d0\",\n  violet: \"#ee82ee\",\n  violetred: \"#d02090\",\n  wheat: \"#f5deb3\",\n  white: \"#ffffff\",\n  whitesmoke: \"#f5f5f5\",\n  yellow: \"#ffff00\",\n  yellowgreen: \"#9acd32\"\n};\n\nfunction V(t) {\n  return function (t, i, n) {\n    return b(i) ? t : i < t ? t : i > n ? n : Math.round(i);\n  }(0, t, 255);\n}\n\nfunction F(t) {\n  return function (t, i, n) {\n    return b(i) ? t : i < t ? t : i > n ? n : Math.round(1e4 * i) / 1e4;\n  }(0, t, 1);\n}\n\nfunction P(t) {\n  (t = t.toLowerCase()) in z && (t = z[t]);\n  var i,\n      n,\n      s = (i = t, null !== (n = C.re.exec(i)) ? C.parse(n) : null);\n  if (null !== s) return s;\n\n  var h = function (t) {\n    var i = D.re.exec(t);\n    return null !== i ? D.parse(i) : null;\n  }(t);\n\n  if (null !== h) return h;\n\n  var r = function (t) {\n    var i = x.re.exec(t);\n    return null !== i ? x.parse(i) : null;\n  }(t);\n\n  if (null !== r) return r;\n\n  var u = function (t) {\n    var i = T.re.exec(t);\n    return null !== i ? T.parse(i) : null;\n  }(t);\n\n  return null !== u ? [u[0], u[1], u[2]] : null;\n}\n\nfunction I(t) {\n  var i = P(t);\n  if (null !== i) return i;\n  throw new Error(\"Passed color string \" + t + \" does not match any of the known color representations\");\n}\n\nfunction O(t, i) {\n  if (i < 0 || i > 255) throw new Error(\"invalid threshold value, valid values are [0, 255]\");\n  return function (t) {\n    return .199 * t[0] + .687 * t[1] + .114 * t[2];\n  }(t) >= i ? \"white\" : \"black\";\n}\n\nfunction R(t) {\n  return function (t) {\n    return 0 === t.indexOf(\"#\");\n  }(t) ? t : (n = I(t), s = 1, \"rgba(\" + (i = [n[0], n[1], n[2], F(s)])[0] + \", \" + i[1] + \", \" + i[2] + \", \" + i[3] + \")\");\n  var i, n, s;\n}\n\nfunction W(t) {\n  return \"black\" === O(I(t), 160) ? \"white\" : \"black\";\n}\n\nfunction U(t, i, n, s, h, r) {\n  t.fillRect(i, n, r, h), t.fillRect(i + r, n, s - 2 * r, r), t.fillRect(i + r, n + h - r, s - 2 * r, r), t.fillRect(i + s - r, n, r, h);\n}\n\nfunction q(t, i, n) {\n  t.save(), t.scale(i, i), n(), t.restore();\n}\n\nfunction j(t, i, n, s, h, r) {\n  t.save(), t.globalCompositeOperation = \"copy\", t.fillStyle = r, t.fillRect(i, n, s, h), t.restore();\n}\n\n!function (t) {\n  t.re = /^#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])$/, t.parse = function (t) {\n    return [V(parseInt(t[1] + t[1], 16)), V(parseInt(t[2] + t[2], 16)), V(parseInt(t[3] + t[3], 16))];\n  };\n}(x || (x = {})), function (t) {\n  t.re = /^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/, t.parse = function (t) {\n    return [V(parseInt(t[1], 16)), V(parseInt(t[2], 16)), V(parseInt(t[3], 16))];\n  };\n}(D || (D = {})), function (t) {\n  t.re = /^rgb\\(\\s*(-?\\d{1,10})\\s*,\\s*(-?\\d{1,10})\\s*,\\s*(-?\\d{1,10})\\s*\\)$/, t.parse = function (t) {\n    return [V(parseInt(t[1], 10)), V(parseInt(t[2], 10)), V(parseInt(t[3], 10))];\n  };\n}(C || (C = {})), function (t) {\n  t.re = /^rgba\\(\\s*(-?\\d{1,10})\\s*,\\s*(-?\\d{1,10})\\s*,\\s*(-?\\d{1,10})\\s*,\\s*(-?[\\d]{0,10}(?:\\.\\d+)?)\\s*\\)$/, t.parse = function (t) {\n    return [V(parseInt(t[1], 10)), V(parseInt(t[2], 10)), V(parseInt(t[3], 10)), F(parseFloat(t[4]))];\n  };\n}(T || (T = {}));\n\nvar H,\n    Y = function () {\n  function t(t, i) {\n    this.setData(t, i);\n  }\n\n  return t.prototype.setData = function (t, i) {\n    this.m = t, this.N = i;\n  }, t.prototype.draw = function (t, i, n, s, h, r) {\n    if (this.m.visible) {\n      t.font = i.font;\n      var u = this.m.tickVisible ? i.tickLength : 0,\n          e = i.borderSize,\n          o = i.paddingTop,\n          f = i.paddingBottom,\n          a = i.paddingInner,\n          c = i.paddingOuter,\n          l = this.m.text,\n          v = Math.ceil(n.measureText(t, l)),\n          d = i.baselineOffset,\n          M = i.fontSize + o + f,\n          w = Math.ceil(.5 * M),\n          b = e + v + a + c + u,\n          m = this.N.coordinate;\n      this.N.fixedCoordinate && (m = this.N.fixedCoordinate);\n      var p,\n          g,\n          y = (m = Math.round(m)) - w,\n          k = y + M,\n          N = \"right\" === h,\n          S = N ? s : 0,\n          x = Math.ceil(s * r),\n          D = S;\n\n      if (t.fillStyle = R(this.N.background), t.lineWidth = 1, t.lineCap = \"butt\", l) {\n        N ? (p = S - u, g = (D = S - b) + c) : (D = S + b, p = S + u, g = S + e + u + a);\n        var C = Math.max(1, Math.floor(r)),\n            T = Math.max(1, Math.floor(e * r)),\n            E = N ? x : 0,\n            L = Math.round(y * r),\n            A = Math.round(D * r),\n            B = Math.round(m * r) - Math.floor(.5 * r),\n            z = B + C + (B - L),\n            V = Math.round(p * r);\n        t.save(), t.beginPath(), t.moveTo(E, L), t.lineTo(A, L), t.lineTo(A, z), t.lineTo(E, z), t.fill(), t.fillStyle = this.m.borderColor, t.fillRect(N ? x - T : 0, L, T, z - L), this.m.tickVisible && (t.fillStyle = this.N.color, t.fillRect(E, B, V - E, C)), t.textAlign = \"left\", t.fillStyle = this.N.color, q(t, r, function () {\n          t.fillText(l, g, k - f - d);\n        }), t.restore();\n      }\n    }\n  }, t.prototype.height = function (t, i) {\n    return this.m.visible ? t.fontSize + t.paddingTop + t.paddingBottom : 0;\n  }, t;\n}(),\n    K = function () {\n  function t(t) {\n    this.S = {\n      coordinate: 0,\n      color: \"#FFF\",\n      background: \"#000\"\n    }, this.D = {\n      text: \"\",\n      visible: !1,\n      tickVisible: !0,\n      borderColor: \"\"\n    }, this.C = {\n      text: \"\",\n      visible: !1,\n      tickVisible: !1,\n      borderColor: \"\"\n    }, this.o = !0, this.T = new (t || Y)(this.D, this.S), this.L = new (t || Y)(this.C, this.S);\n  }\n\n  return t.prototype.text = function () {\n    return this.D.text;\n  }, t.prototype.background = function () {\n    return this.S.background;\n  }, t.prototype.color = function () {\n    return W(this.background());\n  }, t.prototype.coordinate = function () {\n    return this.A(), this.S.coordinate;\n  }, t.prototype.update = function () {\n    this.o = !0;\n  }, t.prototype.height = function (t, i) {\n    return void 0 === i && (i = !1), Math.max(this.T.height(t, i), this.L.height(t, i));\n  }, t.prototype.getFixedCoordinate = function () {\n    return this.S.fixedCoordinate || 0;\n  }, t.prototype.setFixedCoordinate = function (t) {\n    this.S.fixedCoordinate = t;\n  }, t.prototype.isVisible = function () {\n    return this.A(), this.D.visible || this.C.visible;\n  }, t.prototype.isAxisLabelVisible = function () {\n    return this.A(), this.D.visible;\n  }, t.prototype.isPaneLabelVisible = function () {\n    return this.A(), this.C.visible;\n  }, t.prototype.renderer = function () {\n    return this.A(), this.T.setData(this.D, this.S), this.L.setData(this.C, this.S), this.T;\n  }, t.prototype.paneRenderer = function () {\n    return this.A(), this.T.setData(this.D, this.S), this.L.setData(this.C, this.S), this.L;\n  }, t.prototype.A = function () {\n    this.o && (this._updateRendererData(this.D, this.C, this.S), this.o = !1);\n  }, t;\n}(),\n    $ = function (t) {\n  function i(i, n, s) {\n    var h = t.call(this) || this;\n    return h.k = i, h.B = n, h.V = s, h;\n  }\n\n  return u(i, t), i.prototype._updateRendererData = function (t, i, n) {\n    t.visible = !1;\n    var s = this.k.options().horzLine;\n\n    if (s.labelVisible) {\n      var h = this.B.firstValue();\n\n      if (this.k.visible() && !this.B.isEmpty() && null !== h) {\n        n.background = s.labelBackgroundColor, n.color = W(s.labelBackgroundColor);\n        var r = this.V(this.B);\n        n.coordinate = r.coordinate, t.text = this.B.formatPrice(r.price, h), t.visible = !0;\n      }\n    }\n  }, i;\n}(K),\n    _ = /[1-9]/g,\n    X = function () {\n  function t() {\n    this.m = null;\n  }\n\n  return t.prototype.setData = function (t) {\n    this.m = t;\n  }, t.prototype.draw = function (t, i, n) {\n    var s = this;\n\n    if (null !== this.m && !1 !== this.m.visible && 0 !== this.m.text.length) {\n      t.font = i.font;\n      var h = Math.round(i.widthCache.measureText(t, this.m.text, _));\n\n      if (!(h <= 0)) {\n        t.save();\n        var r = i.paddingHorizontal,\n            u = h + 2 * r,\n            e = u / 2,\n            o = this.m.width,\n            f = this.m.coordinate,\n            a = Math.floor(f - e) + .5;\n        a < 0 ? (f += Math.abs(0 - a), a = Math.floor(f - e) + .5) : a + u > o && (f -= Math.abs(o - (a + u)), a = Math.floor(f - e) + .5);\n        var l = a + u,\n            v = 0 + i.borderSize + i.paddingTop + i.fontSize + i.paddingBottom;\n        t.fillStyle = this.m.background;\n        var d = Math.round(a * n),\n            M = Math.round(0 * n),\n            w = Math.round(l * n),\n            b = Math.round(v * n);\n        t.fillRect(d, M, w - d, b - M);\n        var m = Math.round(this.m.coordinate * n),\n            p = M,\n            g = Math.round((p + i.borderSize + i.tickLength) * n);\n        t.fillStyle = this.m.color;\n        var y = Math.max(1, Math.floor(n)),\n            k = Math.floor(.5 * n);\n        t.fillRect(m - k, p, y, g - p);\n        var N = v - i.baselineOffset - i.paddingBottom;\n        t.textAlign = \"left\", t.fillStyle = this.m.color, q(t, n, function () {\n          t.fillText(c(s.m).text, a + r, N);\n        }), t.restore();\n      }\n    }\n  }, t;\n}(),\n    Z = function (t) {\n  function i(i, n, s) {\n    var h = t.call(this) || this;\n    return h.o = !0, h.g = new X(), h.p = {\n      visible: !1,\n      background: \"#4c525e\",\n      color: \"white\",\n      text: \"\",\n      width: 0,\n      coordinate: NaN\n    }, h.v = i, h.F = n, h.V = s, h;\n  }\n\n  return u(i, t), i.prototype.update = function () {\n    this.o = !0;\n  }, i.prototype.renderer = function () {\n    return this.o && (this.M(), this.o = !1), this.g.setData(this.p), this.g;\n  }, i.prototype.M = function () {\n    var t = this.p;\n    t.visible = !1;\n    var i = this.v.options().vertLine;\n\n    if (i.labelVisible) {\n      var n = this.F.timeScale();\n\n      if (!n.isEmpty()) {\n        var s = n.indexToUserTime(this.v.appliedIndex());\n        t.width = n.width();\n        var h = this.V();\n        h.time && (t.coordinate = h.coordinate, t.text = n.formatDateTime(c(s)), t.visible = !0, t.background = i.labelBackgroundColor, t.color = W(i.labelBackgroundColor));\n      }\n    }\n  }, i;\n}(function () {\n  function t() {\n    this._text = \"\", this._background = \"#585858\", this._coordinate = 0;\n  }\n\n  return t.prototype.text = function () {\n    return this._text;\n  }, t.prototype.background = function () {\n    return this._background;\n  }, t.prototype.color = function () {\n    return \"black\" === O(I(this._background), 150) ? \"white\" : \"black\";\n  }, t.prototype.coordinate = function () {\n    return this._coordinate;\n  }, t;\n}()),\n    J = function () {\n  function t() {\n    this._priceScale = null, this.P = 0;\n  }\n\n  return t.prototype.zorder = function () {\n    return this.P;\n  }, t.prototype.setZorder = function (t) {\n    this.P = t;\n  }, t.prototype.priceScale = function () {\n    return this._priceScale;\n  }, t.prototype.setPriceScale = function (t) {\n    this._priceScale = t;\n  }, t.prototype.priceAxisViews = function (t, i) {\n    return [];\n  }, t.prototype.paneViews = function (t) {\n    return [];\n  }, t.prototype.timeAxisViews = function () {\n    return [];\n  }, t;\n}();\n\n!function (t) {\n  t[t.Normal = 0] = \"Normal\", t[t.Magnet = 1] = \"Magnet\";\n}(H || (H = {}));\n\nvar G = function (t) {\n  function i(i, n) {\n    var s = t.call(this) || this;\n    s.I = null, s.O = NaN, s.R = 0, s.W = !0, s.U = new Map(), s.q = !1, s.j = NaN, s.H = NaN, s.Y = NaN, s.K = NaN, s.F = i, s.$ = n, s._ = new L(i, s);\n    var h, r;\n    s.X = (h = function h() {\n      return s.O;\n    }, r = function r() {\n      return s.H;\n    }, function (t) {\n      var i = r(),\n          n = h();\n      if (t === c(s.I).defaultPriceScale()) return {\n        price: n,\n        coordinate: i\n      };\n      var u = c(t.firstValue());\n      return {\n        price: t.coordinateToPrice(i, u),\n        coordinate: i\n      };\n    });\n\n    var u = function (t, i) {\n      return function () {\n        return {\n          time: s.F.timeScale().indexToUserTime(t()),\n          coordinate: i()\n        };\n      };\n    }(function () {\n      return s.R;\n    }, function () {\n      return s.appliedX();\n    });\n\n    return s.Z = new Z(s, i, u), s.J = new B(s), s;\n  }\n\n  return u(i, t), i.prototype.index = function () {\n    return this.R;\n  }, i.prototype.options = function () {\n    return this.$;\n  }, i.prototype.saveOriginCoord = function (t, i) {\n    this.Y = t, this.K = i;\n  }, i.prototype.clearOriginCoord = function () {\n    this.Y = NaN, this.K = NaN;\n  }, i.prototype.originCoordX = function () {\n    return this.Y;\n  }, i.prototype.originCoordY = function () {\n    return this.K;\n  }, i.prototype.setPosition = function (t, i, n) {\n    this.q || (this.q = !0), this.W = !0, this.G(t, i, n);\n  }, i.prototype.appliedIndex = function () {\n    return this.R;\n  }, i.prototype.appliedX = function () {\n    return this.j;\n  }, i.prototype.appliedY = function () {\n    return this.H;\n  }, i.prototype.visible = function () {\n    return this.W;\n  }, i.prototype.clearPosition = function () {\n    this.W = !1, this.tt(), this.O = NaN, this.j = NaN, this.H = NaN, this.I = null, this.clearOriginCoord();\n  }, i.prototype.paneViews = function (t) {\n    return null !== this.I ? [this.J, this._] : [];\n  }, i.prototype.horzLineVisible = function (t) {\n    return t === this.I && this.$.horzLine.visible;\n  }, i.prototype.vertLineVisible = function () {\n    return this.$.vertLine.visible;\n  }, i.prototype.priceAxisViews = function (t, i) {\n    this.W && this.I === t || this.U.clear();\n    var n = [];\n    return this.I === t && n.push(this.it(this.U, i, this.X)), n;\n  }, i.prototype.timeAxisViews = function () {\n    return this.W ? [this.Z] : [];\n  }, i.prototype.pane = function () {\n    return this.I;\n  }, i.prototype.updateAllViews = function () {\n    this.U.forEach(function (t) {\n      return t.update();\n    }), this.Z.update(), this._.update();\n  }, i.prototype.nt = function (t) {\n    return t && !t.defaultPriceScale().isEmpty() ? t.defaultPriceScale() : null;\n  }, i.prototype.G = function (t, i, n) {\n    this.st(t, i, n) && this.updateAllViews();\n  }, i.prototype.st = function (t, i, n) {\n    var s = this.j,\n        h = this.H,\n        r = this.O,\n        u = this.R,\n        e = this.I,\n        o = this.nt(n);\n    this.R = t, this.j = isNaN(t) ? NaN : this.F.timeScale().indexToCoordinate(t), this.I = n;\n    var f = null !== o ? o.firstValue() : null;\n    return null !== o && null !== f ? (this.O = i, this.H = o.priceToCoordinate(i, f)) : (this.O = NaN, this.H = NaN), s !== this.j || h !== this.H || u !== this.R || r !== this.O || e !== this.I;\n  }, i.prototype.tt = function () {\n    var t = this.F.serieses().map(function (t) {\n      return t.bars().lastIndex();\n    }).filter(g),\n        i = 0 === t.length ? null : Math.max.apply(Math, t);\n    this.R = null !== i ? i : NaN;\n  }, i.prototype.it = function (t, i, n) {\n    var s = t.get(i);\n    return void 0 === s && (s = new $(this, i, n), t.set(i, s)), s;\n  }, i;\n}(J),\n    Q = \".\",\n    tt = \"'\";\n\nfunction it(t, i) {\n  if (!d(t)) return \"n/a\";\n  if (!M(i)) throw new TypeError(\"invalid length\");\n  if (i < 0 || i > 16) throw new TypeError(\"invalid length\");\n  if (0 === i) return t.toString();\n  return (\"0000000000000000\" + t.toString()).slice(-i);\n}\n\nvar nt,\n    st = function () {\n  function t(t, i, n, s) {\n    if (i || (i = 1), d(t) && M(t) || (t = 100), t < 0) throw new TypeError(\"invalid base\");\n    this.B = t, this.ht = i, this.rt = s, n && void 0 !== s && s > 0 && 2 !== s && 4 !== s && 8 !== s || (this.ut = n, this.et());\n  }\n\n  return t.prototype.format = function (t) {\n    var i = t < 0 ? \"âˆ’\" : \"\";\n    return t = Math.abs(t), this.ut ? i + this.ot(t) : i + this.ft(t);\n  }, t.prototype.et = function () {\n    if (this._fractionalLength = 0, this.B > 0 && this.ht > 0) {\n      var t = this.B;\n\n      for (this.ut && this.rt && (t /= this.rt); t > 1;) {\n        t /= 10, this._fractionalLength++;\n      }\n    }\n  }, t.prototype.ft = function (t) {\n    var i;\n    i = this.ut ? Math.pow(10, this._fractionalLength || 0) : this.B / this.ht;\n    var n = Math.floor(t),\n        s = \"\",\n        h = void 0 !== this._fractionalLength ? this._fractionalLength : NaN;\n\n    if (i > 1) {\n      var r = +(Math.round(t * i) - n * i).toFixed(this._fractionalLength);\n      r >= i && (r -= i, n += 1), s = Q + it(+r.toFixed(this._fractionalLength) * this.ht, h);\n    } else n = Math.round(n * i) / i, h > 0 && (s = Q + it(0, h));\n\n    return n.toFixed(0) + s;\n  }, t.prototype.ot = function (t) {\n    var i = this.B / this.ht,\n        n = Math.floor(t),\n        s = Math.round(t * i) - n * i;\n    if (s === i && (s = 0, n += 1), !this._fractionalLength) throw new Error(\"_fractionalLength is not calculated\");\n    var h = \"\";\n\n    if (this.rt) {\n      var r = s % this.rt,\n          u = it(s = (s - r) / this.rt, this._fractionalLength),\n          e = 2 === this.rt ? [\"0\", \"5\"][r] : 8 === this.rt ? [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\"][r] : [\"0\", \"2\", \"5\", \"7\"][r];\n      h = u + tt + e;\n    } else h = it(s * this.ht, this._fractionalLength);\n\n    return n.toString() + tt + h;\n  }, t;\n}(),\n    ht = function (t) {\n  function i(i) {\n    return void 0 === i && (i = 100), t.call(this, i) || this;\n  }\n\n  return u(i, t), i.prototype.format = function (i) {\n    return t.prototype.format.call(this, i) + \"%\";\n  }, i;\n}(st),\n    rt = function () {\n  function t() {\n    this.at = [];\n  }\n\n  return t.prototype.subscribe = function (t, i, n) {\n    var s = {\n      callback: t,\n      linkedObject: i,\n      singleshot: !0 === n\n    };\n    this.at.push(s);\n  }, t.prototype.unsubscribe = function (t) {\n    var i = this.at.findIndex(function (i) {\n      return t === i.callback;\n    });\n    i > -1 && this.at.splice(i, 1);\n  }, t.prototype.unsubscribeAll = function (t) {\n    this.at = this.at.filter(function (i) {\n      return i.linkedObject === t;\n    });\n  }, t.prototype.fire = function (t, i) {\n    var n = o(this.at);\n    this.at = this.at.filter(function (t) {\n      return !t.singleshot;\n    }), n.forEach(function (n) {\n      return n.callback(t, i);\n    });\n  }, t.prototype.hasListeners = function () {\n    return this.at.length > 0;\n  }, t.prototype.destroy = function () {\n    this.at = [];\n  }, t;\n}(),\n    ut = function (t) {\n  function i(i) {\n    var n = t.call(this) || this;\n    return n.F = i, n;\n  }\n\n  return u(i, t), i.prototype.model = function () {\n    return this.F;\n  }, i.prototype.minMove = function () {\n    return 0;\n  }, i.prototype.autoscaleInfo = function (t, i) {\n    return null;\n  }, i;\n}(J),\n    et = function () {\n  function t(t, i) {\n    this.ct = t, this.lt = i;\n  }\n\n  return t.prototype.equals = function (t) {\n    return null !== t && this.ct === t.ct && this.lt === t.lt;\n  }, t.prototype.clone = function () {\n    return new t(this.ct, this.lt);\n  }, t.prototype.minValue = function () {\n    return this.ct;\n  }, t.prototype.setMinValue = function (t) {\n    this.ct = t;\n  }, t.prototype.maxValue = function () {\n    return this.lt;\n  }, t.prototype.setMaxValue = function (t) {\n    this.lt = t;\n  }, t.prototype.length = function () {\n    return this.lt - this.ct;\n  }, t.prototype.isEmpty = function () {\n    return this.lt === this.ct || Number.isNaN(this.lt) || Number.isNaN(this.ct);\n  }, t.prototype.merge = function (i) {\n    return null === i ? this : new t(Math.min(this.minValue(), i.minValue()), Math.max(this.maxValue(), i.maxValue()));\n  }, t.prototype.apply = function (t, i) {\n    this.ct = Math.min(this.ct, t), this.lt = Math.max(this.lt, i);\n  }, t.prototype.set = function (t, i) {\n    this.ct = t, this.lt = i;\n  }, t.prototype.scaleAroundCenter = function (t) {\n    if (d(t) && 0 !== this.lt - this.ct) {\n      var i = .5 * (this.lt + this.ct),\n          n = this.lt - i,\n          s = this.ct - i;\n      n *= t, s *= t, this.lt = i + n, this.ct = i + s;\n    }\n  }, t.prototype.shift = function (t) {\n    d(t) && (this.lt += t, this.ct += t);\n  }, t.prototype.containsStrictly = function (t) {\n    return t.minValue() > this.ct && t.maxValue() < this.lt;\n  }, t;\n}();\n\nfunction ot(t, i, n) {\n  return Math.min(Math.max(t, i), n);\n}\n\nfunction ft(t, i, n) {\n  return i - t <= n;\n}\n\nfunction at(t) {\n  return t <= 0 ? NaN : Math.log(t) / Math.log(10);\n}\n\nfunction ct(t) {\n  var i = Math.ceil(t);\n  return i % 2 != 0 ? i - 1 : i;\n}\n\nfunction lt(t) {\n  var i = Math.ceil(t);\n  return i % 2 == 0 ? i - 1 : i;\n}\n\nfunction vt(t, i) {\n  var n = 100 * (t - i) / i;\n  return i < 0 ? -n : n;\n}\n\nfunction dt(t, i) {\n  var n = vt(t.minValue(), i),\n      s = vt(t.maxValue(), i);\n  return new et(n, s);\n}\n\nfunction Mt(t, i) {\n  var n = 100 * (t - i) / i + 100;\n  return i < 0 ? -n : n;\n}\n\nfunction wt(t, i) {\n  var n = Mt(t.minValue(), i),\n      s = Mt(t.maxValue(), i);\n  return new et(n, s);\n}\n\nfunction bt(t) {\n  var i = Math.abs(t);\n  if (i < 1e-8) return 0;\n  var n = at(i + 1e-4) + 4;\n  return t < 0 ? -n : n;\n}\n\nfunction mt(t) {\n  var i = Math.abs(t);\n  if (i < 1e-8) return 0;\n  var n = Math.pow(10, i - 4) - 1e-4;\n  return t < 0 ? -n : n;\n}\n\nfunction pt(t) {\n  if (null === t) return null;\n  var i = bt(t.minValue()),\n      n = bt(t.maxValue());\n  return new et(i, n);\n}\n\n!function (t) {\n  t[t.LogicalOffset = 4] = \"LogicalOffset\", t[t.CoordOffset = 1e-4] = \"CoordOffset\";\n}(nt || (nt = {}));\n\nvar gt = function () {\n  function t(t, i) {\n    if (this.vt = t, this.dt = i, function (t) {\n      if (t < 0) return !1;\n\n      for (var i = t; i > 1; i /= 10) {\n        if (i % 10 != 0) return !1;\n      }\n\n      return !0;\n    }(this.vt)) this.Mt = [2, 2.5, 2];else {\n      this.Mt = [];\n\n      for (var n = this.vt; 1 !== n;) {\n        if (n % 2 == 0) this.Mt.push(2), n /= 2;else {\n          if (n % 5 != 0) throw new Error(\"unexpected base\");\n          this.Mt.push(2), this.Mt.push(2.5), n /= 5;\n        }\n        if (this.Mt.length > 100) throw new Error(\"something wrong with base\");\n      }\n    }\n  }\n\n  return t.prototype.tickSpan = function (t, i, n) {\n    for (var s, h, r, u = 0 === this.vt ? 0 : 1 / this.vt, e = Math.pow(10, Math.max(0, Math.ceil(at(t - i)))), o = 0, f = this.dt[0];;) {\n      var a = ft(e, u, 1e-9) && e > u + 1e-9,\n          c = ft(e, n * f, 1e-9),\n          l = ft(e, 1, 1e-9);\n      if (!(a && c && l)) break;\n      e /= f, f = this.dt[++o % this.dt.length];\n    }\n\n    if (e <= u + 1e-9 && (e = u), e = Math.max(1, e), this.Mt.length > 0 && (s = e, h = 1, r = 1e-9, Math.abs(s - h) < r)) for (o = 0, f = this.Mt[0]; ft(e, n * f, 1e-9) && e > u + 1e-9;) {\n      e /= f, f = this.Mt[++o % this.Mt.length];\n    }\n    return e;\n  }, t;\n}(),\n    yt = function () {\n  function t(t, i, n, s) {\n    this.wt = [], this.B = t, this.vt = i, this.bt = n, this.pt = s;\n  }\n\n  return t.prototype.setBase = function (t) {\n    if (t < 0) throw new Error(\"base < 0\");\n    this.vt = t;\n  }, t.prototype.tickSpan = function (t, i) {\n    if (t < i) throw new Error(\"high < low\");\n    var n = this.B.height(),\n        s = (t - i) * this.gt() / n,\n        h = new gt(this.vt, [2, 2.5, 2]),\n        r = new gt(this.vt, [2, 2, 2.5]),\n        u = new gt(this.vt, [2.5, 2, 2]),\n        e = [];\n    return e.push(h.tickSpan(t, i, s)), e.push(r.tickSpan(t, i, s)), e.push(u.tickSpan(t, i, s)), function (t) {\n      if (t.length < 1) throw Error(\"array is empty\");\n\n      for (var i = t[0], n = 1; n < t.length; ++n) {\n        t[n] < i && (i = t[n]);\n      }\n\n      return i;\n    }(e);\n  }, t.prototype.rebuildTickMarks = function () {\n    var t = this.B,\n        i = t.firstValue();\n\n    if (null !== i) {\n      var n = t.height(),\n          s = this.bt(n - 1, i),\n          h = this.bt(0, i),\n          r = this.B.options().entireTextOnly ? this.yt() / 2 : 0,\n          u = r,\n          e = n - 1 - r,\n          o = Math.max(s, h),\n          f = Math.min(s, h);\n\n      if (o !== f) {\n        for (var a = this.tickSpan(o, f), c = o % a, l = o >= f ? 1 : -1, v = null, d = 0, M = o - (c += c < 0 ? a : 0); M > f; M -= a) {\n          var w = this.pt(M, i, !0);\n          null !== v && Math.abs(w - v) < this.gt() || w < u || w > e || (d < this.wt.length ? (this.wt[d].coord = w, this.wt[d].label = t.formatLogical(M)) : this.wt.push({\n            coord: w,\n            label: t.formatLogical(M)\n          }), d++, v = w, t.isLog() && (a = this.tickSpan(M * l, f)));\n        }\n\n        this.wt.length = d;\n      } else this.wt = [];\n    } else this.wt = [];\n  }, t.prototype.marks = function () {\n    return this.wt;\n  }, t.prototype.yt = function () {\n    return this.B.fontSize();\n  }, t.prototype.gt = function () {\n    return Math.ceil(2.5 * this.yt());\n  }, t;\n}(),\n    kt = function () {\n  function t(t) {\n    this.kt = t;\n  }\n\n  return t.prototype.format = function (t) {\n    var i = \"\";\n    return t < 0 && (i = \"-\", t = -t), t < 995 ? i + this.Nt(t) : t < 999995 ? i + this.Nt(t / 1e3) + \"K\" : t < 999999995 ? (t = 1e3 * Math.round(t / 1e3), i + this.Nt(t / 1e6) + \"M\") : (t = 1e6 * Math.round(t / 1e6), i + this.Nt(t / 1e9) + \"B\");\n  }, t.prototype.Nt = function (t) {\n    var i = Math.pow(10, this.kt);\n    return ((t = Math.round(t * i) / i) >= 1e-15 && t < 1 ? t.toFixed(this.kt).replace(/\\.?0+$/, \"\") : String(t)).replace(/(\\.[1-9]*)0+$/, function (t, i) {\n      return i;\n    });\n  }, t;\n}();\n\nfunction Nt(t, i, n, s) {\n  if (0 !== i.length) {\n    var h = i[s.from].x,\n        r = i[s.from].y;\n    t.moveTo(h, r);\n\n    for (var u = s.from + 1; u < s.to; ++u) {\n      var e = i[u];\n\n      if (1 === n) {\n        var o = i[u - 1].y,\n            f = e.x;\n        t.lineTo(f, o);\n      }\n\n      t.lineTo(e.x, e.y);\n    }\n  }\n}\n\nvar St = function (t) {\n  function i() {\n    var i = null !== t && t.apply(this, arguments) || this;\n    return i._data = null, i;\n  }\n\n  return u(i, t), i.prototype.setData = function (t) {\n    this._data = t;\n  }, i.prototype._drawImpl = function (t) {\n    if (null !== this._data && 0 !== this._data.items.length && null !== this._data.visibleRange) {\n      t.lineCap = \"butt\", t.strokeStyle = this._data.lineColor, t.lineWidth = this._data.lineWidth, s(t, this._data.lineStyle), t.lineWidth = 1, t.beginPath(), t.moveTo(this._data.items[this._data.visibleRange.from].x, this._data.bottom), t.lineTo(this._data.items[this._data.visibleRange.from].x, this._data.items[this._data.visibleRange.from].y), Nt(t, this._data.items, this._data.lineType, this._data.visibleRange), t.lineTo(this._data.items[this._data.visibleRange.to - 1].x, this._data.bottom), t.lineTo(this._data.items[this._data.visibleRange.from].x, this._data.bottom), t.closePath();\n      var i = t.createLinearGradient(0, 0, 0, this._data.bottom);\n      i.addColorStop(0, this._data.topColor), i.addColorStop(1, this._data.bottomColor), t.fillStyle = i, t.fill();\n    }\n  }, i;\n}(N),\n    xt = function (t) {\n  function i() {\n    var i = null !== t && t.apply(this, arguments) || this;\n    return i._data = null, i;\n  }\n\n  return u(i, t), i.prototype.setData = function (t) {\n    this._data = t;\n  }, i.prototype._drawImpl = function (t) {\n    null !== this._data && 0 !== this._data.items.length && null !== this._data.visibleRange && (t.lineCap = \"square\", t.lineWidth = this._data.lineWidth, s(t, this._data.lineStyle), t.strokeStyle = this._data.lineColor, t.lineJoin = \"miter\", t.beginPath(), Nt(t, this._data.items, this._data.lineType, this._data.visibleRange), t.stroke());\n  }, i;\n}(N);\n\nfunction Dt(t, i, n, s, h) {\n  void 0 === s && (s = 0), void 0 === h && (h = t.length);\n\n  for (var r = h - s; 0 < r;) {\n    var u = r >> 1,\n        e = s + u;\n    n(t[e], i) ? (s = e + 1, r -= u + 1) : r = u;\n  }\n\n  return s;\n}\n\nfunction Ct(t, i, n, s, h) {\n  void 0 === s && (s = 0), void 0 === h && (h = t.length);\n\n  for (var r = h - s; 0 < r;) {\n    var u = r >> 1,\n        e = s + u;\n    n(i, t[e]) ? r = u : (s = e + 1, r -= u + 1);\n  }\n\n  return s;\n}\n\nfunction Tt(t, i) {\n  return t.time < i;\n}\n\nfunction Et(t, i) {\n  return t < i.time;\n}\n\nfunction Lt(t, i, n) {\n  var s = i.firstBar(),\n      h = i.lastBar(),\n      r = Dt(t, s, Tt),\n      u = Ct(t, h, Et);\n  if (!n) return {\n    from: r,\n    to: u\n  };\n  var e = r,\n      o = u;\n  return r > 0 && r < t.length && t[r].time >= s && (e = r - 1), u > 0 && u < t.length && t[u - 1].time <= h && (o = u + 1), {\n    from: e,\n    to: o\n  };\n}\n\nvar At = function () {\n  function t(t, i, n) {\n    this._invalidated = !0, this._dataInvalidated = !0, this._items = [], this._itemsVisibleRange = null, this._series = t, this._model = i, this.St = n;\n  }\n\n  return t.prototype.update = function (t) {\n    this._invalidated = !0, \"data\" === t && (this._dataInvalidated = !0);\n  }, t.prototype._makeValid = function () {\n    this._dataInvalidated && (this._fillRawPoints(), this._dataInvalidated = !1), this._invalidated && (this._updatePoints(), this._invalidated = !1);\n  }, t.prototype._clearVisibleRange = function () {\n    this._itemsVisibleRange = null;\n  }, t.prototype._updatePoints = function () {\n    var t = this._series.priceScale(),\n        i = this._model.timeScale();\n\n    if (this._clearVisibleRange(), !i.isEmpty() && !t.isEmpty()) {\n      var n = i.visibleBars();\n\n      if (null !== n && 0 !== this._series.data().bars().size()) {\n        var s = this._series.firstValue();\n\n        null !== s && (this._itemsVisibleRange = Lt(this._items, n, this.St), this._convertToCoordinates(t, i, s.value));\n      }\n    }\n  }, t;\n}(),\n    Bt = function (t) {\n  function i(i, n) {\n    return t.call(this, i, n, !0) || this;\n  }\n\n  return u(i, t), i.prototype._convertToCoordinates = function (t, i, n) {\n    i.indexesToCoordinates(this._items, y(this._itemsVisibleRange)), t.pointsArrayToCoordinates(this._items, n, y(this._itemsVisibleRange));\n  }, i.prototype._createRawItemBase = function (t, i) {\n    return {\n      time: t,\n      price: i,\n      x: NaN,\n      y: NaN\n    };\n  }, i.prototype._fillRawPoints = function () {\n    var t = this,\n        i = this._series.barFunction(),\n        n = [],\n        s = this._series.barColorer();\n\n    this._series.bars().each(function (h, r) {\n      var u = i(r.value),\n          e = t._createRawItem(h, u, s);\n\n      return n.push(e), !1;\n    }), this._items = n;\n  }, i;\n}(At),\n    zt = function (t) {\n  function i(i, n) {\n    var s = t.call(this, i, n) || this;\n    return s.g = new k(), s.xt = new St(), s.Dt = new xt(), s.g.setRenderers([s.xt, s.Dt]), s;\n  }\n\n  return u(i, t), i.prototype.renderer = function (t, i) {\n    this._makeValid();\n\n    var n = this._series.options(),\n        s = {\n      lineType: n.lineType,\n      items: this._items,\n      lineColor: n.lineColor,\n      lineStyle: n.lineStyle,\n      lineWidth: n.lineWidth,\n      topColor: n.topColor,\n      bottomColor: n.bottomColor,\n      bottom: t,\n      visibleRange: this._itemsVisibleRange\n    };\n\n    return this.xt.setData(s), this.Dt.setData(s), this.g;\n  }, i.prototype._createRawItem = function (t, i) {\n    return this._createRawItemBase(t, i);\n  }, i;\n}(Bt);\n\nvar Vt,\n    Ft = function () {\n  function t() {\n    this.m = null, this.Ct = 0, this.Tt = 0;\n  }\n\n  return t.prototype.setData = function (t) {\n    this.m = t;\n  }, t.prototype.draw = function (t, i, n, s) {\n    if (null !== this.m && 0 !== this.m.bars.length && null !== this.m.visibleRange) {\n      if (this.Ct = Math.max(1, Math.floor(function (t, i) {\n        return Math.floor(.3 * t * i);\n      }(this.m.barSpacing, i))), this.Ct >= 2) Math.floor(i) % 2 != this.Ct % 2 && this.Ct--;\n      this.Tt = this.m.thinBars ? Math.min(this.Ct, Math.floor(i)) : this.Ct;\n\n      for (var h = null, r = this.m.visibleRange.from; r < this.m.visibleRange.to; ++r) {\n        var u = this.m.bars[r];\n        h !== u.color && (t.fillStyle = u.color, h = u.color);\n        var e = Math.floor(.5 * this.Tt),\n            o = Math.round(u.x * i),\n            f = o - e,\n            a = this.Tt,\n            c = f + a - 1,\n            l = Math.round(u.highY * i) - e,\n            v = Math.round(u.lowY * i) + e,\n            d = Math.max(v - l, this.Tt);\n        t.fillRect(f, l, a, d);\n        var M = Math.ceil(1.5 * this.Ct);\n\n        if (this.Tt <= this.Ct) {\n          if (this.m.openVisible) {\n            var w = o - M,\n                b = Math.max(l, Math.round(u.openY * i) - e),\n                m = b + a - 1;\n            m > l + d - 1 && (b = (m = l + d - 1) - a + 1), t.fillRect(w, b, f - w, m - b + 1);\n          }\n\n          var p = o + M,\n              g = Math.max(l, Math.round(u.closeY * i) - e),\n              y = g + a - 1;\n          y > l + d - 1 && (g = (y = l + d - 1) - a + 1), t.fillRect(c + 1, g, p - c, y - g + 1);\n        }\n      }\n    }\n  }, t;\n}(),\n    Pt = function (t) {\n  function i(i, n) {\n    return t.call(this, i, n, !1) || this;\n  }\n\n  return u(i, t), i.prototype._convertToCoordinates = function (t, i, n) {\n    i.indexesToCoordinates(this._items, y(this._itemsVisibleRange)), t.barPricesToCoordinates(this._items, n, y(this._itemsVisibleRange));\n  }, i.prototype._createDefaultItem = function (t, i, n) {\n    return {\n      time: t,\n      open: i.value[0],\n      high: i.value[1],\n      low: i.value[2],\n      close: i.value[3],\n      x: NaN,\n      openY: NaN,\n      highY: NaN,\n      lowY: NaN,\n      closeY: NaN\n    };\n  }, i.prototype._fillRawPoints = function () {\n    var t = this,\n        i = [],\n        n = this._series.barColorer();\n\n    this._series.bars().each(function (s, h) {\n      var r = t._createRawItem(s, h, n);\n\n      return i.push(r), !1;\n    }), this._items = i;\n  }, i;\n}(At),\n    It = function (t) {\n  function i(i, n) {\n    var s = t.call(this, i, n) || this;\n    return s.g = new Ft(), s;\n  }\n\n  return u(i, t), i.prototype.renderer = function (t, i) {\n    this._makeValid();\n\n    var n = this._series.options(),\n        s = {\n      bars: this._items,\n      barSpacing: this._model.timeScale().barSpacing(),\n      openVisible: n.openVisible,\n      thinBars: n.thinBars,\n      visibleRange: this._itemsVisibleRange\n    };\n\n    return this.g.setData(s), this.g;\n  }, i.prototype._createRawItem = function (t, i, n) {\n    return _e(_e({}, this._createDefaultItem(t, i, n)), {\n      color: n.barStyle(t).barColor\n    });\n  }, i;\n}(Pt);\n\n!function (t) {\n  t[t.BarBorderWidth = 1] = \"BarBorderWidth\";\n}(Vt || (Vt = {}));\n\nvar Ot = function () {\n  function t() {\n    this.m = null, this.Ct = 0;\n  }\n\n  return t.prototype.setData = function (t) {\n    this.m = t;\n  }, t.prototype.draw = function (t, i, n, s) {\n    if (null !== this.m && 0 !== this.m.bars.length && null !== this.m.visibleRange) {\n      if (this.Ct = function (t, i) {\n        var n = Math.floor(.8 * t * i),\n            s = Math.floor(t * i),\n            h = Math.min(n, s - 1);\n        return Math.max(1, h);\n      }(this.m.barSpacing, i), this.Ct >= 2) Math.floor(i) % 2 != this.Ct % 2 && this.Ct--;\n      var h = this.m.bars;\n      this.m.wickVisible && this.Et(t, h, this.m.visibleRange, i), this.m.borderVisible && this.Lt(t, h, this.m.visibleRange, this.m.barSpacing, i);\n      var r = this.At(i);\n      (!this.m.borderVisible || this.Ct > 2 * r) && this.Bt(t, h, this.m.visibleRange, i);\n    }\n  }, t.prototype.Et = function (t, i, n, s) {\n    if (null !== this.m) {\n      var h = \"\",\n          r = Math.min(Math.floor(s), Math.floor(this.m.barSpacing * s));\n      r = Math.min(r, this.Ct);\n\n      for (var u = Math.floor(.5 * r), e = n.from; e < n.to; e++) {\n        var o = i[e];\n        o.wickColor !== h && (t.fillStyle = o.wickColor, h = o.wickColor);\n        var f = Math.round(Math.min(o.openY, o.closeY) * s),\n            a = Math.round(Math.max(o.openY, o.closeY) * s),\n            c = Math.round(o.highY * s),\n            l = Math.round(o.lowY * s),\n            v = Math.round(s * o.x);\n        t.fillRect(v - u, c, r, f - c), t.fillRect(v - u, a + 1, r, l - a);\n      }\n    }\n  }, t.prototype.At = function (t) {\n    var i = Math.floor(1 * t);\n    this.Ct <= 2 * i && (i = Math.floor(.5 * (this.Ct - 1)));\n    var n = Math.max(1, i);\n    return this.Ct <= 2 * n ? Math.floor(1 * t) : n;\n  }, t.prototype.Lt = function (t, i, n, s, h) {\n    for (var r = \"\", u = this.At(h), e = n.from; e < n.to; e++) {\n      var o = i[e];\n      o.borderColor !== r && (t.fillStyle = o.borderColor, r = o.borderColor);\n      var f = Math.round(o.x * h) - Math.floor(.5 * this.Ct),\n          a = f + this.Ct - 1,\n          c = Math.round(Math.min(o.openY, o.closeY) * h),\n          l = Math.round(Math.max(o.openY, o.closeY) * h);\n      s > 2 * u ? U(t, f, c, a - f + 1, l - c + 1, u) : t.fillRect(f, c, a - f + 1, l - c + 1);\n    }\n  }, t.prototype.Bt = function (t, i, n, s) {\n    if (null !== this.m) for (var h = \"\", r = this.At(s), u = n.from; u < n.to; u++) {\n      var e = i[u],\n          o = Math.round(Math.min(e.openY, e.closeY) * s),\n          f = Math.round(Math.max(e.openY, e.closeY) * s),\n          a = Math.round(e.x * s) - Math.floor(.5 * this.Ct),\n          c = a + this.Ct - 1;\n\n      if (this.m.borderVisible && (a += r, o += r, c -= r, f -= r), !(o > f)) {\n        if (e.color !== h) {\n          var l = e.color;\n          t.fillStyle = l, h = l;\n        }\n\n        t.fillRect(a, o, c - a + 1, f - o + 1);\n      }\n    }\n  }, t;\n}(),\n    Rt = function (t) {\n  function i(i, n) {\n    var s = t.call(this, i, n) || this;\n    return s.g = new Ot(), s;\n  }\n\n  return u(i, t), i.prototype.renderer = function (t, i) {\n    this._makeValid();\n\n    var n = this._series.options(),\n        s = {\n      bars: this._items,\n      barSpacing: this._model.timeScale().barSpacing(),\n      wickVisible: n.wickVisible,\n      borderVisible: n.borderVisible,\n      visibleRange: this._itemsVisibleRange\n    };\n\n    return this.g.setData(s), this.g;\n  }, i.prototype._createRawItem = function (t, i, n) {\n    var s = n.barStyle(t);\n    return _e(_e({}, this._createDefaultItem(t, i, n)), {\n      color: s.barColor,\n      wickColor: s.barWickColor,\n      borderColor: s.barBorderColor\n    });\n  }, i;\n}(Pt),\n    Wt = function () {\n  function t() {\n    this.m = null, this.zt = [];\n  }\n\n  return t.prototype.setData = function (t) {\n    this.m = t, this.zt = [];\n  }, t.prototype.draw = function (t, i, n, s) {\n    if (null !== this.m && 0 !== this.m.items.length && null !== this.m.visibleRange) {\n      this.zt.length || this.Vt(i);\n\n      for (var h = Math.round(this.m.histogramBase * i), r = Math.max(1, Math.floor(i)), u = this.m.visibleRange.from; u < this.m.visibleRange.to; u++) {\n        var e = this.m.items[u],\n            o = this.zt[u - this.m.visibleRange.from],\n            f = Math.round(e.y * i);\n        t.fillStyle = e.color, t.fillRect(o.left, f, o.right - o.left + 1, h - f + r);\n      }\n    }\n  }, t.prototype.Vt = function (t) {\n    if (null !== this.m && 0 !== this.m.items.length && null !== this.m.visibleRange) {\n      var i = Math.ceil(this.m.barSpacing * t) <= 3 ? 0 : Math.max(1, Math.floor(t)),\n          n = Math.round(this.m.barSpacing * t) - i;\n      this.zt = new Array(this.m.visibleRange.to - this.m.visibleRange.from);\n\n      for (var s = this.m.visibleRange.from; s < this.m.visibleRange.to; s++) {\n        var h,\n            r = this.m.items[s],\n            u = Math.round(r.x * t),\n            e = void 0,\n            o = void 0;\n        if (n % 2) e = u - (h = (n - 1) / 2), o = u + h;else e = u - (h = n / 2), o = u + h - 1;\n        this.zt[s - this.m.visibleRange.from] = {\n          left: e,\n          right: o,\n          roundedCenter: u,\n          center: r.x * t,\n          time: r.time\n        };\n      }\n\n      for (s = this.m.visibleRange.from + 1; s < this.m.visibleRange.to; s++) {\n        var f = this.zt[s - this.m.visibleRange.from],\n            a = this.zt[s - this.m.visibleRange.from - 1];\n        f.time === a.time + 1 && f.left - a.right !== i + 1 && (a.roundedCenter > a.center ? a.right = f.left - i - 1 : f.left = a.right + i + 1);\n      }\n\n      var c = Math.ceil(this.m.barSpacing * t);\n\n      for (s = this.m.visibleRange.from; s < this.m.visibleRange.to; s++) {\n        (f = this.zt[s - this.m.visibleRange.from]).right < f.left && (f.right = f.left);\n        var l = f.right - f.left + 1;\n        c = Math.min(l, c);\n      }\n\n      if (i > 0 && c < 4) for (s = this.m.visibleRange.from; s < this.m.visibleRange.to; s++) {\n        (l = (f = this.zt[s - this.m.visibleRange.from]).right - f.left + 1) > c && (f.roundedCenter > f.center ? f.right -= 1 : f.left += 1);\n      }\n    } else this.zt = [];\n  }, t;\n}();\n\nfunction Ut(t) {\n  return {\n    items: [],\n    barSpacing: t,\n    histogramBase: NaN,\n    visibleRange: null\n  };\n}\n\nvar qt,\n    jt = function (t) {\n  function i(i, n) {\n    var s = t.call(this, i, n, !1) || this;\n    return s.i = new k(), s.Ft = Ut(0), s.Pt = new Int32Array(0), s.g = new Wt(), s;\n  }\n\n  return u(i, t), i.prototype.renderer = function (t, i) {\n    return this._makeValid(), this.i;\n  }, i.prototype._fillRawPoints = function () {\n    var t = this,\n        i = this._model.timeScale().barSpacing(),\n        n = this._series.palette();\n\n    this.Ft = Ut(i);\n\n    var s = this._series.barFunction();\n\n    this.Pt = new Int32Array(this._series.bars().size());\n\n    var h = 0,\n        r = 0,\n        u = 0,\n        e = this._series.options().color;\n\n    this._series.bars().each(function (i, o) {\n      var f = s(o.value),\n          a = o.value[4],\n          c = function (t, i, n) {\n        return {\n          time: t,\n          price: i,\n          x: NaN,\n          y: NaN,\n          color: n\n        };\n      }(i, f, null != a ? n.colorByIndex(a) : e),\n          l = null == a ? 0 : a + 1;\n\n      return ++r < t.Ft.items.length ? t.Ft.items[r] = c : t.Ft.items.push(c), t._items[u++] = {\n        time: i,\n        x: 0\n      }, t.Pt[h++] = l, !1;\n    }), this.g.setData(this.Ft), this.i.setRenderers([this.g]);\n  }, i.prototype._clearVisibleRange = function () {\n    t.prototype._clearVisibleRange.call(this), this.Ft.visibleRange = null;\n  }, i.prototype._convertToCoordinates = function (t, i, n) {\n    if (null !== this._itemsVisibleRange) {\n      var s = i.barSpacing(),\n          h = c(i.visibleBars()),\n          r = t.priceToCoordinate(this._series.options().base, n);\n      i.indexesToCoordinates(this.Ft.items), t.pointsArrayToCoordinates(this.Ft.items, n), this.Ft.histogramBase = r, this.Ft.visibleRange = Lt(this.Ft.items, h, !1), this.Ft.barSpacing = s, this.g.setData(this.Ft);\n    }\n  }, i;\n}(At),\n    Ht = function (t) {\n  function i(i, n) {\n    var s = t.call(this, i, n) || this;\n    return s.Dt = new xt(), s;\n  }\n\n  return u(i, t), i.prototype.renderer = function (t, i) {\n    this._makeValid();\n\n    var n = this._series.options(),\n        s = {\n      items: this._items,\n      lineColor: n.color,\n      lineStyle: n.lineStyle,\n      lineType: n.lineType,\n      lineWidth: n.lineWidth,\n      visibleRange: this._itemsVisibleRange\n    };\n\n    return this.Dt.setData(s), this.Dt;\n  }, i.prototype._createRawItem = function (t, i) {\n    return this._createRawItemBase(t, i);\n  }, i;\n}(Bt),\n    Yt = /[2-9]/g,\n    Kt = function () {\n  function t(t) {\n    void 0 === t && (t = 50), this.It = 0, this.Ot = 1, this.Rt = 1, this.Wt = {}, this.Ut = {}, this.qt = t;\n  }\n\n  return t.prototype.reset = function () {\n    this.It = 0, this.Ut = {}, this.Ot = 1, this.Rt = 1, this.Wt = {};\n  }, t.prototype.measureText = function (t, i, n) {\n    var s = n || Yt,\n        h = String(i).replace(s, \"0\");\n    if (this.Ut[h]) return this.Ut[h].width;\n\n    if (this.It === this.qt) {\n      var r = this.Wt[this.Rt];\n      delete this.Wt[this.Rt], delete this.Ut[r], this.Rt++, this.It--;\n    }\n\n    var u = t.measureText(h).width;\n    return 0 === u && i.length ? 0 : (this.Ut[h] = {\n      width: u,\n      tick: this.Ot\n    }, this.Wt[this.Ot] = h, this.It++, this.Ot++, u);\n  }, t;\n}(),\n    $t = function () {\n  function t(t) {\n    this.jt = null, this.Ht = null, this.Yt = \"right\", this.Kt = 0, this.$t = t;\n  }\n\n  return t.prototype.setParams = function (t, i, n, s) {\n    this.jt = t, this.Ht = i, this.Kt = n, this.Yt = s;\n  }, t.prototype.draw = function (t, i) {\n    null !== this.Ht && null !== this.jt && this.jt.draw(t, this.Ht, this.$t, this.Kt, this.Yt, i);\n  }, t;\n}(),\n    _t = function () {\n  function t(t, i, n) {\n    this._t = t, this.$t = new Kt(50), this.Xt = i, this.l = n, this.Zt = -1, this.g = new $t(this.$t);\n  }\n\n  return t.prototype.update = function () {\n    this._t.update();\n  }, t.prototype.renderer = function (t, i) {\n    var n = this.l.paneForSource(this.Xt);\n    if (null === n) return null;\n    if (null === this.Xt.priceScale()) return null;\n    var s = n.priceScalePosition();\n    if (\"overlay\" === s) return null;\n    var h = this.l.priceAxisRendererOptions();\n    return h.fontSize !== this.Zt && (this.Zt = h.fontSize, this.$t.reset()), this.g.setParams(this._t.paneRenderer(), h, i, s), this.g;\n  }, t;\n}(),\n    Xt = function () {\n  function t() {\n    this.m = null;\n  }\n\n  return t.prototype.setData = function (t) {\n    this.m = t;\n  }, t.prototype.draw = function (t, i, n, r) {\n    if (null !== this.m && !1 !== this.m.visible) {\n      var u = Math.round(this.m.y * i);\n\n      if (!(u < 0 || u > Math.ceil(this.m.height * i))) {\n        var e = Math.ceil(this.m.width * i);\n        t.lineCap = \"butt\", t.strokeStyle = this.m.color, t.lineWidth = Math.floor(this.m.lineWidth * i), s(t, this.m.lineStyle), h(t, u, 0, e);\n      }\n    }\n  }, t;\n}(),\n    Zt = function () {\n  function t(t) {\n    this._lineRendererData = {\n      width: 0,\n      height: 0,\n      y: 0,\n      color: \"rgba(0, 0, 0, 0)\",\n      lineWidth: 1,\n      lineStyle: 0,\n      visible: !1\n    }, this._lineRenderer = new Xt(), this.o = !0, this._series = t, this._model = t.model(), this._lineRenderer.setData(this._lineRendererData);\n  }\n\n  return t.prototype.update = function () {\n    this.o = !0;\n  }, t.prototype.renderer = function (t, i) {\n    return this.o && (this._updateImpl(t, i), this.o = !1), this._lineRenderer;\n  }, t;\n}(),\n    Jt = function (t) {\n  function i(i) {\n    return t.call(this, i) || this;\n  }\n\n  return u(i, t), i.prototype._updateImpl = function (t, i) {\n    this._lineRendererData.visible = !1;\n\n    var n = this._series.priceScale(),\n        s = n.mode().mode;\n\n    if (2 === s || 3 === s) {\n      var h = this._series.options();\n\n      if (h.baseLineVisible) {\n        var r = this._series.firstValue();\n\n        null !== r && (this._lineRendererData.visible = !0, this._lineRendererData.y = n.priceToCoordinate(r.value, r.value), this._lineRendererData.width = i, this._lineRendererData.height = t, this._lineRendererData.color = h.baseLineColor, this._lineRendererData.lineWidth = h.baseLineWidth, this._lineRendererData.lineStyle = h.baseLineStyle);\n      }\n    }\n  }, i;\n}(Zt);\n\nfunction Gt(t, i) {\n  return lt(Math.min(Math.max(t, 12), 30) * i);\n}\n\nfunction Qt(t, i) {\n  switch (t) {\n    case \"arrowDown\":\n    case \"arrowUp\":\n      return Gt(i, 1);\n\n    case \"circle\":\n      return Gt(i, .8);\n\n    case \"square\":\n      return Gt(i, .7);\n  }\n}\n\nfunction ti(t) {\n  return ct(Gt(t, 1));\n}\n\nfunction ii(t) {\n  return Math.max(Gt(t, .1), 3);\n}\n\nfunction ni(t, i, n, s, h) {\n  var r = Qt(\"square\", n),\n      u = (r - 1) / 2,\n      e = t - u,\n      o = i - u;\n  return s >= e && s <= e + r && h >= o && h <= o + r;\n}\n\nfunction si(t, i, n, s, h, r) {\n  var u = (Qt(\"arrowUp\", r) - 1) / 2,\n      e = (lt(r / 2) - 1) / 2;\n  i.fillStyle = h, i.beginPath(), t ? (i.moveTo(n - u, s), i.lineTo(n, s - u), i.lineTo(n + u, s), i.lineTo(n + e, s), i.lineTo(n + e, s + u), i.lineTo(n - e, s + u), i.lineTo(n - e, s)) : (i.moveTo(n - u, s), i.lineTo(n, s + u), i.lineTo(n + u, s), i.lineTo(n + e, s), i.lineTo(n + e, s - u), i.lineTo(n - e, s - u), i.lineTo(n - e, s)), i.fill();\n}\n\nfunction hi(t, i, n, s, h, r) {\n  return ni(i, n, s, h, r);\n}\n\n!function (t) {\n  t[t.MinShapeSize = 12] = \"MinShapeSize\", t[t.MaxShapeSize = 30] = \"MaxShapeSize\", t[t.MinShapeMargin = 3] = \"MinShapeMargin\";\n}(qt || (qt = {}));\n\nvar ri = function (t) {\n  function i() {\n    var i = null !== t && t.apply(this, arguments) || this;\n    return i.m = null, i;\n  }\n\n  return u(i, t), i.prototype.setData = function (t) {\n    this.m = t;\n  }, i.prototype.hitTest = function (t, i) {\n    if (null === this.m || null === this.m.visibleRange) return null;\n\n    for (var n = this.m.visibleRange.from; n < this.m.visibleRange.to; n++) {\n      var s = this.m.items[n];\n      if (ei(s, t, i)) return {\n        hitTestData: s.internalId,\n        externalId: s.externalId\n      };\n    }\n\n    return null;\n  }, i.prototype._drawImpl = function (t, i, n) {\n    if (null !== this.m && null !== this.m.visibleRange) for (var s = this.m.visibleRange.from; s < this.m.visibleRange.to; s++) {\n      ui(this.m.items[s], t);\n    }\n  }, i;\n}(N);\n\nfunction ui(t, i) {\n  switch (t.shape) {\n    case \"arrowDown\":\n      return void si(!1, i, t.x, t.y, t.color, t.size);\n\n    case \"arrowUp\":\n      return void si(!0, i, t.x, t.y, t.color, t.size);\n\n    case \"circle\":\n      return void function (t, i, n, s, h) {\n        var r = (Qt(\"circle\", h) - 1) / 2;\n        t.fillStyle = s, t.beginPath(), t.arc(i, n, r, 0, 2 * Math.PI, !1), t.fill();\n      }(i, t.x, t.y, t.color, t.size);\n\n    case \"square\":\n      return void function (t, i, n, s, h) {\n        var r = Qt(\"square\", h),\n            u = (r - 1) / 2,\n            e = i - u,\n            o = n - u;\n        t.fillStyle = s, t.fillRect(e, o, r, r);\n      }(i, t.x, t.y, t.color, t.size);\n  }\n\n  t.shape;\n}\n\nfunction ei(t, i, n) {\n  switch (t.shape) {\n    case \"arrowDown\":\n    case \"arrowUp\":\n      return hi(0, t.x, t.y, t.size, i, n);\n\n    case \"circle\":\n      return function (t, i, n, s, h) {\n        var r = 2 + Qt(\"circle\", n) / 2,\n            u = t - s,\n            e = i - h;\n        return Math.sqrt(u * u + e * e) <= r;\n      }(t.x, t.y, t.size, i, n);\n\n    case \"square\":\n      return ni(t.x, t.y, t.size, i, n);\n  }\n\n  t.shape;\n}\n\nfunction oi(t, i, n, s, h, r, u, e) {\n  var o = d(n) ? n : n.close,\n      f = d(n) ? n : n.high,\n      a = d(n) ? n : n.low,\n      c = ti(u.barSpacing());\n\n  switch (t.size = c, i.position) {\n    case \"inBar\":\n      return void (t.y = r.priceToCoordinate(o, e));\n\n    case \"aboveBar\":\n      return t.y = r.priceToCoordinate(f, e) - c / 2 - s.aboveBar, void (s.aboveBar += c + h);\n\n    case \"belowBar\":\n      return t.y = r.priceToCoordinate(a, e) + c / 2 + s.belowBar, void (s.belowBar += c + h);\n  }\n\n  i.position;\n}\n\nvar fi,\n    ai = function () {\n  function t(t, i) {\n    this.o = !0, this.Jt = !0, this.Gt = !0, this.Qt = null, this.g = new ri(), this.ti = t, this.F = i, this.m = {\n      items: [],\n      visibleRange: null\n    };\n  }\n\n  return t.prototype.update = function (t) {\n    this.o = !0, this.Gt = !0, \"data\" === t && (this.Jt = !0);\n  }, t.prototype.renderer = function (t, i, n) {\n    return this.o && this._makeValid(), this.g.setData(this.m), this.g;\n  }, t.prototype.autoScaleMargins = function () {\n    if (this.Gt) {\n      if (this.ti.indexedMarkers().length > 0) {\n        var t = this.F.timeScale().barSpacing(),\n            i = ii(t),\n            n = 1.5 * ti(t) + 2 * i;\n        this.Qt = {\n          above: n,\n          below: n\n        };\n      } else this.Qt = null;\n\n      this.Gt = !1;\n    }\n\n    return this.Qt;\n  }, t.prototype._makeValid = function () {\n    var t = this.ti.priceScale(),\n        i = this.F.timeScale(),\n        n = this.ti.indexedMarkers();\n    this.Jt && (this.m.items = n.map(function (t) {\n      return {\n        time: t.time,\n        x: 0,\n        y: 0,\n        size: 0,\n        shape: t.shape,\n        color: t.color,\n        internalId: t.internalId,\n        externalId: t.id\n      };\n    }), this.Jt = !1), this.m.visibleRange = null;\n    var s = i.visibleBars();\n\n    if (null !== s) {\n      var h = this.ti.firstValue();\n\n      if (null !== h && 0 !== this.m.items.length) {\n        var r = NaN,\n            u = ii(i.barSpacing()),\n            e = {\n          aboveBar: u,\n          belowBar: u\n        };\n        this.m.visibleRange = Lt(this.m.items, s, !0);\n\n        for (var o = this.m.visibleRange.from; o < this.m.visibleRange.to; o++) {\n          var f = n[o];\n          f.time !== r && (e.aboveBar = u, e.belowBar = u, r = f.time);\n          var a = this.m.items[o];\n          a.x = i.indexToCoordinate(f.time);\n          var c = this.ti.dataAt(f.time);\n          null !== c && oi(a, f, c, e, u, t, i, h.value);\n        }\n\n        this.o = !1;\n      }\n    }\n  }, t;\n}(),\n    ci = function (t) {\n  function i(i) {\n    return t.call(this, i) || this;\n  }\n\n  return u(i, t), i.prototype._updateImpl = function (t, i) {\n    var n = this._lineRendererData;\n    n.visible = !1;\n\n    var s = this._series.options();\n\n    if (s.priceLineVisible) {\n      var h = this._series.lastValueData(void 0, 0 === s.priceLineSource);\n\n      h.noData || (n.visible = !0, n.y = h.coordinate, n.color = this._series.priceLineColor(h.color), n.width = i, n.height = t, n.lineWidth = s.priceLineWidth, n.lineStyle = s.priceLineStyle);\n    }\n  }, i;\n}(Zt),\n    li = function (t) {\n  function i(i, n) {\n    var s = t.call(this) || this;\n    return s.k = i, s.m = n, s;\n  }\n\n  return u(i, t), i.prototype._getSource = function () {\n    return this.k;\n  }, i.prototype._getData = function () {\n    return this.m;\n  }, i.prototype._updateRendererData = function (t, i, n) {\n    t.visible = !1, i.visible = !1;\n    var s = this.k.options(),\n        h = s.lastValueVisible,\n        r = \"\" !== this.k.title(),\n        u = 0 === s.seriesLastValueMode,\n        e = this.k.lastValueData(void 0, !1);\n    e.noData || (h && (t.text = this._axisText(e, h, u), t.visible = 0 !== t.text.length), (r || u) && (i.text = this._paneText(e, h, r, u), i.visible = i.text.length > 0), n.background = this.k.priceLineColor(e.color), n.color = W(n.background), n.coordinate = e.coordinate, i.borderColor = this.k.model().options().layout.backgroundColor, t.borderColor = n.background);\n  }, i.prototype._paneText = function (t, i, n, s) {\n    var h = \"\",\n        r = this.k.title();\n    return n && 0 !== r.length && (h += r + \" \"), i && s && (h += this.k.priceScale().isPercentage() ? t.formattedPriceAbsolute : t.formattedPricePercentage), h.trim();\n  }, i.prototype._axisText = function (t, i, n) {\n    return i ? n ? this.k.priceScale().isPercentage() ? t.formattedPricePercentage : t.formattedPriceAbsolute : t.text : \"\";\n  }, i;\n}(K),\n    vi = function (t) {\n  function i(i, n) {\n    var s = t.call(this, i) || this;\n    return s.ii = n, s;\n  }\n\n  return u(i, t), i.prototype._updateImpl = function (t, i) {\n    var n = this._lineRendererData;\n    n.visible = !1;\n    var s = this.ii.yCoord();\n\n    if (null !== s) {\n      var h = this.ii.options();\n      n.visible = !0, n.y = s, n.color = h.color, n.width = i, n.height = t, n.lineWidth = h.lineWidth, n.lineStyle = h.lineStyle;\n    }\n  }, i;\n}(Zt),\n    di = function (t) {\n  function i(i, n) {\n    var s = t.call(this) || this;\n    return s.ti = i, s.ii = n, s;\n  }\n\n  return u(i, t), i.prototype._updateRendererData = function (t, i, n) {\n    t.visible = !1, i.visible = !1;\n    var s = this.ii.options();\n\n    if (s.axisLabelVisible) {\n      var h = this.ii.yCoord();\n      null !== h && (t.text = this.ti.priceScale().formatPriceAbsolute(s.price), t.visible = !0, n.background = s.color, n.color = W(s.color), n.coordinate = h);\n    }\n  }, i;\n}(K),\n    Mi = function () {\n  function t(t, i) {\n    this.ti = t, this.$ = i, this.ni = new vi(t, this), this._t = new di(t, this);\n  }\n\n  return t.prototype.applyOptions = function (t) {\n    v(this.$, t), this.update(), this.ti.model().lightUpdate();\n  }, t.prototype.options = function () {\n    return this.$;\n  }, t.prototype.paneView = function () {\n    return this.ni;\n  }, t.prototype.priceAxisView = function () {\n    return this._t;\n  }, t.prototype.update = function () {\n    this.ni.update(), this._t.update();\n  }, t.prototype.yCoord = function () {\n    var t = this.ti,\n        i = t.priceScale();\n    if (t.model().timeScale().isEmpty() || i.isEmpty()) return null;\n    var n = t.firstValue();\n    return null === n ? null : i.priceToCoordinate(this.$.price, n.value);\n  }, t;\n}(),\n    wi = function () {\n  function t() {\n    this.si = 0, this.hi = new Map(), this.ri = new Map();\n  }\n\n  return t.prototype.colorByIndex = function (t) {\n    return a(this.ri.get(t));\n  }, t.prototype.addColor = function (t) {\n    var i = this.hi.get(t);\n    return void 0 === i && (i = this.si++, this.hi.set(t, i), this.ri.set(i, t)), i;\n  }, t.prototype.clear = function () {\n    this.si = 0, this.hi.clear(), this.ri.clear();\n  }, t.prototype.size = function () {\n    return this.ri.size;\n  }, t;\n}(),\n    bi = {\n  barColor: \"\",\n  barBorderColor: \"\",\n  barWickColor: \"\"\n},\n    mi = function () {\n  function t(t) {\n    this.ti = t;\n  }\n\n  return t.prototype.barStyle = function (t, i) {\n    var n = this.ti.seriesType(),\n        s = this.ti.options();\n\n    switch (n) {\n      case \"Line\":\n        return this.ui(s);\n\n      case \"Area\":\n        return this.ei(s);\n\n      case \"Bar\":\n        return this.oi(s, t, i);\n\n      case \"Candlestick\":\n        return this.fi(s, t, i);\n\n      case \"Histogram\":\n        return this.ai(s, t, i);\n    }\n\n    throw new Error(\"Unknown chart style\");\n  }, t.prototype.oi = function (t, i, n) {\n    var s = _e({}, bi),\n        h = t.upColor,\n        r = t.downColor,\n        u = h,\n        o = r,\n        f = c(this.ci(i, n)),\n        a = l(f.value[0]) <= l(f.value[3]);\n\n    return s.barColor = a ? h : r, s.barBorderColor = a ? u : o, s;\n  }, t.prototype.fi = function (t, i, n) {\n    var s = _e({}, bi),\n        h = t.upColor,\n        r = t.downColor,\n        u = t.borderUpColor,\n        o = t.borderDownColor,\n        f = t.wickUpColor,\n        a = t.wickDownColor,\n        v = c(this.ci(i, n)),\n        d = l(v.value[0]) <= l(v.value[3]);\n\n    return s.barColor = d ? h : r, s.barBorderColor = d ? u : o, s.barWickColor = d ? f : a, s;\n  }, t.prototype.ei = function (t) {\n    return _e(_e({}, bi), {\n      barColor: t.lineColor\n    });\n  }, t.prototype.ui = function (t) {\n    return _e(_e({}, bi), {\n      barColor: t.color\n    });\n  }, t.prototype.ai = function (t, i, n) {\n    var s = _e({}, bi),\n        h = c(this.ci(i, n)).value[4];\n\n    if (null != h) {\n      var r = c(this.ti.palette());\n      s.barColor = r.colorByIndex(h);\n    } else s.barColor = t.color;\n\n    return s;\n  }, t.prototype.li = function () {\n    return this.ti.bars();\n  }, t.prototype.ci = function (t, i) {\n    return void 0 !== i ? i.value : this.li().valueAt(t);\n  }, t;\n}();\n\n!function (t) {\n  t[t.NearestLeft = -1] = \"NearestLeft\", t[t.Exact = 0] = \"Exact\", t[t.NearestRight = 1] = \"NearestRight\";\n}(fi || (fi = {}));\n\nvar pi,\n    gi = function () {\n  function t(t, i) {\n    void 0 === t && (t = null), void 0 === i && (i = null), this.vi = [], this.di = 0, this.Mi = 0, this.wi = !1, this.bi = new Map(), this.mi = new Map(), this.pi = new Map(), this.gi = t || new Map(), this.yi = i;\n  }\n\n  return t.prototype.clear = function () {\n    this.vi = [], this.di = 0, this.Mi = 0, this.wi = !1, this.bi.clear(), this.mi.clear(), this.pi.clear();\n  }, t.prototype.first = function () {\n    return this.size() > 0 ? this.vi[this.di] : null;\n  }, t.prototype.last = function () {\n    return this.size() > 0 ? this.vi[this.Mi - 1] : null;\n  }, t.prototype.firstIndex = function () {\n    return this.size() > 0 ? this.ki(this.di) : null;\n  }, t.prototype.lastIndex = function () {\n    return this.size() > 0 ? this.ki(this.Mi - 1) : null;\n  }, t.prototype.size = function () {\n    return this.Mi - this.di;\n  }, t.prototype.isEmpty = function () {\n    return 0 === this.size();\n  }, t.prototype.contains = function (t) {\n    return null !== this.Ni(t, 0);\n  }, t.prototype.valueAt = function (t) {\n    return this.search(t);\n  }, t.prototype.add = function (t, i, n) {\n    if (this.wi) return !1;\n    var s = {\n      index: t,\n      value: n,\n      time: i\n    },\n        h = this.Ni(t, 0);\n    return this.mi.clear(), this.pi.clear(), null === h ? (this.vi.splice(this.Si(t), 0, s), this.di = 0, this.Mi = this.vi.length, !0) : (this.vi[h] = s, !1);\n  }, t.prototype.search = function (t, i, n) {\n    void 0 === i && (i = 0);\n    var s = this.Ni(t, i, n);\n    if (null === s) return null;\n    var h = this.xi(s);\n    return {\n      index: this.ki(s),\n      time: h.time,\n      value: h.value\n    };\n  }, t.prototype.each = function (t) {\n    for (var i = this.di; i < this.Mi; ++i) {\n      if (t(this.ki(i), this.xi(i))) break;\n    }\n  }, t.prototype.range = function (i, n) {\n    var s = new t(this.gi, this.yi);\n    return s.vi = this.vi, s.di = this.Si(i), s.Mi = this.Di(n), s.wi = !0, s;\n  }, t.prototype.minMaxOnRangeCached = function (t, i, n) {\n    if (this.isEmpty()) return null;\n\n    for (var s = null, h = 0, r = n; h < r.length; h++) {\n      var u = r[h];\n      s = yi(s, this.Ci(t, i, u));\n    }\n\n    return s;\n  }, t.prototype.merge = function (t) {\n    return this.wi ? null : 0 === t.length ? null : this.isEmpty() || t[t.length - 1].index < this.vi[0].index ? this.Ti(t) : t[0].index > this.vi[this.vi.length - 1].index ? this.Ei(t) : 1 === t.length && t[0].index === this.vi[this.vi.length - 1].index ? (this.Li(t[0]), t[0]) : this.Ai(t);\n  }, t.prototype.remove = function (t) {\n    if (this.wi) return null;\n    var i = this.Ni(t, 1);\n    if (null === i) return null;\n    var n = this.vi.splice(i);\n    return this.Mi = this.vi.length, this.bi.clear(), this.mi.clear(), this.pi.clear(), n.length > 0 ? n[0] : null;\n  }, t.prototype.ki = function (t) {\n    return this.vi[t].index;\n  }, t.prototype.xi = function (t) {\n    return this.vi[t];\n  }, t.prototype.Ni = function (t, i, n) {\n    var s = this.Bi(t);\n    if (null === s && 0 !== i) switch (i) {\n      case -1:\n        return this.zi(t, n);\n\n      case 1:\n        return this.Vi(t, n);\n\n      default:\n        throw new TypeError(\"Unknown search mode\");\n    }\n    if (!n || null === s || 0 === i) return s;\n\n    switch (i) {\n      case -1:\n        return this.Fi(s);\n\n      case 1:\n        return this.Pi(s);\n\n      default:\n        throw new TypeError(\"Unknown search mode\");\n    }\n  }, t.prototype.Pi = function (t) {\n    for (var i = c(this.yi); t < this.Mi && i(this.xi(t).value);) {\n      t += 1;\n    }\n\n    return t === this.Mi ? null : t;\n  }, t.prototype.Fi = function (t) {\n    for (var i = c(this.yi); t >= this.di && i(this.xi(t).value);) {\n      t -= 1;\n    }\n\n    return t < this.di ? null : t;\n  }, t.prototype.zi = function (t, i) {\n    var n = this.Si(t);\n    n > this.di && (n -= 1);\n    var s = n !== this.Mi && this.ki(n) < t ? n : null;\n    return i && null !== s ? this.Fi(s) : s;\n  }, t.prototype.Vi = function (t, i) {\n    var n = this.Di(t),\n        s = n !== this.Mi && t < this.ki(n) ? n : null;\n    return i && null !== s ? this.Pi(s) : s;\n  }, t.prototype.Bi = function (t) {\n    var i = this.Si(t);\n    return i === this.Mi || t < this.vi[i].index ? null : i;\n  }, t.prototype.Si = function (t) {\n    return Dt(this.vi, t, function (t, i) {\n      return t.index < i;\n    }, this.di, this.Mi);\n  }, t.prototype.Di = function (t) {\n    return Ct(this.vi, t, function (t, i) {\n      return i.index > t;\n    }, this.di, this.Mi);\n  }, t.prototype.Ii = function (t, i, n) {\n    var s = null,\n        h = this.gi.get(n.name);\n    if (void 0 === h) throw new Error('Plot \"' + n.name + '\" is not registered');\n\n    for (var r = t; r < i; r++) {\n      var u = h(this.vi[r].value);\n      null == u || Number.isNaN(u) || (null === s ? s = {\n        min: u,\n        max: u\n      } : (u < s.min && (s.min = u), u > s.max && (s.max = u)));\n    }\n\n    return s;\n  }, t.prototype.Oi = function (t) {\n    var i = Math.floor(t.index / 30);\n    this.bi.forEach(function (t) {\n      return t[\"delete\"](i);\n    });\n  }, t.prototype.Ti = function (t) {\n    return f(!this.wi, \"collection should not be readonly\"), f(0 !== t.length, \"plotRows should not be empty\"), this.mi.clear(), this.pi.clear(), this.bi.clear(), this.vi = t.concat(this.vi), this.di = 0, this.Mi = this.vi.length, t[0];\n  }, t.prototype.Ei = function (t) {\n    return f(!this.wi, \"collection should not be readonly\"), f(0 !== t.length, \"plotRows should not be empty\"), this.mi.clear(), this.pi.clear(), this.bi.clear(), this.vi = this.vi.concat(t), this.di = 0, this.Mi = this.vi.length, t[0];\n  }, t.prototype.Li = function (t) {\n    f(!this.isEmpty(), \"plot list should not be empty\"), f(this.vi[this.Mi - 1].index === t.index, \"last row index should match new row index\"), this.Oi(t), this.mi[\"delete\"](t.index), this.pi[\"delete\"](t.index), this.vi[this.Mi - 1] = t;\n  }, t.prototype.Ai = function (t) {\n    return f(0 !== t.length, \"plot rows should not be empty\"), this.mi.clear(), this.pi.clear(), this.bi.clear(), this.vi = function (t, i) {\n      var n = function (t, i) {\n        var n = t.length,\n            s = i.length,\n            h = n + s,\n            r = 0,\n            u = 0;\n\n        for (; r < n && u < s;) {\n          t[r].index < i[u].index ? r++ : t[r].index > i[u].index ? u++ : (r++, u++, h--);\n        }\n\n        return h;\n      }(t, i),\n          s = new Array(n),\n          h = 0,\n          r = 0,\n          u = t.length,\n          e = i.length,\n          o = 0;\n\n      for (; h < u && r < e;) {\n        t[h].index < i[r].index ? (s[o] = t[h], h++) : t[h].index > i[r].index ? (s[o] = i[r], r++) : (s[o] = i[r], h++, r++), o++;\n      }\n\n      for (; h < u;) {\n        s[o] = t[h], h++, o++;\n      }\n\n      for (; r < e;) {\n        s[o] = i[r], r++, o++;\n      }\n\n      return s;\n    }(this.vi, t), this.di = 0, this.Mi = this.vi.length, t[0];\n  }, t.prototype.Ci = function (t, i, n) {\n    if (this.isEmpty()) return null;\n    var s = null,\n        h = c(this.firstIndex()),\n        r = c(this.lastIndex()),\n        u = t - n.offset,\n        e = i - n.offset;\n    u = Math.max(u, h), e = Math.min(e, r);\n    var o = 30 * Math.ceil(u / 30),\n        f = Math.max(o, 30 * Math.floor(e / 30)),\n        a = this.Si(u),\n        l = this.Di(Math.min(e, o, i));\n    s = yi(s, this.Ii(a, l, n));\n    var v = this.bi.get(n.name);\n    void 0 === v && (v = new Map(), this.bi.set(n.name, v));\n\n    for (var d = Math.max(o + 1, u); d < f; d += 30) {\n      var M = Math.floor(d / 30),\n          w = v.get(M);\n\n      if (void 0 === w) {\n        var b = this.Si(30 * M),\n            m = this.Di(30 * (M + 1) - 1);\n        w = this.Ii(b, m, n), v.set(M, w);\n      }\n\n      s = yi(s, w);\n    }\n\n    a = this.Si(f), l = this.Di(e);\n    return s = yi(s, this.Ii(a, l, n));\n  }, t;\n}();\n\nfunction yi(t, i) {\n  return null === t ? i : null === i ? t : {\n    min: Math.min(t.min, i.min),\n    max: Math.max(t.max, i.max)\n  };\n}\n\n!function (t) {\n  t[t.Open = 0] = \"Open\", t[t.High = 1] = \"High\", t[t.Low = 2] = \"Low\", t[t.Close = 3] = \"Close\", t[t.Color = 4] = \"Color\";\n}(pi || (pi = {}));\nvar ki = {\n  open: function open(t) {\n    return t[0];\n  },\n  high: function high(t) {\n    return t[1];\n  },\n  low: function low(t) {\n    return t[2];\n  },\n  close: function close(t) {\n    return t[3];\n  },\n  hl2: function hl2(t) {\n    return (t[1] + t[2]) / 2;\n  },\n  hlc3: function hlc3(t) {\n    return (t[1] + t[2] + t[3]) / 3;\n  },\n  ohlc4: function ohlc4(t) {\n    return (t[0] + t[1] + t[2] + t[3]) / 4;\n  }\n},\n    Ni = [\"open\", \"high\", \"low\", \"close\", \"hl2\", \"hlc3\", \"ohlc4\"];\n\nfunction Si(t) {\n  return ki[t];\n}\n\nvar xi,\n    Di = function () {\n  function t() {\n    var t;\n    this.Ri = new gi((t = new Map(), Ni.forEach(function (i, n) {\n      t.set(i, Si(i));\n    }), t));\n  }\n\n  return t.prototype.bars = function () {\n    return this.Ri;\n  }, t.prototype.size = function () {\n    return this.Ri.size();\n  }, t.prototype.each = function (t) {\n    this.Ri.each(t);\n  }, t.prototype.clear = function () {\n    this.Ri.clear();\n  }, t.prototype.isEmpty = function () {\n    return this.Ri.isEmpty();\n  }, t.prototype.first = function () {\n    return this.Ri.first();\n  }, t.prototype.last = function () {\n    return this.Ri.last();\n  }, t.prototype.search = function (t, i) {\n    return this.bars().search(t, i);\n  }, t.prototype.valueAt = function (t) {\n    return this.search(t);\n  }, t;\n}(),\n    Ci = function (t) {\n  function i(i, n, s) {\n    var h = t.call(this, i) || this;\n    h.m = new Di(), h.ni = new ci(h), h.Wi = [], h.Ui = new Jt(h), h.qi = !1, h.ji = null, h.Hi = new wi(), h.Yi = [], h.Ki = [], h.$ = n, h.$i = s;\n    var r = new li(h, {\n      model: i\n    });\n    return h.U = [r], h._i = new _t(r, h, i), h.Xi(), h.Zi(), h.Ji = h.barFunction(), h.Gi(), h;\n  }\n\n  return u(i, t), i.prototype.destroy = function () {}, i.prototype.endOfData = function () {\n    return this.qi;\n  }, i.prototype.priceLineColor = function (t) {\n    return this.$.priceLineColor || t;\n  }, i.prototype.lastValueData = function (t, i, n) {\n    var s = {\n      noData: !0\n    },\n        h = this.priceScale();\n    if (this.model().timeScale().isEmpty() || h.isEmpty() || this.data().isEmpty()) return s;\n    var r,\n        u,\n        e = this.model().timeScale().visibleBars(),\n        o = this.firstValue();\n    if (null === e || null === o) return s;\n\n    if (i) {\n      var f = this.data().bars().last();\n      if (null === f) return s;\n      r = f, u = f.index;\n    } else {\n      var a = this.data().bars().search(e.lastBar(), -1);\n      if (null === a) return s;\n      if (null === (r = this.data().bars().valueAt(a.index))) return s;\n      u = a.index;\n    }\n\n    var c = void 0 !== t ? r.value[t] : this.Ji(r.value),\n        l = this.barColorer().barStyle(u, {\n      value: r\n    }),\n        v = h.priceToCoordinate(c, o.value);\n    return {\n      noData: !1,\n      price: n ? c : void 0,\n      text: h.formatPrice(c, o.value),\n      formattedPriceAbsolute: h.formatPriceAbsolute(c),\n      formattedPricePercentage: h.formatPricePercentage(c, o.value),\n      color: l.barColor,\n      coordinate: v,\n      index: u\n    };\n  }, i.prototype.data = function () {\n    return this.m;\n  }, i.prototype.barColorer = function () {\n    return null !== this.ji ? this.ji : (this.ji = new mi(this), this.ji);\n  }, i.prototype.options = function () {\n    return this.$;\n  }, i.prototype.applyOptions = function (t) {\n    var i = this.$.overlay;\n    v(this.$, t), this.$.overlay = i, i && null !== this._priceScale && void 0 !== t.scaleMargins && this._priceScale.applyOptions({\n      scaleMargins: this.$.scaleMargins\n    }), void 0 !== t.priceFormat && this.Xi(), this.model().updateSource(this);\n  }, i.prototype.clearData = function () {\n    this.m.clear(), this.Hi.clear(), this.Gi();\n  }, i.prototype.updateData = function (t, i) {\n    void 0 === i && (i = !1), i && this.m.clear(), this.m.bars().merge(t), this.Qi(), this.J.update(\"data\"), this._.update(\"data\");\n    var n = this.model().paneForSource(this);\n    this.model().recalculatePane(n), this.model().updateSource(this), this.model().updateCrosshair(), this.model().lightUpdate();\n  }, i.prototype.setMarkers = function (t) {\n    this.Yi = t.map(function (t) {\n      return _e({}, t);\n    }), this.Qi();\n    var i = this.model().paneForSource(this);\n    this._.update(\"data\"), this.model().recalculatePane(i), this.model().updateSource(this), this.model().updateCrosshair(), this.model().lightUpdate();\n  }, i.prototype.markers = function () {\n    return this.Yi;\n  }, i.prototype.indexedMarkers = function () {\n    return this.Ki;\n  }, i.prototype.createPriceLine = function (t) {\n    var i = new Mi(this, t);\n    return this.Wi.push(i), this.model().updateSource(this), i;\n  }, i.prototype.removePriceLine = function (t) {\n    var i = this.Wi.indexOf(t);\n    -1 !== i && this.Wi.splice(i, 1), this.model().updateSource(this);\n  }, i.prototype.palette = function () {\n    return this.Hi;\n  }, i.prototype.seriesType = function () {\n    return this.$i;\n  }, i.prototype.firstValue = function () {\n    var t = this.firstBar();\n    return null === t ? null : {\n      value: this.Ji(t.value),\n      timePoint: t.time\n    };\n  }, i.prototype.firstBar = function () {\n    var t = this.model().timeScale().visibleBars();\n    if (null === t) return null;\n    var i = t.firstBar();\n    return this.data().search(i, 1);\n  }, i.prototype.bars = function () {\n    return this.m.bars();\n  }, i.prototype.nearestIndex = function (t, i) {\n    var n = this.nearestData(t, i);\n    return n ? n.index : null;\n  }, i.prototype.nearestData = function (t, i) {\n    return M(t) ? this.data().search(t, i) : null;\n  }, i.prototype.dataAt = function (t) {\n    var i = this.data().valueAt(t);\n    return null === i ? null : \"Bar\" === this.$i || \"Candlestick\" === this.$i ? {\n      open: i.value[0],\n      high: i.value[1],\n      low: i.value[2],\n      close: i.value[3]\n    } : this.barFunction()(i.value);\n  }, i.prototype.paneViews = function () {\n    var t = [];\n    this.priceScale() === this.model().mainPriceScale() && t.push(this.Ui);\n\n    for (var i = 0, n = this.Wi; i < n.length; i++) {\n      var s = n[i];\n      t.push(s.paneView());\n    }\n\n    return t.push(this.J), t.push(this.ni), t.push(this._i), t.push(this._), t;\n  }, i.prototype.priceAxisViews = function (t, i) {\n    for (var n = o(this.U), s = 0, h = this.Wi; s < h.length; s++) {\n      var r = h[s];\n      n.push(r.priceAxisView());\n    }\n\n    return n;\n  }, i.prototype.autoscaleInfo = function (t, i) {\n    if (!M(t) || !M(i) || this.data().isEmpty()) return null;\n    var n,\n        s = \"Line\" === this.$i || \"Area\" === this.$i || \"Histogram\" === this.$i ? \"close\" : null,\n        h = null !== (n = null !== s ? this.data().bars().minMaxOnRangeCached(t, i, [{\n      name: s,\n      offset: 0\n    }]) : this.data().bars().minMaxOnRangeCached(t, i, [{\n      name: \"low\",\n      offset: 0\n    }, {\n      name: \"high\",\n      offset: 0\n    }])) ? new et(n.min, n.max) : null;\n\n    if (\"Histogram\" === this.seriesType()) {\n      var r = this.$.base,\n          u = new et(r, r);\n      h = null !== h ? h.merge(u) : u;\n    }\n\n    return {\n      priceRange: h,\n      margins: this._.autoScaleMargins()\n    };\n  }, i.prototype.minMove = function () {\n    return this.$.priceFormat.minMove;\n  }, i.prototype.formatter = function () {\n    return this.tn;\n  }, i.prototype.barFunction = function () {\n    return this.Ji;\n  }, i.prototype.updateAllViews = function () {\n    this.J.update(), this._.update();\n\n    for (var t = 0, i = this.U; t < i.length; t++) {\n      i[t].update();\n    }\n\n    for (var n = 0, s = this.Wi; n < s.length; n++) {\n      s[n].update();\n    }\n\n    this.ni.update(), this.Ui.update();\n  }, i.prototype.setPriceScale = function (t) {\n    this._priceScale !== t && (this._priceScale = t);\n  }, i.prototype.priceScale = function () {\n    return c(this._priceScale);\n  }, i.prototype.markerDataAtIndex = function (t) {\n    if (!((\"Line\" === this.$i || \"Area\" === this.$i) && this.$.crosshairMarkerVisible)) return null;\n    var i = this.m.valueAt(t);\n    return null === i ? null : {\n      price: this.Ji(i.value),\n      radius: this[\"in\"]()\n    };\n  }, i.prototype.title = function () {\n    return this.$.title;\n  }, i.prototype[\"in\"] = function () {\n    switch (this.$i) {\n      case \"Line\":\n      case \"Area\":\n        return this.$.crosshairMarkerRadius;\n    }\n\n    return 0;\n  }, i.prototype.Xi = function () {\n    switch (this.$.priceFormat.type) {\n      case \"custom\":\n        this.tn = {\n          format: this.$.priceFormat.formatter\n        };\n        break;\n\n      case \"volume\":\n        this.tn = new kt(this.$.priceFormat.precision);\n        break;\n\n      case \"percent\":\n        this.tn = new ht(this.$.priceFormat.precision);\n        break;\n\n      default:\n        var t = Math.pow(10, this.$.priceFormat.precision);\n        this.tn = new st(t, this.$.priceFormat.minMove * t, !1, void 0);\n    }\n\n    null !== this._priceScale && this._priceScale.updateFormatter();\n  }, i.prototype.Zi = function () {\n    this.Ji = Si(\"close\");\n  }, i.prototype.Qi = function () {\n    var t = this.model().timeScale().points();\n    this.Ki = this.Yi.map(function (i, n) {\n      return {\n        time: c(t.indexOf(i.time.timestamp, !0)),\n        position: i.position,\n        shape: i.shape,\n        color: i.color,\n        id: i.id,\n        internalId: n\n      };\n    });\n  }, i.prototype.Gi = function () {\n    switch (this._ = new ai(this, this.model()), this.$i) {\n      case \"Bar\":\n        this.J = new It(this, this.model());\n        break;\n\n      case \"Candlestick\":\n        this.J = new Rt(this, this.model());\n        break;\n\n      case \"Line\":\n        this.J = new Ht(this, this.model());\n        break;\n\n      case \"Area\":\n        this.J = new zt(this, this.model());\n        break;\n\n      case \"Histogram\":\n        this.J = new jt(this, this.model());\n        break;\n\n      default:\n        throw Error(\"Unknown chart style assigned: \" + this.$i);\n    }\n  }, i;\n}(ut);\n\nfunction Ti(t) {\n  return t.slice().sort(function (t, i) {\n    return c(t.zorder()) - c(i.zorder());\n  });\n}\n\n!function (t) {\n  t[t.Normal = 0] = \"Normal\", t[t.Logarithmic = 1] = \"Logarithmic\", t[t.Percentage = 2] = \"Percentage\", t[t.IndexedTo100 = 3] = \"IndexedTo100\";\n}(xi || (xi = {}));\n\nvar Ei,\n    Li,\n    Ai = new ht(),\n    Bi = new st(100, 1),\n    zi = function () {\n  function t(t, i, n) {\n    this.nn = 0, this.sn = null, this.hn = new rt(), this.rn = null, this.un = null, this.en = new rt(), this.on = {\n      isValid: !1,\n      visibleBars: null\n    }, this.fn = 0, this.an = 0, this.cn = new rt(), this.ln = new rt(), this.vn = [], this.dn = null, this.Mn = !1, this.wn = null, this.bn = null, this.mn = null, this.pn = null, this.tn = Bi, this.gn = new rt(), this.$ = t, this.yn = i, this.kn = n, this.Nn = new yt(this, 100, this.Sn.bind(this), this.xn.bind(this));\n  }\n\n  return t.prototype.options = function () {\n    return this.$;\n  }, t.prototype.applyOptions = function (t) {\n    if (v(this.$, t), this.updateFormatter(), void 0 !== t.mode && this.setMode({\n      mode: t.mode\n    }), this.gn.fire(), void 0 !== t.scaleMargins) {\n      var i = a(t.scaleMargins.top),\n          n = a(t.scaleMargins.bottom);\n      if (i < 0 || i > 1) throw new Error(\"Invalid top margin - expect value between 0 and 1, given=\" + i);\n      if (n < 0 || n > 1 || i + n > 1) throw new Error(\"Invalid bottom margin - expect value between 0 and 1, given=\" + n);\n      if (i + n > 1) throw new Error(\"Invalid margins - sum of margins must be less than 1, given=\" + (i + n));\n      this.Dn(), this.bn = null;\n    }\n  }, t.prototype.optionsChanged = function () {\n    return this.gn;\n  }, t.prototype.isAutoScale = function () {\n    return this.$.autoScale;\n  }, t.prototype.isLog = function () {\n    return 1 === this.$.mode;\n  }, t.prototype.isPercentage = function () {\n    return 2 === this.$.mode;\n  }, t.prototype.isIndexedTo100 = function () {\n    return 3 === this.$.mode;\n  }, t.prototype.mode = function () {\n    return {\n      autoScale: this.$.autoScale,\n      isInverted: this.$.invertScale,\n      mode: this.$.mode\n    };\n  }, t.prototype.setMode = function (t) {\n    var i = this.mode(),\n        n = null;\n    void 0 !== t.autoScale && (this.$.autoScale = t.autoScale), void 0 !== t.mode && (this.$.mode = t.mode, 2 !== t.mode && 3 !== t.mode || (this.$.autoScale = !0), this.on.isValid = !1), 1 === i.mode && t.mode !== i.mode && (!function (t) {\n      if (null === t) return !1;\n      var i = mt(t.minValue()),\n          n = mt(t.maxValue());\n      return isFinite(i) && isFinite(n);\n    }(this.rn) ? this.$.autoScale = !0 : null !== (n = function (t) {\n      if (null === t) return null;\n      var i = mt(t.minValue()),\n          n = mt(t.maxValue());\n      return new et(i, n);\n    }(this.rn)) && this.setPriceRange(n)), 1 === t.mode && t.mode !== i.mode && null !== (n = pt(this.rn)) && this.setPriceRange(n);\n    var s = i.mode !== this.$.mode;\n    s && (2 === i.mode || this.isPercentage()) && this.updateFormatter(), s && (3 === i.mode || this.isIndexedTo100()) && this.updateFormatter(), void 0 !== t.isInverted && i.isInverted !== t.isInverted && (this.$.invertScale = t.isInverted, this.Cn()), this.ln.fire(i, this.mode());\n  }, t.prototype.modeChanged = function () {\n    return this.ln;\n  }, t.prototype.fontSize = function () {\n    return this.yn.fontSize;\n  }, t.prototype.height = function () {\n    return this.nn;\n  }, t.prototype.setHeight = function (t) {\n    this.nn !== t && (this.nn = t, this.Dn(), this.bn = null);\n  }, t.prototype.internalHeight = function () {\n    if (this.sn) return this.sn;\n    var t = this.height() - this.Tn() - this.En();\n    return this.sn = t, t;\n  }, t.prototype.internalHeightChanged = function () {\n    return this.hn;\n  }, t.prototype.priceRange = function () {\n    return this.Ln(), this.rn;\n  }, t.prototype.priceRangeChanged = function () {\n    return this.en;\n  }, t.prototype.setPriceRange = function (t, i, n) {\n    var s = this.rn;\n    (i || null === s && null !== t || null !== s && !s.equals(t)) && (this.bn = null, this.rn = t, n || this.en.fire(s, t));\n  }, t.prototype.isEmpty = function () {\n    return this.Ln(), 0 === this.nn || !this.rn || this.rn.isEmpty();\n  }, t.prototype.invertedCoordinate = function (t) {\n    return this.isInverted() ? t : this.height() - 1 - t;\n  }, t.prototype.priceToCoordinate = function (t, i) {\n    return this.isPercentage() ? t = vt(t, i) : this.isIndexedTo100() && (t = Mt(t, i)), this.xn(t, i);\n  }, t.prototype.pointsArrayToCoordinates = function (t, i, n) {\n    this.Ln();\n\n    for (var s = this.En(), h = c(this.priceRange()), r = h.minValue(), u = h.maxValue(), e = this.internalHeight() - 1, o = this.isInverted(), f = e / (u - r), a = void 0 === n ? 0 : n.from, l = void 0 === n ? t.length : n.to, v = this.An(), d = a; d < l; d++) {\n      var M = t[d],\n          w = M.price;\n\n      if (!isNaN(w)) {\n        var b = w;\n        null !== v && (b = v(M.price, i));\n        var m = s + f * (b - r),\n            p = o ? m : this.nn - 1 - m;\n        M.y = p;\n      }\n    }\n  }, t.prototype.barPricesToCoordinates = function (t, i, n) {\n    this.Ln();\n\n    for (var s = this.En(), h = c(this.priceRange()), r = h.minValue(), u = h.maxValue(), e = this.internalHeight() - 1, o = this.isInverted(), f = e / (u - r), a = void 0 === n ? 0 : n.from, l = void 0 === n ? t.length : n.to, v = this.An(), d = a; d < l; d++) {\n      var M = t[d],\n          w = M.open,\n          b = M.high,\n          m = M.low,\n          p = M.close;\n      null !== v && (w = v(M.open, i), b = v(M.high, i), m = v(M.low, i), p = v(M.close, i));\n      var g = s + f * (w - r),\n          y = o ? g : this.nn - 1 - g;\n      M.openY = y, g = s + f * (b - r), y = o ? g : this.nn - 1 - g, M.highY = y, g = s + f * (m - r), y = o ? g : this.nn - 1 - g, M.lowY = y, g = s + f * (p - r), y = o ? g : this.nn - 1 - g, M.closeY = y;\n    }\n  }, t.prototype.coordinateToPrice = function (t, i) {\n    var n = this.Sn(t, i);\n    return this.logicalToPrice(n, i);\n  }, t.prototype.logicalToPrice = function (t, i) {\n    var n = t;\n    return this.isPercentage() ? n = function (t, i) {\n      return i < 0 && (t = -t), t / 100 * i + i;\n    }(n, i) : this.isIndexedTo100() && (n = function (t, i) {\n      return t -= 100, i < 0 && (t = -t), t / 100 * i + i;\n    }(n, i)), n;\n  }, t.prototype.dataSources = function () {\n    return this.vn;\n  }, t.prototype.orderedSources = function () {\n    if (this.dn) return this.dn;\n\n    for (var t = [], i = 0; i < this.vn.length; i++) {\n      var n = this.vn[i];\n      null === n.zorder() && n.setZorder(i + 1), t.push(n);\n    }\n\n    return t = Ti(t), this.dn = t, this.dn;\n  }, t.prototype.hasSeries = function () {\n    return this.Mn;\n  }, t.prototype.addDataSource = function (t) {\n    -1 === this.vn.indexOf(t) && (t instanceof Ci && (this.Mn = !0), this.vn.push(t), this.wn = null, this.updateFormatter(), this.invalidateSourcesCache());\n  }, t.prototype.removeDataSource = function (t) {\n    var i = this.vn.indexOf(t);\n    if (-1 === i) throw new Error(\"source is not attached to scale\");\n    this.vn.splice(i, 1), t instanceof Ci && (this.Mn = !1), this.mainSource() || this.setMode({\n      autoScale: !0\n    }), this.wn = null, this.updateFormatter(), this.invalidateSourcesCache();\n  }, t.prototype.mainSource = function () {\n    if (null !== this.wn) return this.wn;\n\n    for (var t = null, i = 0; i < this.vn.length; i++) {\n      var n = this.vn[i];\n\n      if (n instanceof Ci) {\n        t = n;\n        break;\n      }\n\n      null === t && n instanceof ut && (t = n);\n    }\n\n    return this.wn = t, this.wn;\n  }, t.prototype.firstValue = function () {\n    for (var t = null, i = 0, n = this.vn; i < n.length; i++) {\n      var s = n[i];\n\n      if (s instanceof ut) {\n        var h = s.firstValue();\n        if (null === h) continue;\n        (null === t || h.timePoint < t.timePoint) && (t = h);\n      }\n    }\n\n    return null === t ? null : t.value;\n  }, t.prototype.isInverted = function () {\n    return this.$.invertScale;\n  }, t.prototype.marks = function () {\n    return this.bn ? this.bn : (this.Nn.rebuildTickMarks(), this.bn = this.Nn.marks(), this.cn.fire(), this.bn);\n  }, t.prototype.onMarksChanged = function () {\n    return this.cn;\n  }, t.prototype.startScale = function (t) {\n    this.isPercentage() || this.isIndexedTo100() || null === this.mn && null === this.un && (this.isEmpty() || (this.mn = this.nn - t, this.un = c(this.priceRange()).clone()));\n  }, t.prototype.scaleTo = function (t) {\n    if (!this.isPercentage() && !this.isIndexedTo100() && null !== this.mn) {\n      this.setMode({\n        autoScale: !1\n      }), (t = this.nn - t) < 0 && (t = 0);\n      var i = (this.mn + .2 * (this.nn - 1)) / (t + .2 * (this.nn - 1)),\n          n = c(this.un).clone();\n      i = Math.max(i, .1), n.scaleAroundCenter(i), this.setPriceRange(n);\n    }\n  }, t.prototype.endScale = function () {\n    this.isPercentage() || this.isIndexedTo100() || (this.mn = null, this.un = null);\n  }, t.prototype.startScroll = function (t) {\n    this.isAutoScale() || null === this.pn && null === this.un && (this.isEmpty() || (this.pn = t, this.un = c(this.priceRange()).clone()));\n  }, t.prototype.scrollTo = function (t) {\n    if (!this.isAutoScale() && null !== this.pn) {\n      var i = c(this.priceRange()).length() / (this.internalHeight() - 1),\n          n = t - this.pn;\n      this.isInverted() && (n *= -1);\n      var s = n * i,\n          h = c(this.un).clone();\n      h.shift(s), this.setPriceRange(h, !0), this.bn = null;\n    }\n  }, t.prototype.endScroll = function () {\n    this.isAutoScale() || null !== this.pn && (this.pn = null, this.un = null);\n  }, t.prototype.formatter = function () {\n    return this.tn || this.updateFormatter(), this.tn;\n  }, t.prototype.formatPrice = function (t, i) {\n    switch (this.$.mode) {\n      case 2:\n        return this.formatter().format(vt(t, i));\n\n      case 3:\n        return this.formatter().format(Mt(t, i));\n\n      default:\n        return this.Bn(t);\n    }\n  }, t.prototype.formatLogical = function (t) {\n    switch (this.$.mode) {\n      case 2:\n      case 3:\n        return this.formatter().format(t);\n\n      default:\n        return this.Bn(t);\n    }\n  }, t.prototype.formatPriceAbsolute = function (t) {\n    return this.Bn(t, this.zn());\n  }, t.prototype.formatPricePercentage = function (t, i) {\n    return t = vt(t, i), Ai.format(t);\n  }, t.prototype.sourcesForAutoScale = function () {\n    return this.vn.filter(function (t) {\n      return t instanceof ut;\n    });\n  }, t.prototype.recalculatePriceRange = function (t) {\n    this.on = {\n      visibleBars: t,\n      isValid: !1\n    };\n  }, t.prototype.updateAllViews = function () {\n    this.vn.forEach(function (t) {\n      return t.updateAllViews();\n    });\n  }, t.prototype.updateFormatter = function () {\n    this.bn = null;\n    var t = this.mainSource(),\n        i = 100;\n    null !== t && (i = Math.round(1 / t.minMove())), this.tn = Bi, this.isPercentage() ? (this.tn = Ai, i = 100) : this.isIndexedTo100() ? (this.tn = new st(100, 1), i = 100) : null !== t && (this.tn = t.formatter()), this.Nn = new yt(this, i, this.Sn.bind(this), this.xn.bind(this)), this.Nn.rebuildTickMarks();\n  }, t.prototype.invalidateSourcesCache = function () {\n    this.dn = null;\n  }, t.prototype.Tn = function () {\n    return this.isInverted() ? this.$.scaleMargins.bottom * this.height() + this.an : this.$.scaleMargins.top * this.height() + this.fn;\n  }, t.prototype.En = function () {\n    return this.isInverted() ? this.$.scaleMargins.top * this.height() + this.fn : this.$.scaleMargins.bottom * this.height() + this.an;\n  }, t.prototype.Ln = function () {\n    this.on.isValid || (this.on.isValid = !0, this.Vn());\n  }, t.prototype.Dn = function () {\n    this.sn = null, this.hn.fire();\n  }, t.prototype.xn = function (t, i) {\n    if (this.Ln(), this.isEmpty()) return 0;\n    t = this.isLog() && t ? bt(t) : t;\n    var n = c(this.priceRange()),\n        s = this.En() + (this.internalHeight() - 1) * (t - n.minValue()) / n.length();\n    return this.invertedCoordinate(s);\n  }, t.prototype.Sn = function (t, i) {\n    if (this.Ln(), this.isEmpty()) return 0;\n    var n = this.invertedCoordinate(t),\n        s = c(this.priceRange()),\n        h = s.minValue() + s.length() * ((n - this.En()) / (this.internalHeight() - 1));\n    return this.isLog() ? mt(h) : h;\n  }, t.prototype.Cn = function () {\n    this.bn = null, this.Nn.rebuildTickMarks();\n  }, t.prototype.zn = function () {\n    return c(this.mainSource()).formatter();\n  }, t.prototype.Vn = function () {\n    var t = this.on.visibleBars;\n\n    if (null !== t) {\n      for (var i = null, n = 0, s = 0, h = 0, r = this.sourcesForAutoScale(); h < r.length; h++) {\n        var u = r[h],\n            e = u.firstValue();\n\n        if (null !== e) {\n          var o = u.autoscaleInfo(t.firstBar(), t.lastBar()),\n              f = o && o.priceRange;\n\n          if (null !== f) {\n            switch (this.$.mode) {\n              case 1:\n                f = pt(f);\n                break;\n\n              case 2:\n                f = dt(f, e.value);\n                break;\n\n              case 3:\n                f = wt(f, e.value);\n            }\n\n            i = null === i ? f : i.merge(c(f)), null !== o && null !== o.margins && (n = Math.max(n, o.margins.above), s = Math.max(n, o.margins.below));\n          }\n        }\n      }\n\n      if (n === this.fn && s === this.an || (this.fn = n, this.an = s, this.bn = null, this.Dn()), null !== i) {\n        if (i.minValue() === i.maxValue()) {\n          var a = this.mainSource(),\n              l = 5 * (null === a || this.isPercentage() || this.isIndexedTo100() ? 1 : a.minMove());\n          i = new et(i.minValue() - l, i.maxValue() + l);\n        }\n\n        this.setPriceRange(i);\n      } else null === this.rn && this.setPriceRange(new et(-.5, .5));\n\n      this.on.isValid = !0;\n    }\n  }, t.prototype.An = function () {\n    return this.isPercentage() ? vt : this.isIndexedTo100() ? Mt : this.isLog() ? bt : null;\n  }, t.prototype.Bn = function (t, i) {\n    return void 0 === this.kn.priceFormatter ? (void 0 === i && (i = this.formatter()), i.format(t)) : this.kn.priceFormatter(t);\n  }, t;\n}();\n\nfunction Vi(t) {\n  void 0 !== t.borderColor && (t.borderUpColor = t.borderColor, t.borderDownColor = t.borderColor), void 0 !== t.wickColor && (t.wickUpColor = t.wickColor, t.wickDownColor = t.wickColor);\n}\n\nfunction Fi(t) {\n  return !d(t) && !w(t);\n}\n\nfunction Pi(t) {\n  return d(t);\n}\n\n!function (t) {\n  t[t.LastPriceAndPercentageValue = 0] = \"LastPriceAndPercentageValue\", t[t.LastValueAccordingToScale = 1] = \"LastValueAccordingToScale\";\n}(Ei || (Ei = {})), function (t) {\n  t[t.LastBar = 0] = \"LastBar\", t[t.LastVisible = 1] = \"LastVisible\";\n}(Li || (Li = {}));\nvar Ii;\n\nfunction Oi(t, i, n) {\n  return void 0 !== n ? n += \" \" : n = \"\", void 0 === i && (i = \"'Trebuchet MS', Roboto, Ubuntu, sans-serif\"), \"\" + n + t + \"px \" + i;\n}\n\n!function (t) {\n  t[t.BorderSize = 1] = \"BorderSize\", t[t.TickLength = 4] = \"TickLength\";\n}(Ii || (Ii = {}));\n\nvar Ri,\n    Wi = function () {\n  function t(t) {\n    this.Ht = {\n      borderSize: 1,\n      tickLength: 4,\n      fontSize: NaN,\n      font: \"\",\n      fontFamily: \"\",\n      color: \"\",\n      paddingBottom: 0,\n      paddingInner: 0,\n      paddingOuter: 0,\n      paddingTop: 0,\n      baselineOffset: 0\n    }, this.l = t;\n  }\n\n  return t.prototype.options = function () {\n    var t = this.Ht,\n        i = this.Zt(),\n        n = this.Fn();\n    return t.fontSize === i && t.fontFamily === n || (t.fontSize = i, t.fontFamily = n, t.font = Oi(i, n), t.paddingTop = Math.floor(i / 3.5), t.paddingBottom = t.paddingTop, t.paddingInner = Math.max(Math.ceil(i / 2 - t.tickLength / 2), 0), t.paddingOuter = Math.ceil(i / 2 + t.tickLength / 2), t.baselineOffset = Math.round(i / 10)), t.color = this.Pn(), this.Ht;\n  }, t.prototype.Pn = function () {\n    return this.l.options().layout.textColor;\n  }, t.prototype.Zt = function () {\n    return this.l.options().layout.fontSize;\n  }, t.prototype.Fn = function () {\n    return this.l.options().layout.fontFamily;\n  }, t;\n}(),\n    Ui = function () {\n  function t() {\n    this.m = null;\n  }\n\n  return t.prototype.setData = function (t) {\n    this.m = t;\n  }, t.prototype.draw = function (t, i, n, h) {\n    var r = this;\n\n    if (null !== this.m) {\n      var u = Math.floor(i);\n      t.lineWidth = u;\n      var e = Math.ceil(this.m.h * i),\n          o = Math.ceil(this.m.w * i);\n      !function (t, i) {\n        t.save(), t.lineWidth % 2 && t.translate(.5, .5), i(), t.restore();\n      }(t, function () {\n        var n = c(r.m);\n\n        if (n.vertLinesVisible) {\n          t.strokeStyle = n.vertLinesColor, s(t, n.vertLineStyle), t.beginPath();\n\n          for (var h = 0, f = n.timeMarks; h < f.length; h++) {\n            var a = f[h],\n                l = Math.round(a.coord * i);\n            t.moveTo(l, -u), t.lineTo(l, e + u);\n          }\n\n          t.stroke();\n        }\n\n        if (n.horzLinesVisible) {\n          t.strokeStyle = n.horzLinesColor, s(t, n.horzLineStyle), t.beginPath();\n\n          for (var v = 0, d = n.priceMarks; v < d.length; v++) {\n            var M = d[v],\n                w = Math.round(M.coord * i);\n            t.moveTo(-u, w), t.lineTo(o + u, w);\n          }\n\n          t.stroke();\n        }\n      });\n    }\n  }, t;\n}(),\n    qi = function () {\n  function t(t) {\n    this.g = new Ui(), this.o = !0, this.I = t;\n  }\n\n  return t.prototype.update = function () {\n    this.o = !0;\n  }, t.prototype.renderer = function (t, i) {\n    if (this.o) {\n      var n = this.I.model().options().grid,\n          s = {\n        h: t,\n        w: i,\n        horzLinesVisible: n.horzLines.visible,\n        vertLinesVisible: n.vertLines.visible,\n        horzLinesColor: n.horzLines.color,\n        vertLinesColor: n.vertLines.color,\n        horzLineStyle: n.horzLines.style,\n        vertLineStyle: n.vertLines.style,\n        priceMarks: this.I.defaultPriceScale().marks(),\n        timeMarks: this.I.model().timeScale().marks() || []\n      };\n      this.g.setData(s), this.o = !1;\n    }\n\n    return this.g;\n  }, t;\n}(),\n    ji = function () {\n  function t() {\n    this.In = new WeakMap(), this.o = !0;\n  }\n\n  return t.prototype.paneViews = function (t) {\n    var i = this.In.get(t);\n    return void 0 === i && (i = [new qi(t)], this.In.set(t, i)), this.o && (i.forEach(function (t) {\n      return t.update();\n    }), this.o = !1), i;\n  }, t.prototype.invalidate = function () {\n    this.o = !0;\n  }, t;\n}();\n\n!function (t) {\n  t[t.None = 0] = \"None\", t[t.Cursor = 1] = \"Cursor\", t[t.Light = 2] = \"Light\", t[t.Full = 3] = \"Full\";\n}(Ri || (Ri = {}));\n\nvar Hi = function () {\n  function t(t) {\n    this.On = new Map(), this.Rn = !1, this.Wn = !1, this.Un = null, this.qn = t;\n  }\n\n  return t.prototype.invalidatePane = function (t, i) {\n    var n = function (t, i) {\n      return void 0 === t ? i : {\n        level: Math.max(t.level, i.level),\n        autoScale: t.autoScale || i.autoScale\n      };\n    }(this.On.get(t), i);\n\n    this.On.set(t, n);\n  }, t.prototype.invalidateAll = function (t) {\n    this.qn = Math.max(this.qn, t);\n  }, t.prototype.fullInvalidation = function () {\n    return this.qn;\n  }, t.prototype.invalidateForPane = function (t) {\n    var i = this.On.get(t);\n    return void 0 === i ? {\n      level: this.qn\n    } : {\n      level: Math.max(this.qn, i.level),\n      autoScale: i.autoScale\n    };\n  }, t.prototype.setFitContent = function () {\n    this.Wn = !0, this.Un = null;\n  }, t.prototype.getFitContent = function () {\n    return this.Wn;\n  }, t.prototype.setTargetTimeRange = function (t) {\n    this.Un = t, this.Wn = !1;\n  }, t.prototype.getTargetTimeRange = function () {\n    return this.Un;\n  }, t.prototype.merge = function (t) {\n    var i = this;\n    this.Rn = this.Rn || t.Rn, t.Wn && this.setFitContent(), t.Un && this.setTargetTimeRange(t.Un), this.qn = Math.max(this.qn, t.qn), t.On.forEach(function (t, n) {\n      i.invalidatePane(n, t);\n    });\n  }, t;\n}(),\n    Yi = function () {\n  function t(t) {\n    this.$ = t;\n  }\n\n  return t.prototype.align = function (t, i, n) {\n    var s = t;\n    if (0 === this.$.mode) return s;\n    var h = n.defaultPriceScale(),\n        r = h.firstValue();\n    if (null === r) return s;\n    var u = h.priceToCoordinate(t, r),\n        e = n.dataSources().filter(function (t) {\n      return t instanceof Ci;\n    }).reduce(function (t, s) {\n      if (n.isOverlay(s)) return t;\n      var h = s.priceScale(),\n          r = s.bars();\n      if (h.isEmpty() || !r.contains(i)) return t;\n      var u = r.valueAt(i);\n      if (null === u) return t;\n      var e = [u.value[3]],\n          o = l(s.firstValue());\n      return t.concat(e.map(function (t) {\n        return h.priceToCoordinate(t, o.value);\n      }));\n    }, []);\n    if (0 === e.length) return s;\n    e.sort(function (t, i) {\n      return Math.abs(t - u) - Math.abs(i - u);\n    });\n    var o = e[0];\n    return s = h.coordinateToPrice(o, r);\n  }, t;\n}(),\n    Ki = function () {\n  function t(t, i) {\n    this.vn = [], this.jn = [], this.nn = 0, this.Kt = 0, this.Hn = 1e3, this.Yn = null, this.dn = null, this.Kn = new rt(), this.$n = t, this.F = i, this.model().mainPriceScaleOptionsChanged().subscribe(this.onPriceScaleOptionsChanged.bind(this), this), this._n = this.Xn();\n  }\n\n  return t.prototype.onPriceScaleOptionsChanged = function () {\n    this._n.applyOptions(this.F.options().priceScale);\n  }, t.prototype.destroy = function () {\n    this.model().mainPriceScaleOptionsChanged().unsubscribeAll(this), this._n.modeChanged().unsubscribeAll(this), this.vn.forEach(function (t) {\n      t.destroy && t.destroy();\n    }), this.Kn.fire();\n  }, t.prototype.stretchFactor = function () {\n    return this.Hn;\n  }, t.prototype.setStretchFactor = function (t) {\n    this.Hn = t;\n  }, t.prototype.model = function () {\n    return this.F;\n  }, t.prototype.width = function () {\n    return this.Kt;\n  }, t.prototype.height = function () {\n    return this.nn;\n  }, t.prototype.setWidth = function (t) {\n    this.Kt = t, this.updateAllViews();\n  }, t.prototype.setHeight = function (t) {\n    var i = this;\n    this.nn = t, this._n.setHeight(t), this.vn.forEach(function (n) {\n      if (i.isOverlay(n)) {\n        var s = n.priceScale();\n        null !== s && s.setHeight(t);\n      }\n    }), this.updateAllViews();\n  }, t.prototype.dataSources = function () {\n    return this.vn;\n  }, t.prototype.isOverlay = function (t) {\n    var i = t.priceScale();\n    return null === i || this._n !== i;\n  }, t.prototype.addDataSource = function (t, i, n) {\n    var s = this.Zn().minZOrder - 1;\n    this.Jn(t, i, s);\n  }, t.prototype.removeDataSource = function (t) {\n    var i = this.vn.indexOf(t);\n    f(-1 !== i, \"removeDataSource: invalid data source\"), this.vn.splice(i, 1), t === this.Yn && (this.Yn = null);\n    var n = this.jn.indexOf(t);\n    -1 !== n && this.jn.splice(n, 1);\n    var s = t.priceScale();\n\n    if (s && s.dataSources().indexOf(t) >= 0 && s.removeDataSource(t), s && null === s.mainSource()) {\n      var h = s.dataSources().length;\n      f(0 === h, \"Invalid priceScale state: empty mainSource but non-empty data sources=\" + h), s !== this._n && s.modeChanged().unsubscribeAll(this);\n    }\n\n    t instanceof ut && this.Gn(), s && t instanceof ut && (s.invalidateSourcesCache(), this.recalculatePriceScale(s)), this.dn = null;\n  }, t.prototype.priceScalePosition = function () {\n    var t = this.F.options().priceScale.position;\n    return \"none\" === t ? \"overlay\" : t;\n  }, t.prototype.startScalePrice = function (t, i) {\n    t.startScale(i);\n  }, t.prototype.scalePriceTo = function (t, i) {\n    t.scaleTo(i), this.updateAllViews();\n  }, t.prototype.endScalePrice = function (t) {\n    t.endScale();\n  }, t.prototype.startScrollPrice = function (t, i) {\n    t.startScroll(i);\n  }, t.prototype.scrollPriceTo = function (t, i) {\n    t.scrollTo(i), this.updateAllViews();\n  }, t.prototype.endScrollPrice = function (t) {\n    t.endScroll();\n  }, t.prototype.setPriceAutoScale = function (t, i) {\n    t.setMode({\n      autoScale: i\n    }), this.$n.isEmpty() ? t.setPriceRange(null) : this.recalculatePriceScale(t);\n  }, t.prototype.updateAllViews = function () {\n    this.vn.forEach(function (t) {\n      t.updateAllViews();\n    });\n  }, t.prototype.defaultPriceScale = function () {\n    var t = this.mainDataSource(),\n        i = null !== t ? t.priceScale() : null;\n    return null === i && (i = this._n), i;\n  }, t.prototype.mainDataSource = function () {\n    return this.Yn;\n  }, t.prototype.recalculatePriceScale = function (t) {\n    null !== t && t.isAutoScale() && this.Qn(t);\n  }, t.prototype.resetPriceScale = function (t) {\n    var i = this.$n.visibleBars();\n    t.setMode({\n      autoScale: !0\n    }), null !== i && t.recalculatePriceRange(i), this.updateAllViews();\n  }, t.prototype.momentaryAutoScale = function () {\n    this.Qn(this._n);\n  }, t.prototype.recalculate = function () {\n    var t = this;\n    this.recalculatePriceScale(this._n), this.vn.forEach(function (i) {\n      t.isOverlay(i) && t.recalculatePriceScale(i.priceScale());\n    }), this.updateAllViews(), this.F.lightUpdate();\n  }, t.prototype.isEmpty = function () {\n    return null === this.Yn;\n  }, t.prototype.containsSeries = function () {\n    return this.vn.some(function (t) {\n      return t instanceof Ci;\n    });\n  }, t.prototype.orderedSources = function () {\n    return null === this.dn && (this.dn = Ti(this.vn)), this.dn;\n  }, t.prototype.onDestroyed = function () {\n    return this.Kn;\n  }, t.prototype.ts = function (t, i) {\n    return \"overlay\" !== i ? this._n : this.Xn(!0);\n  }, t.prototype.Qn = function (t) {\n    var i = t.sourcesForAutoScale();\n\n    if (i && i.length > 0 && !this.$n.isEmpty()) {\n      var n = this.$n.visibleBars();\n      null !== n && t.recalculatePriceRange(n);\n    }\n\n    t.updateAllViews();\n  }, t.prototype.Zn = function () {\n    var t = this.orderedSources();\n    if (0 === t.length) return {\n      minZOrder: 0,\n      maxZOrder: 0\n    };\n\n    for (var i = 0, n = 0, s = 0; s < t.length; s++) {\n      var h = t[s].zorder();\n      null !== h && (h < i && (i = h), h > n && (n = h));\n    }\n\n    return {\n      minZOrder: i,\n      maxZOrder: n\n    };\n  }, t.prototype.Jn = function (t, i, n) {\n    var s = \"overlay\",\n        h = null;\n\n    if (!i) {\n      var r = this.model().options().priceScale.position;\n      s = \"none\" === r ? \"overlay\" : r;\n    }\n\n    t instanceof ut && (h = this.ts(t, s)), this.vn.push(t), i && this.jn.push(t), null !== h && (h.addDataSource(t), t.setPriceScale(h)), t.setZorder(n), this.Gn(), t instanceof ut && this.recalculatePriceScale(h), this.dn = null;\n  }, t.prototype.ns = function (t, i, n) {\n    i.mode !== n.mode && this.Qn(t);\n  }, t.prototype.Gn = function () {\n    if (null === this.Yn || -1 !== this.jn.indexOf(this.Yn)) {\n      for (var t = 0, i = this.vn; t < i.length; t++) {\n        if ((h = i[t]) instanceof ut && !this.isOverlay(h)) return void this.ss(h);\n      }\n\n      for (var n = 0, s = this.jn; n < s.length; n++) {\n        var h;\n        if ((h = s[n]) instanceof ut) return void this.ss(h);\n      }\n    }\n  }, t.prototype.ss = function (t) {\n    var i = c(t.priceScale());\n    this.defaultPriceScale().modeChanged().unsubscribeAll(this), i.modeChanged().subscribe(this.ns.bind(this, i), this), this.Yn = t;\n  }, t.prototype.Xn = function (t) {\n    var i = p(this.F.options().priceScale);\n    t && (i.autoScale = !0, i.mode = 0);\n    var n = new zi(i, this.F.options().layout, this.F.options().localization);\n    return n.setHeight(this.height()), n;\n  }, t;\n}(),\n    $i = function $i(t) {\n  return t.getUTCFullYear();\n},\n    _i = function _i(t) {\n  return it(function (t) {\n    return t.getUTCDate();\n  }(t), 2);\n},\n    Xi = function Xi(t, i) {\n  return new Date(t.getUTCFullYear(), t.getUTCMonth(), 1).toLocaleString(i, {\n    month: \"long\"\n  });\n},\n    Zi = function Zi(t, i) {\n  return new Date(t.getUTCFullYear(), t.getUTCMonth(), 1).toLocaleString(i, {\n    month: \"short\"\n  });\n},\n    Ji = function Ji(t) {\n  return it(function (t) {\n    return t.getUTCMonth() + 1;\n  }(t), 2);\n},\n    Gi = function Gi(t) {\n  return it($i(t) % 100, 2);\n},\n    Qi = function Qi(t) {\n  return it($i(t), 4);\n},\n    tn = {\n  \"'yy MMM dd\": function yyMMMDd(t, i) {\n    return \"'\" + Gi(t) + \" \" + Zi(t, i) + \" \" + _i(t);\n  },\n  \"'yy MMMM dd\": function yyMMMMDd(t, i) {\n    return \"'\" + Gi(t) + \" \" + Xi(t, i) + \" \" + _i(t);\n  },\n  \"yyyy MMM dd\": function yyyyMMMDd(t, i) {\n    return Qi(t) + \" \" + Zi(t, i) + \" \" + _i(t);\n  },\n  \"yyyy MMMM dd\": function yyyyMMMMDd(t, i) {\n    return Qi(t) + \" \" + Xi(t, i) + \" \" + _i(t);\n  },\n  \"dd MMM 'yy\": function ddMMMYy(t, i) {\n    return _i(t) + \" \" + Zi(t, i) + \" '\" + Gi(t);\n  },\n  \"dd MMMM 'yy\": function ddMMMMYy(t, i) {\n    return _i(t) + \" \" + Xi(t, i) + \" '\" + Gi(t);\n  },\n  \"dd MMM yyyy\": function ddMMMYyyy(t, i) {\n    return _i(t) + \" \" + Zi(t, i) + \" \" + Qi(t);\n  },\n  \"dd MMMM yyyy\": function ddMMMMYyyy(t, i) {\n    return _i(t) + \" \" + Xi(t, i) + \" \" + Qi(t);\n  },\n  \"MMM dd, 'yy\": function MMMDdYy(t, i) {\n    return Zi(t, i) + \" \" + _i(t) + \", '\" + Gi(t);\n  },\n  \"MMMM dd, 'yy\": function MMMMDdYy(t, i) {\n    return Xi(t, i) + \" \" + _i(t) + \", '\" + Gi(t);\n  },\n  \"MMM dd, yyyy\": function MMMDdYyyy(t, i) {\n    return Zi(t, i) + \" \" + _i(t) + \", \" + Qi(t);\n  },\n  \"MMMM dd, yyyy\": function MMMMDdYyyy(t, i) {\n    return Xi(t, i) + \" \" + _i(t) + \", \" + Qi(t);\n  },\n  \"yyyy-MM-dd\": function yyyyMMDd(t, i) {\n    return Qi(t) + \"-\" + Ji(t) + \"-\" + _i(t);\n  },\n  \"yy-MM-dd\": function yyMMDd(t, i) {\n    return Gi(t) + \"-\" + Ji(t) + \"-\" + _i(t);\n  },\n  \"yy/MM/dd\": function yyMMDd(t, i) {\n    return Gi(t) + \"/\" + Ji(t) + \"/\" + _i(t);\n  },\n  \"yyyy/MM/dd\": function yyyyMMDd(t, i) {\n    return Qi(t) + \"/\" + Ji(t) + \"/\" + _i(t);\n  },\n  \"yy.MM.dd\": function yyMMDd(t, i) {\n    return Gi(t) + \".\" + Ji(t) + \".\" + _i(t);\n  },\n  \"yyyy.MM.dd\": function yyyyMMDd(t, i) {\n    return Qi(t) + \".\" + Ji(t) + \".\" + _i(t);\n  },\n  \"dd-MM-yyyy\": function ddMMYyyy(t, i) {\n    return _i(t) + \"-\" + Ji(t) + \"-\" + Qi(t);\n  },\n  \"dd-MM-yy\": function ddMMYy(t, i) {\n    return _i(t) + \"-\" + Ji(t) + \"-\" + Gi(t);\n  },\n  \"dd/MM/yy\": function ddMMYy(t, i) {\n    return _i(t) + \"/\" + Ji(t) + \"/\" + Gi(t);\n  },\n  \"dd/MM/yyyy\": function ddMMYyyy(t, i) {\n    return _i(t) + \"/\" + Ji(t) + \"/\" + Qi(t);\n  },\n  \"dd.MM.yy\": function ddMMYy(t, i) {\n    return _i(t) + \".\" + Ji(t) + \".\" + Gi(t);\n  },\n  \"dd.MM.yyyy\": function ddMMYyyy(t, i) {\n    return _i(t) + \".\" + Ji(t) + \".\" + Qi(t);\n  },\n  \"MM-dd-yy\": function MMDdYy(t, i) {\n    return Ji(t) + \"-\" + _i(t) + \"-\" + Gi(t);\n  },\n  \"MM-dd-yyyy\": function MMDdYyyy(t, i) {\n    return Ji(t) + \"-\" + _i(t) + \"-\" + Qi(t);\n  },\n  \"MM/dd/yy\": function MMDdYy(t, i) {\n    return Ji(t) + \"/\" + _i(t) + \"/\" + Gi(t);\n  },\n  \"MM/dd/yyyy\": function MMDdYyyy(t, i) {\n    return Ji(t) + \"/\" + _i(t) + \"/\" + Qi(t);\n  },\n  \"MM.dd.yy\": function MMDdYy(t, i) {\n    return Ji(t) + \".\" + _i(t) + \".\" + Gi(t);\n  },\n  \"MM.dd.yyyy\": function MMDdYyyy(t, i) {\n    return Ji(t) + \".\" + _i(t) + \".\" + Qi(t);\n  }\n},\n    nn = function () {\n  function t(t, i) {\n    void 0 === t && (t = \"yyyy-MM-dd\"), void 0 === i && (i = \"default\"), this.hs = tn[t], this.rs = i;\n  }\n\n  return t.prototype.format = function (t) {\n    return this.hs(t, this.rs);\n  }, t;\n}(),\n    sn = function () {\n  function t(t) {\n    this.us = t || \"%h:%m:%s\";\n  }\n\n  return t.prototype.format = function (t) {\n    return this.us.replace(\"%h\", it(t.getUTCHours(), 2)).replace(\"%m\", it(t.getUTCMinutes(), 2)).replace(\"%s\", it(t.getUTCSeconds(), 2));\n  }, t;\n}(),\n    hn = {\n  dateFormat: \"yyyy-MM-dd\",\n  timeFormat: \"%h:%m:%s\",\n  dateTimeSeparator: \" \",\n  locale: \"default\"\n},\n    rn = function () {\n  function t(t) {\n    void 0 === t && (t = {});\n\n    var i = _e(_e({}, hn), t);\n\n    this.es = new nn(i.dateFormat, i.locale), this.os = new sn(i.timeFormat), this.fs = i.dateTimeSeparator;\n  }\n\n  return t.prototype.format = function (t) {\n    return \"\" + this.es.format(t) + this.fs + this.os.format(t);\n  }, t;\n}(),\n    un = function () {\n  function t(t, i) {\n    f(t <= i, \"The last bar in the bars range should be greater than or equal to the first bar\"), this.as = t, this.cs = i;\n  }\n\n  return t.prototype.firstBar = function () {\n    return this.as;\n  }, t.prototype.lastBar = function () {\n    return this.cs;\n  }, t.prototype.count = function () {\n    return this.cs - this.as + 1;\n  }, t.prototype.contains = function (t) {\n    return this.as <= t && t <= this.cs;\n  }, t.prototype.equals = function (t) {\n    return this.as === t.firstBar() && this.cs === t.lastBar();\n  }, t;\n}(),\n    en = function () {\n  function t(t, i) {\n    void 0 === i && (i = 50), this.It = 0, this.Ot = 1, this.Rt = 1, this.Ut = new Map(), this.Wt = new Map(), this.ls = t, this.qt = i;\n  }\n\n  return t.prototype.format = function (t) {\n    var i = this.Ut.get(t.valueOf());\n    if (void 0 !== i) return i.string;\n\n    if (this.It === this.qt) {\n      var n = this.Wt.get(this.Rt);\n      this.Wt[\"delete\"](this.Rt), this.Ut[\"delete\"](a(n)), this.Rt++, this.It--;\n    }\n\n    var s = this.ls(t);\n    return this.Ut.set(t.valueOf(), {\n      string: s,\n      tick: this.Ot\n    }), this.Wt.set(this.Ot, t.valueOf()), this.It++, this.Ot++, s;\n  }, t;\n}();\n\nfunction on(t, i) {\n  return t.index - i.index;\n}\n\nvar fn,\n    an,\n    cn = function () {\n  function t() {\n    this.vs = 1 / 0, this.ds = -1 / 0, this.Ms = new Map(), this.ws = [], this.bs = new rt(), this.Ut = null, this.ms = NaN;\n  }\n\n  return t.prototype.reset = function () {\n    this.Ms.clear(), this.ws = [], this.vs = 1 / 0, this.ds = -1 / 0, this.Ut = null, this.bs.fire();\n  }, t.prototype.merge = function (t) {\n    for (var i = this.ws, n = {}, s = 0, h = t; s < h.length; s++) {\n      var r = h[s],\n          u = r.index,\n          e = r.span,\n          o = this.Ms.get(r.index);\n\n      if (o) {\n        if (o.index === r.index && o.span === r.span) {\n          o.time = r.time;\n          continue;\n        }\n\n        this.ps(o);\n      }\n\n      this.Ms.set(u, r), this.vs > u && (this.vs = u), this.ds < u && (this.ds = u), void 0 === (f = i[e]) && (f = [], i[e] = f), f.push(r), n[e] = !0;\n    }\n\n    for (e = i.length; e--;) {\n      var f;\n      void 0 !== (f = i[e]) && (0 === f.length && delete i[e], n[e] && f.sort(on));\n    }\n\n    this.Ut = null, this.bs.fire();\n  }, t.prototype.indexToTime = function (t) {\n    var i = this.Ms.get(t);\n    return void 0 === i ? null : i.time;\n  }, t.prototype.nearestIndex = function (t) {\n    for (var i = this.vs, n = this.ds; n - i > 2;) {\n      if (1e3 * a(this.Ms.get(i)).time.timestamp === t) return i;\n      if (1e3 * a(this.Ms.get(n)).time.timestamp === t) return n;\n      var s = Math.round((i + n) / 2);\n      1e3 * a(this.Ms.get(s)).time.timestamp > t ? n = s : i = s;\n    }\n\n    return i;\n  }, t.prototype.build = function (t, i) {\n    var n = Math.ceil(i / t);\n    if (this.ms === n && this.Ut) return this.Ut;\n    this.ms = n;\n\n    for (var s = [], h = this.ws.length; h--;) {\n      if (this.ws[h]) {\n        var r = s;\n        s = [];\n\n        for (var u = r.length, e = 0, o = a(this.ws[h]), f = o.length, c = 1 / 0, l = -1 / 0, v = 0; v < f; v++) {\n          for (var d = o[v], M = d.index; e < u;) {\n            var w = r[e],\n                b = w.index;\n\n            if (!(b < M)) {\n              c = b;\n              break;\n            }\n\n            e++, s.push(w), l = b, c = 1 / 0;\n          }\n\n          c - M >= n && M - l >= n && (s.push(d), l = M);\n        }\n\n        for (; e < u; e++) {\n          s.push(r[e]);\n        }\n      }\n    }\n\n    return this.Ut = s, this.Ut;\n  }, t.prototype.ps = function (t) {\n    var i = t.index;\n\n    if (this.Ms.get(i) === t) {\n      this.Ms[\"delete\"](i), i <= this.vs && this.vs++, i >= this.ds && this.ds--, this.ds < this.vs && (this.vs = 1 / 0, this.ds = -1 / 0);\n      var n = a(this.ws[t.span]),\n          s = n.indexOf(t);\n      -1 !== s && n.splice(s, 1);\n    }\n  }, t;\n}(),\n    ln = function () {\n  function t() {\n    this.vi = [];\n  }\n\n  return t.prototype.clear = function () {\n    this.vi = [];\n  }, t.prototype.size = function () {\n    return this.vi.length;\n  }, t.prototype.firstIndex = function () {\n    return this.gs(0);\n  }, t.prototype.lastIndex = function () {\n    return this.gs(this.vi.length - 1);\n  }, t.prototype.merge = function (t, i) {\n    if (0 !== i.length) if (0 !== this.vi.length) {\n      var n = t;\n\n      if (n < 0) {\n        var s = Math.abs(n);\n        if (i.length < s) return;\n        this.vi = new Array(s).concat(this.vi);\n\n        for (var h = 0; h < i.length; ++h) {\n          this.vi[t + h] = i[h];\n        }\n      } else {\n        for (var r = n; r < this.vi.length && r - n < i.length; ++r) {\n          this.vi[r] = i[r - n];\n        }\n\n        var u = n + i.length;\n\n        if (u > this.vi.length) {\n          s = u - this.vi.length;\n\n          for (var e = r; e < r + s; ++e) {\n            this.vi.push(i[e - n]);\n          }\n        }\n      }\n    } else this.vi = i;\n  }, t.prototype.valueAt = function (t) {\n    var i = this.ys(t);\n    return null !== i ? this.vi[i] : null;\n  }, t.prototype.indexOf = function (t, i) {\n    if (this.vi.length < 1) return null;\n    if (t > this.vi[this.vi.length - 1].timestamp) return i ? this.vi.length - 1 : null;\n\n    for (var n = 0; n < this.vi.length; ++n) {\n      if (t === this.vi[n].timestamp) return n;\n      if (t < this.vi[n].timestamp) return i ? n : null;\n    }\n\n    return null;\n  }, t.prototype.closestIndexLeft = function (t) {\n    var i = this.vi;\n    if (!i.length) return null;\n    if (Number.isNaN(t.timestamp)) return null;\n    var n = i.length - 1;\n    if (t >= i[n]) return n;\n    var s = 0,\n        h = i[s];\n    if (t < h) return null;\n    if (t === h) return s;\n\n    for (; n > s + 1;) {\n      var r = s + n >> 1,\n          u = i[r];\n      if (u.timestamp > t.timestamp) n = r;else {\n        if (!(u.timestamp < t.timestamp)) return u.timestamp === t.timestamp ? r : null;\n        s = r;\n      }\n    }\n\n    return s;\n  }, t.prototype.gs = function (t) {\n    return 0 <= t && t < this.size() ? t : null;\n  }, t.prototype.ys = function (t) {\n    return 0 <= t && t < this.size() ? t : null;\n  }, t;\n}();\n\n!function (t) {\n  t[t.DefaultAnimationDuration = 400] = \"DefaultAnimationDuration\", t[t.MinBarSpacing = .5] = \"MinBarSpacing\", t[t.MinVisibleBarsCount = 2] = \"MinVisibleBarsCount\";\n}(fn || (fn = {})), function (t) {\n  t[t.Minute = 20] = \"Minute\", t[t.Hour = 30] = \"Hour\", t[t.Day = 40] = \"Day\", t[t.Week = 50] = \"Week\", t[t.Month = 60] = \"Month\", t[t.Year = 70] = \"Year\";\n}(an || (an = {}));\n\nvar vn = function () {\n  function t(t, i, n) {\n    this.Kt = 0, this.ks = null, this.Ns = new ln(), this.pn = null, this.mn = null, this.Ss = new cn(), this.xs = new Map(), this.Ds = null, this.Cs = !0, this.Ts = new rt(), this.Es = new rt(), this.Ls = null, this.As = null, this.Bs = null, this.zs = [], this.$ = i, this.kn = n, this.Vs = i.rightOffset, this.Fs = i.barSpacing, this.F = t, this.Ps();\n  }\n\n  return t.prototype.options = function () {\n    return this.$;\n  }, t.prototype.applyLocalizationOptions = function (t) {\n    v(this.kn, t), this.Is(), this.Ps();\n  }, t.prototype.applyOptions = function (t, i) {\n    v(this.$, t), this.$.fixLeftEdge ? this.Os() : this.Ls = null, void 0 !== t.barSpacing && this.setBarSpacing(t.barSpacing), void 0 !== t.rightOffset && this.setRightOffset(t.rightOffset), this.Is(), this.Ps(), this.Es.fire();\n  }, t.prototype.isEmpty = function () {\n    return 0 === this.Kt || 0 === this.Ns.size();\n  }, t.prototype.visibleBars = function () {\n    return this.Cs && (this.Cs = !1, this.Rs()), this.Ds;\n  }, t.prototype.tickMarks = function () {\n    return this.Ss;\n  }, t.prototype.points = function () {\n    return this.Ns;\n  }, t.prototype.width = function () {\n    return this.Kt;\n  }, t.prototype.setWidth = function (t) {\n    if (isFinite(t) && !(t <= 0) && this.Kt !== t) {\n      if (this.$.lockVisibleTimeRangeOnResize && this.Kt) {\n        var i = this.Fs * t / this.Kt;\n        this.Ws(i);\n      }\n\n      if (null !== this.Ls) if (c(this.visibleBars()).firstBar() <= this.Ls) {\n        var n = this.Kt - t;\n        this.Vs -= Math.round(n / this.Fs) + 1;\n      }\n      this.Kt = t, this.Cs = !0, this.Us(), this.qs();\n    }\n  }, t.prototype.indexToCoordinate = function (t) {\n    if (this.isEmpty() || !M(t)) return 0;\n    var i = this.baseIndex() + this.Vs - t;\n    return this.Kt - (i + .5) * this.Fs;\n  }, t.prototype.indexesToCoordinates = function (t, i) {\n    for (var n = this.baseIndex(), s = void 0 === i ? 0 : i.from, h = void 0 === i ? t.length : i.to, r = s; r < h; r++) {\n      var u = t[r].time,\n          e = n + this.Vs - u,\n          o = this.Kt - (e + .5) * this.Fs;\n      t[r].x = o;\n    }\n  }, t.prototype.indexToUserTime = function (t) {\n    return this.Ss.indexToTime(t);\n  }, t.prototype.coordinateToIndex = function (t) {\n    return Math.ceil(this.js(t));\n  }, t.prototype.setRightOffset = function (t) {\n    this.Cs = !0, this.Vs = t, this.qs(), this.F.recalculateAllPanes(), this.F.lightUpdate();\n  }, t.prototype.barSpacing = function () {\n    return this.Fs;\n  }, t.prototype.setBarSpacing = function (t) {\n    this.Ws(t), this.qs(), this.F.recalculateAllPanes(), this.F.lightUpdate();\n  }, t.prototype.rightOffset = function () {\n    return this.Vs;\n  }, t.prototype.marks = function () {\n    if (this.isEmpty()) return null;\n    if (null !== this.Bs) return this.Bs;\n\n    for (var t = this.Fs, i = 5 * (this.F.options().layout.fontSize + 4), n = Math.round(i / t), s = c(this.visibleBars()), h = Math.max(s.firstBar(), s.firstBar() - n), r = Math.max(s.lastBar(), s.lastBar() - n), u = 0, e = 0, o = this.Ss.build(t, i); e < o.length; e++) {\n      var f = o[e];\n\n      if (h <= f.index && f.index <= r) {\n        var a = this.Ss.indexToTime(f.index);\n\n        if (null !== a) {\n          if (u < this.zs.length) {\n            var l = this.zs[u];\n            l.coord = this.indexToCoordinate(f.index), l.label = this.Hs(a, f.span), l.span = f.span, l.major = !1;\n          } else this.zs.push({\n            coord: this.indexToCoordinate(f.index),\n            label: this.Hs(a, f.span),\n            span: f.span,\n            major: !1\n          });\n\n          u++;\n        }\n      }\n    }\n\n    return this.zs.length = u, this.Bs = this.zs, this.zs;\n  }, t.prototype.reset = function () {\n    this.Cs = !0, this.Ns = new ln(), this.pn = null, this.mn = null, this.Ys(), this.Ss.reset(), this.Ls = null;\n  }, t.prototype.restoreDefault = function () {\n    this.Cs = !0, this.setBarSpacing(this.$.barSpacing), this.setRightOffset(this.$.rightOffset);\n  }, t.prototype.fixLeftEdge = function () {\n    return this.$.fixLeftEdge;\n  }, t.prototype.setBaseIndex = function (t) {\n    this.Cs = !0, this.ks = t, this.qs(), this.Os();\n  }, t.prototype.zoom = function (t, i) {\n    var n = this.js(t),\n        s = this.barSpacing(),\n        h = s + i * (s / 10);\n    this.setBarSpacing(h), this.$.rightBarStaysOnScroll || this.setRightOffset(this.rightOffset() + (n - this.js(t)));\n  }, t.prototype.startScale = function (t) {\n    this.pn && this.endScroll(), null === this.mn && null === this.As && (this.isEmpty() || (this.mn = t, this.Ks()));\n  }, t.prototype.scaleTo = function (t) {\n    if (null !== this.As) {\n      var i = ot(this.Kt - t, 0, this.Kt),\n          n = ot(this.Kt - c(this.mn), 0, this.Kt);\n      0 !== i && 0 !== n && this.setBarSpacing(this.As.barSpacing * i / n);\n    }\n  }, t.prototype.endScale = function () {\n    null !== this.mn && (this.mn = null, this.Ys());\n  }, t.prototype.startScroll = function (t) {\n    null === this.pn && null === this.As && (this.isEmpty() || (this.pn = t, this.Ks()));\n  }, t.prototype.scrollTo = function (t) {\n    if (this.Cs = !0, null !== this.pn) {\n      var i = (this.pn - t) / this.barSpacing();\n      this.Vs = c(this.As).rightOffset + i, this.Cs = !0, this.qs();\n    }\n  }, t.prototype.endScroll = function () {\n    null !== this.pn && (this.pn = null, this.Ys());\n  }, t.prototype.scrollToRealTime = function () {\n    this.scrollToOffsetAnimated(this.$.rightOffset);\n  }, t.prototype.scrollToOffsetAnimated = function (t, i) {\n    var n = this;\n    if (void 0 === i && (i = 400), !isFinite(t)) throw new RangeError(\"offset is required and must be finite number\");\n    if (!isFinite(i) || i <= 0) throw new RangeError(\"animationDuration (optional) must be finite positive number\");\n\n    var s = this.Vs,\n        h = new Date().getTime(),\n        r = function r() {\n      var u = (new Date().getTime() - h) / i,\n          e = u >= 1,\n          o = e ? t : s + (t - s) * u;\n      n.setRightOffset(o), e || setTimeout(r, 20);\n    };\n\n    r();\n  }, t.prototype.update = function (t, i, n) {\n    if (this.Cs = !0, i.length > 0) {\n      var s = this.Ns.size();\n      this.Ns.merge(t, i), this.Vs < 0 && this.Ns.size() === s + 1 && (this.Vs -= 1, this.Cs = !0);\n    }\n\n    this.Ss.merge(n), this.qs();\n  }, t.prototype.visibleBarsChanged = function () {\n    return this.Ts;\n  }, t.prototype.optionsApplied = function () {\n    return this.Es;\n  }, t.prototype.baseIndex = function () {\n    return this.ks || 0;\n  }, t.prototype.setVisibleRange = function (t) {\n    var i = t.count();\n    this.Ws(this.Kt / i), this.Vs = t.lastBar() - this.baseIndex(), this.qs(), this.Cs = !0, this.F.recalculateAllPanes(), this.F.lightUpdate();\n  }, t.prototype.fitContent = function () {\n    var t = this.Ns.firstIndex(),\n        i = this.Ns.lastIndex();\n    null !== t && null !== i && this.setVisibleRange(new un(t, i + this.$.rightOffset));\n  }, t.prototype.setTimePointsRange = function (t) {\n    var i = this.points(),\n        n = i.firstIndex(),\n        s = i.lastIndex();\n\n    if (null !== n && null !== s) {\n      var h = c(i.valueAt(n)).timestamp,\n          r = c(i.valueAt(s)).timestamp,\n          u = new un(c(i.indexOf(Math.max(h, t.from.timestamp), !0)), c(i.indexOf(Math.min(r, t.to.timestamp), !0)));\n      this.setVisibleRange(u);\n    }\n  }, t.prototype.formatDateTime = function (t) {\n    return void 0 !== this.kn.timeFormatter ? this.kn.timeFormatter(t.businessDay || t.timestamp) : this.$s.format(new Date(1e3 * t.timestamp));\n  }, t.prototype._s = function (t) {\n    return (this.Kt + 1 - t) / this.Fs;\n  }, t.prototype.js = function (t) {\n    var i = this._s(t),\n        n = this.baseIndex() + this.Vs - i;\n\n    return Math.round(1e6 * n) / 1e6;\n  }, t.prototype.Ws = function (t) {\n    var i = this.Fs;\n    this.Fs = t, this.Us(), i !== this.Fs && (this.Cs = !0, this.Xs());\n  }, t.prototype.Rs = function () {\n    if (this.isEmpty()) this.Zs(null);else {\n      var t = this.baseIndex(),\n          i = Math.ceil(this.Kt / this.Fs) - 1,\n          n = Math.round(this.Vs + t),\n          s = n - i;\n      this.Zs(new un(s, n));\n    }\n  }, t.prototype.Us = function () {\n    if (this.Fs < .5 && (this.Fs = .5, this.Cs = !0), 0 !== this.Kt) {\n      var t = .5 * this.Kt;\n      this.Fs > t && (this.Fs = t, this.Cs = !0);\n    }\n  }, t.prototype.qs = function () {\n    var t = this.Js();\n    this.Vs > t && (this.Vs = t, this.Cs = !0);\n    var i = this.Gs();\n    null !== i && this.Vs < i && (this.Vs = i, this.Cs = !0);\n  }, t.prototype.Gs = function () {\n    var t = this.Ns.firstIndex(),\n        i = this.ks;\n    if (null === t || null === i) return null;\n\n    if (null !== this.Ls) {\n      var n = this.Kt / this.Fs;\n      return this.Ls - i + n - 1;\n    }\n\n    return t - i - 1 + Math.min(2, this.Ns.size());\n  }, t.prototype.Js = function () {\n    return this.Kt / this.Fs - Math.min(2, this.Ns.size());\n  }, t.prototype.Ks = function () {\n    this.As = {\n      barSpacing: this.barSpacing(),\n      rightOffset: this.rightOffset()\n    };\n  }, t.prototype.Ys = function () {\n    this.As = null;\n  }, t.prototype.Hs = function (t, i) {\n    var n = this,\n        s = this.xs.get(i);\n    return void 0 === s && (s = new en(function (t) {\n      return n.Qs(t, i);\n    }), this.xs.set(i, s)), void 0 === t.businessDay ? s.format(new Date(1e3 * t.timestamp)) : s.format(new Date(Date.UTC(t.businessDay.year, t.businessDay.month - 1, t.businessDay.day)));\n  }, t.prototype.Qs = function (t, i) {\n    var n = {},\n        s = this.$.timeVisible;\n    return i < 20 && s ? (n.hour12 = !1, n.hour = \"2-digit\", n.minute = \"2-digit\", this.$.secondsVisible && (n.second = \"2-digit\")) : i < 40 && s ? (n.hour12 = !1, n.hour = \"2-digit\", n.minute = \"2-digit\") : i < 50 ? n.day = \"numeric\" : i < 60 ? n.day = \"numeric\" : i < 70 ? n.month = \"short\" : n.year = \"numeric\", new Date(t.getUTCFullYear(), t.getUTCMonth(), t.getUTCDate(), t.getUTCHours(), t.getUTCMinutes(), t.getUTCSeconds(), t.getUTCMilliseconds()).toLocaleString(this.kn.locale, n);\n  }, t.prototype.Zs = function (t) {\n    if (null !== t || null !== this.Ds) {\n      var i = this.Ds;\n      this.Ds = t, (null === this.Ds || null !== i && !this.Ds.equals(i)) && this.Ts.fire(), this.Xs();\n    }\n  }, t.prototype.Xs = function () {\n    this.Bs = null;\n  }, t.prototype.Is = function () {\n    this.Xs(), this.xs.clear();\n  }, t.prototype.Ps = function () {\n    var t = this.kn.dateFormat;\n    this.$.timeVisible ? this.$s = new rn({\n      dateFormat: t,\n      timeFormat: this.$.secondsVisible ? \"%h:%m:%s\" : \"%h:%m\",\n      dateTimeSeparator: \"   \",\n      locale: this.kn.locale\n    }) : this.$s = new nn(t, this.kn.locale);\n  }, t.prototype.Os = function () {\n    if (this.$.fixLeftEdge) {\n      var t = this.Ns.firstIndex();\n\n      if (null !== t && this.Ls !== t) {\n        this.Ls = t;\n        var i = c(this.visibleBars()).firstBar() - t;\n\n        if (i < 0) {\n          var n = this.Vs - i - 1;\n          this.setRightOffset(n);\n        }\n      }\n    }\n  }, t;\n}(),\n    dn = function (t) {\n  function i(i) {\n    var n = t.call(this) || this;\n    return n.th = new Map(), n.m = i, n;\n  }\n\n  return u(i, t), i.prototype._drawImpl = function (t) {}, i.prototype._drawBackgroundImpl = function (t) {\n    if (this.m.visible) {\n      t.save();\n\n      for (var i = 0, n = 0, s = this.m.lines; n < s.length; n++) {\n        if (0 !== (o = s[n]).text.length) {\n          t.font = o.font;\n          var h = this.ih(t, o.text);\n          h > this.m.width ? o.zoom = this.m.width / h : o.zoom = 1, i += o.lineHeight * o.zoom;\n        }\n      }\n\n      var r = 0;\n\n      switch (this.m.vertAlign) {\n        case \"top\":\n          r = 0;\n          break;\n\n        case \"center\":\n          r = Math.max((this.m.height - i) / 2, 0);\n          break;\n\n        case \"bottom\":\n          r = Math.max(this.m.height - i, 0);\n      }\n\n      t.fillStyle = this.m.color;\n\n      for (var u = 0, e = this.m.lines; u < e.length; u++) {\n        var o = e[u];\n        t.save();\n        var f = 0;\n\n        switch (this.m.horzAlign) {\n          case \"left\":\n            t.textAlign = \"left\", f = o.lineHeight / 2;\n            break;\n\n          case \"center\":\n            t.textAlign = \"center\", f = this.m.width / 2;\n            break;\n\n          case \"right\":\n            t.textAlign = \"right\", f = this.m.width - 1 - o.lineHeight / 2;\n        }\n\n        t.translate(f, r), t.textBaseline = \"top\", t.font = o.font, t.scale(o.zoom, o.zoom), t.fillText(o.text, 0, o.vertOffset), t.restore(), r += o.lineHeight * o.zoom;\n      }\n\n      t.restore();\n    }\n  }, i.prototype.ih = function (t, i) {\n    var n = this.nh(t.font),\n        s = n.get(i);\n    return void 0 === s && (s = t.measureText(i).width, n.set(i, s)), s;\n  }, i.prototype.nh = function (t) {\n    var i = this.th.get(t);\n    return void 0 === i && (i = new Map(), this.th.set(t, i)), i;\n  }, i;\n}(N),\n    Mn = function () {\n  function t(t) {\n    this.o = !0, this.p = {\n      visible: !1,\n      color: \"\",\n      height: 0,\n      width: 0,\n      lines: [],\n      vertAlign: \"center\",\n      horzAlign: \"center\"\n    }, this.g = new dn(this.p), this.k = t;\n  }\n\n  return t.prototype.update = function () {\n    this.o = !0;\n  }, t.prototype.renderer = function (t, i) {\n    return this.o && (this.M(t, i), this.o = !1), this.g;\n  }, t.prototype.M = function (t, i) {\n    var n = this.k.options(),\n        s = this.p;\n    s.visible = n.visible, s.visible && (s.color = n.color, s.width = i, s.height = t, s.horzAlign = n.horzAlign, s.vertAlign = n.vertAlign, s.lines = [{\n      text: n.text,\n      font: Oi(n.fontSize),\n      lineHeight: 1.2 * n.fontSize,\n      vertOffset: 0,\n      zoom: 0\n    }]);\n  }, t;\n}(),\n    wn = function (t) {\n  function i(i, n) {\n    var s = t.call(this) || this;\n    return s.$ = n, s.J = new Mn(s), s;\n  }\n\n  return u(i, t), i.prototype.paneViews = function () {\n    return [this.J];\n  }, i.prototype.options = function () {\n    return this.$;\n  }, i.prototype.updateAllViews = function () {\n    this.J.update();\n  }, i;\n}(J),\n    bn = function () {\n  function t(t, i) {\n    this.sh = [], this.hh = [], this.Kt = 0, this.rh = null, this.uh = null, this.eh = new rt(), this.oh = new rt(), this.fh = t, this.$ = i, this.ah = new Wi(this), this.$n = new vn(this, i.timeScale, this.$.localization), this.lh = new ji(), this.v = new G(this, i.crosshair), this.vh = new Yi(i.crosshair), this.dh = new wn(this, i.watermark), this.createPane(), this.sh[0].setStretchFactor(2e3), this.sh[0].addDataSource(this.dh, !0, !1);\n  }\n\n  return t.prototype.fullUpdate = function () {\n    this.Mh(new Hi(3));\n  }, t.prototype.lightUpdate = function () {\n    this.Mh(new Hi(2));\n  }, t.prototype.updateSource = function (t) {\n    var i = this.wh(t);\n    this.Mh(i);\n  }, t.prototype.hoveredSource = function () {\n    return this.uh;\n  }, t.prototype.setHoveredSource = function (t) {\n    var i = this.uh;\n    this.uh = t, null !== i && this.updateSource(i.source), null !== t && this.updateSource(t.source);\n  }, t.prototype.options = function () {\n    return this.$;\n  }, t.prototype.applyOptions = function (t) {\n    v(this.$, t), void 0 !== t.priceScale && (this.mainPriceScale().applyOptions(t.priceScale), this.eh.fire()), void 0 !== t.timeScale && this.$n.applyOptions(t.timeScale), void 0 !== t.localization && (this.$n.applyLocalizationOptions(t.localization), this.mainPriceScale().updateFormatter()), this.fullUpdate();\n  }, t.prototype.updateAllPaneViews = function () {\n    this.sh.forEach(function (t) {\n      return t.updateAllViews();\n    }), this.updateCrosshair();\n  }, t.prototype.timeScale = function () {\n    return this.$n;\n  }, t.prototype.panes = function () {\n    return this.sh;\n  }, t.prototype.gridSource = function () {\n    return this.lh;\n  }, t.prototype.watermarkSource = function () {\n    return this.dh;\n  }, t.prototype.crosshairSource = function () {\n    return this.v;\n  }, t.prototype.crosshairMoved = function () {\n    return this.oh;\n  }, t.prototype.width = function () {\n    return this.Kt;\n  }, t.prototype.setPaneHeight = function (t, i) {\n    t.setHeight(i), this.recalculateAllPanes(), this.lightUpdate();\n  }, t.prototype.setWidth = function (t) {\n    this.Kt = t, this.$n.setWidth(this.Kt), this.sh.forEach(function (i) {\n      return i.setWidth(t);\n    }), this.recalculateAllPanes();\n  }, t.prototype.createPane = function (t) {\n    var i = new Ki(this.$n, this);\n    void 0 !== t ? this.sh.splice(t, 0, i) : this.sh.push(i);\n    var n = void 0 === t ? this.sh.length - 1 : t,\n        s = new Hi(3);\n    return s.invalidatePane(n, {\n      level: 0,\n      autoScale: !0\n    }), this.invalidate(s), i;\n  }, t.prototype.startScalePrice = function (t, i, n) {\n    t.startScalePrice(i, n);\n  }, t.prototype.scalePriceTo = function (t, i, n) {\n    t.scalePriceTo(i, n), this.updateCrosshair(), this.Mh(this.bh(t, 2));\n  }, t.prototype.endScalePrice = function (t, i) {\n    t.endScalePrice(i), this.Mh(this.bh(t, 2));\n  }, t.prototype.startScrollPrice = function (t, i, n) {\n    i.isAutoScale() || t.startScrollPrice(i, n);\n  }, t.prototype.scrollPriceTo = function (t, i, n) {\n    i.isAutoScale() || (t.scrollPriceTo(i, n), this.updateCrosshair(), this.Mh(this.bh(t, 2)));\n  }, t.prototype.endScrollPrice = function (t, i) {\n    i.isAutoScale() || (t.endScrollPrice(i), this.Mh(this.bh(t, 2)));\n  }, t.prototype.setPriceAutoScale = function (t, i, n) {\n    t.setPriceAutoScale(i, n), this.Mh(this.bh(t, 2));\n  }, t.prototype.resetPriceScale = function (t, i) {\n    t.resetPriceScale(i), this.Mh(this.bh(t, 2));\n  }, t.prototype.startScaleTime = function (t) {\n    this.$n.startScale(t);\n  }, t.prototype.zoomTime = function (t, i) {\n    var n = this.timeScale();\n\n    if (!n.isEmpty() && 0 !== i) {\n      var s = n.width();\n      t = Math.max(1, Math.min(t, s)), n.zoom(t, i), this.updateCrosshair(), this.recalculateAllPanes(), this.lightUpdate();\n    }\n  }, t.prototype.scrollChart = function (t) {\n    this.startScrollTime(0), this.scrollTimeTo(t), this.endScrollTime();\n  }, t.prototype.scaleTimeTo = function (t) {\n    this.$n.scaleTo(t), this.recalculateAllPanes(), this.updateCrosshair(), this.lightUpdate();\n  }, t.prototype.endScaleTime = function () {\n    this.$n.endScale(), this.lightUpdate();\n  }, t.prototype.startScrollTime = function (t) {\n    this.rh = t, this.$n.startScroll(t);\n  }, t.prototype.scrollTimeTo = function (t) {\n    var i = !1;\n    return null !== this.rh && Math.abs(t - this.rh) > 20 && (this.rh = null, i = !0), this.$n.scrollTo(t), this.recalculateAllPanes(), this.updateCrosshair(), this.lightUpdate(), i;\n  }, t.prototype.endScrollTime = function () {\n    this.$n.endScroll(), this.lightUpdate(), this.rh = null;\n  }, t.prototype.resetTimeScale = function () {\n    this.$n.restoreDefault(), this.recalculateAllPanes(), this.updateCrosshair(), this.lightUpdate();\n  }, t.prototype.invalidate = function (t) {\n    this.fh && this.fh(t), this.lh.invalidate(), this.lightUpdate();\n  }, t.prototype.dataSources = function () {\n    return this.sh.reduce(function (t, i) {\n      return t.concat(i.dataSources());\n    }, []);\n  }, t.prototype.serieses = function () {\n    return this.hh;\n  }, t.prototype.setAndSaveCurrentPosition = function (t, i, n) {\n    this.v.saveOriginCoord(t, i);\n    var s = NaN,\n        h = this.$n.coordinateToIndex(t),\n        r = this.$n.visibleBars();\n\n    if (null !== r && (h = Math.min(Math.max(r.firstBar(), h), r.lastBar())), null !== n.mainDataSource()) {\n      var u = n.defaultPriceScale(),\n          e = u.firstValue();\n      null !== e && (s = u.coordinateToPrice(i, e)), s = this.vh.align(s, h, n);\n    }\n\n    this.v.setPosition(h, s, n), this.mh(), this.oh.fire(this.v.appliedIndex(), {\n      x: t,\n      y: i\n    });\n  }, t.prototype.clearCurrentPosition = function () {\n    this.crosshairSource().clearPosition(), this.mh(), this.oh.fire(null, null);\n  }, t.prototype.updateCrosshair = function () {\n    var t = this.v.pane();\n\n    if (null !== t) {\n      var i = this.v.originCoordX(),\n          n = this.v.originCoordY();\n      this.setAndSaveCurrentPosition(i, n, t);\n    }\n  }, t.prototype.updateTimeScale = function (t, i, n, s) {\n    s && this.$n.reset(), this.$n.update(t, i, n);\n  }, t.prototype.updateTimeScaleBaseIndex = function (t) {\n    var i = this.hh.reduce(function (t, i) {\n      var n = i.bars();\n      if (n.isEmpty()) return t;\n      var s = c(n.lastIndex());\n      return void 0 === t ? s : Math.max(s, t);\n    }, void 0);\n\n    if (void 0 !== i) {\n      var n = this.$n,\n          s = n.baseIndex(),\n          h = n.visibleBars();\n\n      if (null !== h) {\n        var r = h.contains(s);\n\n        if (void 0 !== t && t > 0 && !r) {\n          var u = i - s;\n          n.setRightOffset(n.rightOffset() - u);\n        }\n      }\n\n      n.setBaseIndex(i);\n    }\n\n    this.updateCrosshair(), this.recalculateAllPanes(), this.lightUpdate();\n  }, t.prototype.recalculatePane = function (t) {\n    null !== t && t.recalculate();\n  }, t.prototype.paneForSource = function (t) {\n    var i = this.sh.find(function (i) {\n      return i.orderedSources().includes(t);\n    });\n    return void 0 === i ? null : i;\n  }, t.prototype.recalculateAllPanes = function () {\n    this.sh.forEach(function (t) {\n      return t.recalculate();\n    }), this.updateAllPaneViews();\n  }, t.prototype.destroy = function () {\n    this.sh.forEach(function (t) {\n      return t.destroy();\n    }), this.sh.length = 0, this.$.localization.priceFormatter = void 0, this.$.localization.timeFormatter = void 0;\n  }, t.prototype.setPriceAutoScaleForAllMainSources = function () {\n    this.sh.map(function (t) {\n      return t.mainDataSource();\n    }).forEach(function (t) {\n      null !== t && c(t.priceScale()).setMode({\n        autoScale: !0\n      });\n    });\n  }, t.prototype.rendererOptionsProvider = function () {\n    return this.ah;\n  }, t.prototype.priceAxisRendererOptions = function () {\n    return this.ah.options();\n  }, t.prototype.mainPriceScaleOptionsChanged = function () {\n    return this.eh;\n  }, t.prototype.mainPriceScale = function () {\n    return this.sh[0].defaultPriceScale();\n  }, t.prototype.createSeries = function (t, i) {\n    var n = this.sh[0],\n        s = this.ph(i, t, n);\n    return this.hh.push(s), 1 === this.hh.length ? this.fullUpdate() : this.lightUpdate(), s;\n  }, t.prototype.removeSeries = function (t) {\n    var i = this.paneForSource(t),\n        n = this.hh.indexOf(t);\n    f(-1 !== n, \"Series not found\"), this.hh.splice(n, 1), c(i).removeDataSource(t), t.destroy && t.destroy();\n  }, t.prototype.fitContent = function () {\n    var t = new Hi(2);\n    t.setFitContent(), this.Mh(t);\n  }, t.prototype.setTargetTimeRange = function (t) {\n    var i = new Hi(2);\n    i.setTargetTimeRange(t), this.Mh(i);\n  }, t.prototype.bh = function (t, i) {\n    var n = new Hi(i);\n\n    if (null !== t) {\n      var s = this.sh.indexOf(t);\n      n.invalidatePane(s, {\n        level: i\n      });\n    }\n\n    return n;\n  }, t.prototype.wh = function (t, i) {\n    return void 0 === i && (i = 2), this.bh(this.paneForSource(t), i);\n  }, t.prototype.Mh = function (t) {\n    this.fh && this.fh(t), this.lh.invalidate();\n  }, t.prototype.mh = function () {\n    this.Mh(new Hi(1));\n  }, t.prototype.ph = function (t, i, n) {\n    var s = new Ci(this, t, i);\n    return n.addDataSource(s, Boolean(t.overlay), !1), t.overlay && s.applyOptions(t), s;\n  }, t;\n}(),\n    mn = function () {\n  function t(t, i) {\n    this.w = t, this.h = i;\n  }\n\n  return t.prototype.equals = function (t) {\n    return this.w === t.w && this.h === t.h;\n  }, t;\n}();\n\nfunction pn(t) {\n  return t.ownerDocument && t.ownerDocument.defaultView && t.ownerDocument.defaultView.devicePixelRatio || 1;\n}\n\nfunction gn(t) {\n  var i = c(t.getContext(\"2d\"));\n  return i.setTransform(1, 0, 0, 1, 0, 0), i;\n}\n\nfunction yn(t) {\n  var i = t.createElement(\"canvas\");\n  return function (t) {\n    t.style.userSelect = \"none\", t.style.webkitUserSelect = \"none\", t.style.msUserSelect = \"none\", t.style.MozUserSelect = \"none\", t.style.webkitTapHighlightColor = \"transparent\";\n  }(i), i;\n}\n\nfunction kn(t, i) {\n  var n = yn(t),\n      s = pn(n);\n  return n.style.width = i.w + \"px\", n.style.height = i.h + \"px\", n.width = i.w * s, n.height = i.h * s, n;\n}\n\nfunction Nn(i, n) {\n  var s = yn(c(i.ownerDocument));\n  i.appendChild(s);\n  var h = t(s);\n  return h.resizeCanvas({\n    width: n.w,\n    height: n.h\n  }), h;\n}\n\nvar Sn,\n    xn = !!navigator.maxTouchPoints || !!navigator.msMaxTouchPoints || \"ontouchstart\" in window || Boolean(window.DocumentTouch && document instanceof window.DocumentTouch),\n    Dn = \"onorientationchange\" in window && xn,\n    Cn = /Android/i.test(navigator.userAgent),\n    Tn = /iPhone|iPad|iPod|AppleWebKit.+Mobile/i.test(navigator.userAgent),\n    En = Cn || Tn;\n!function (t) {\n  t[t.ResetClick = 500] = \"ResetClick\", t[t.LongTap = 240] = \"LongTap\";\n}(Sn || (Sn = {}));\n\nvar Ln = function () {\n  function t(t, i, n) {\n    this.gh = 0, this.yh = null, this.kh = null, this.Nh = !1, this.Sh = null, this.xh = !1, this.Dh = !1, this.Ch = null, this.Th = null, this.Eh = null, this.Lh = null, this.Ah = 0, this.Bh = !1, this.zh = !1, this.Vh = !1, this.Fh = t, this.Ph = i, this.$ = n, this.Ih();\n  }\n\n  return t.prototype.destroy = function () {\n    null !== this.Ch && (this.Ch(), this.Ch = null), null !== this.Th && (this.Th(), this.Th = null), null !== this.Eh && (this.Eh(), this.Eh = null), this.Oh(), this.Rh();\n  }, t.prototype.Wh = function (t) {\n    var i = this;\n    this.Th && this.Th();\n    var n = this.Uh.bind(this);\n    this.Th = function () {\n      i.Fh.removeEventListener(\"mousemove\", n);\n    }, this.Fh.addEventListener(\"mousemove\", n), zn(t) && this.Uh(t);\n    var s = this.qh(t);\n    this.jh(s, this.Ph.mouseEnterEvent);\n  }, t.prototype.Rh = function () {\n    null !== this.yh && clearTimeout(this.yh), this.gh = 0, this.yh = null;\n  }, t.prototype.Uh = function (t) {\n    if (!this.Vh || zn(t)) {\n      var i = this.qh(t);\n      this.jh(i, this.Ph.mouseMoveEvent);\n    }\n  }, t.prototype.Hh = function (t) {\n    if (!(\"button\" in t && 0 !== t.button) && null === this.Lh) {\n      var i = zn(t);\n\n      if (!this.zh || !i) {\n        this.Bh = !0;\n        var n = this.qh(t),\n            s = l(this.Sh),\n            h = Math.abs(s.x - n.pageX),\n            r = Math.abs(s.y - n.pageY),\n            u = h + r > 5;\n\n        if (u || !i) {\n          if (u && !this.xh && i) {\n            var e = .5 * h,\n                o = r >= e && !this.$.treatVertTouchDragAsPageScroll,\n                f = e > r && !this.$.treatHorzTouchDragAsPageScroll;\n            o || f || (this.zh = !0);\n          }\n\n          u && (this.xh = !0, this.Dh = !0, i && this.Oh()), this.zh || (this.jh(n, this.Ph.pressedMouseMoveEvent), i && Vn(t));\n        }\n      }\n    }\n  }, t.prototype.Yh = function (t) {\n    if (!(\"button\" in t && 0 !== t.button)) {\n      var i = this.qh(t);\n      this.Oh(), this.Sh = null, this.Vh = !1, this.Eh && (this.Eh(), this.Eh = null), zn(t) && this.Kh(t), this.jh(i, this.Ph.mouseUpEvent), ++this.gh, this.yh && this.gh > 1 ? (this.jh(i, this.Ph.mouseDoubleClickEvent), this.Rh()) : this.Dh || this.jh(i, this.Ph.mouseClickEvent), zn(t) && (Vn(t), this.Kh(t), 0 === t.touches.length && (this.Nh = !1));\n    }\n  }, t.prototype.Oh = function () {\n    null !== this.kh && (clearTimeout(this.kh), this.kh = null);\n  }, t.prototype.$h = function (t) {\n    if (!(\"button\" in t && 0 !== t.button)) {\n      var i = this.qh(t);\n      this.Dh = !1, this.xh = !1, this.zh = !1, zn(t) && this.Wh(t), this.Sh = {\n        x: i.pageX,\n        y: i.pageY\n      }, this.Eh && (this.Eh(), this.Eh = null);\n      var n = this.Hh.bind(this),\n          s = this.Yh.bind(this),\n          h = this.Fh.ownerDocument.documentElement;\n      this.Eh = function () {\n        h.removeEventListener(\"touchmove\", n), h.removeEventListener(\"touchend\", s), h.removeEventListener(\"mousemove\", n), h.removeEventListener(\"mouseup\", s);\n      }, h.addEventListener(\"touchmove\", n, {\n        passive: !1\n      }), h.addEventListener(\"touchend\", s, {\n        passive: !1\n      }), this.Oh(), zn(t) && 1 === t.touches.length ? this.kh = setTimeout(this._h.bind(this, t), 240) : (h.addEventListener(\"mousemove\", n), h.addEventListener(\"mouseup\", s)), this.Vh = !0, this.jh(i, this.Ph.mouseDownEvent), this.yh || (this.gh = 0, this.yh = setTimeout(this.Rh.bind(this), 500));\n    }\n  }, t.prototype.Ih = function () {\n    var t = this;\n    this.Fh.addEventListener(\"mouseenter\", this.Wh.bind(this)), this.Fh.addEventListener(\"touchcancel\", this.Oh.bind(this));\n\n    var i = this.Fh.ownerDocument,\n        n = function n(i) {\n      t.Ph.mouseDownOutsideEvent && (i.target && t.Fh.contains(i.target) || t.Ph.mouseDownOutsideEvent());\n    };\n\n    this.Ch = function () {\n      i.removeEventListener(\"mousedown\", n), i.removeEventListener(\"touchstart\", n);\n    }, i.addEventListener(\"mousedown\", n), i.addEventListener(\"touchstart\", n, {\n      passive: !0\n    }), this.Fh.addEventListener(\"mouseleave\", this.Kh.bind(this)), this.Fh.addEventListener(\"touchstart\", this.$h.bind(this), {\n      passive: !0\n    }), Dn || this.Fh.addEventListener(\"mousedown\", this.$h.bind(this)), this.Xh(), this.Fh.addEventListener(\"touchmove\", function () {}, {\n      passive: !1\n    });\n  }, t.prototype.Xh = function () {\n    var t = this;\n    void 0 === this.Ph.pinchStartEvent && void 0 === this.Ph.pinchEvent && void 0 === this.Ph.pinchEndEvent || (this.Fh.addEventListener(\"touchstart\", function (i) {\n      return t.Zh(i.touches);\n    }, {\n      passive: !0\n    }), this.Fh.addEventListener(\"touchmove\", function (i) {\n      if (2 === i.touches.length && null !== t.Lh && void 0 !== t.Ph.pinchEvent) {\n        var n = Bn(i.touches[0], i.touches[1]) / t.Ah;\n        t.Ph.pinchEvent(t.Lh, n), Vn(i);\n      }\n    }, {\n      passive: !1\n    }), this.Fh.addEventListener(\"touchend\", function (i) {\n      t.Zh(i.touches);\n    }));\n  }, t.prototype.Zh = function (t) {\n    1 === t.length && (this.Bh = !1), 2 !== t.length || this.Bh || this.Nh ? this.Jh() : this.Gh(t);\n  }, t.prototype.Gh = function (t) {\n    var i = An(this.Fh);\n    this.Lh = {\n      x: (t[0].clientX - i.left + (t[1].clientX - i.left)) / 2,\n      y: (t[0].clientY - i.top + (t[1].clientY - i.top)) / 2\n    }, this.Ah = Bn(t[0], t[1]), void 0 !== this.Ph.pinchStartEvent && this.Ph.pinchStartEvent(), this.Oh();\n  }, t.prototype.Jh = function () {\n    null !== this.Lh && (this.Lh = null, void 0 !== this.Ph.pinchEndEvent && this.Ph.pinchEndEvent());\n  }, t.prototype.Kh = function (t) {\n    this.Th && this.Th();\n    var i = this.qh(t);\n    this.jh(i, this.Ph.mouseLeaveEvent);\n  }, t.prototype._h = function (t) {\n    var i = this.qh(t);\n    this.jh(i, this.Ph.longTapEvent), this.Dh = !0, this.Nh = !0;\n  }, t.prototype.jh = function (t, i) {\n    i && i.call(this.Ph, t);\n  }, t.prototype.qh = function (t) {\n    var i;\n    i = \"touches\" in t && t.touches.length ? t.touches[0] : \"changedTouches\" in t && t.changedTouches.length ? t.changedTouches[0] : t;\n    var n = An(this.Fh);\n    return {\n      clientX: i.clientX,\n      clientY: i.clientY,\n      pageX: i.pageX,\n      pageY: i.pageY,\n      screenX: i.screenX,\n      screenY: i.screenY,\n      localX: i.clientX - n.left,\n      localY: i.clientY - n.top,\n      ctrlKey: t.ctrlKey,\n      altKey: t.altKey,\n      shiftKey: t.shiftKey,\n      metaKey: t.metaKey,\n      type: t.type.startsWith(\"mouse\") ? \"mouse\" : \"touch\",\n      target: i.target,\n      view: t.view\n    };\n  }, t;\n}();\n\nfunction An(t) {\n  return t.getBoundingClientRect() || {\n    left: 0,\n    top: 0\n  };\n}\n\nfunction Bn(t, i) {\n  var n = t.clientX - i.clientX,\n      s = t.clientY - i.clientY;\n  return Math.sqrt(n * n + s * s);\n}\n\nfunction zn(t) {\n  return Boolean(t.touches);\n}\n\nfunction Vn(t) {\n  t.cancelable && t.preventDefault();\n}\n\nvar Fn,\n    Pn = function () {\n  function t(t, i, n, s) {\n    if (this.Qh = 0, this.tr = 0, this.ir = 0, this.nr = 0, this.sr = 0, this.hr = 0, this.rr = 0, this.ur = t, this.er = t.paneWidgets()[i], this.or = t.paneWidgets()[n], this.ar = document.createElement(\"tr\"), this.ar.style.height = \"1px\", this.cr = document.createElement(\"td\"), this.cr.style.padding = \"0\", this.cr.setAttribute(\"colspan\", \"3\"), this.lr(), this.ar.appendChild(this.cr), s) this.vr = null, this.dr = null;else {\n      this.vr = document.createElement(\"div\"), this.vr.style.position = \"absolute\", this.vr.style.zIndex = \"50\", this.vr.style.height = \"5px\", this.vr.style.width = \"100%\", this.vr.style.backgroundColor = \"rgba(255, 255, 255, 0.02)\", this.vr.style.cursor = \"ns-resize\", this.cr.appendChild(this.vr);\n      var h = {\n        mouseDownEvent: this.Mr.bind(this),\n        pressedMouseMoveEvent: this.wr.bind(this),\n        mouseUpEvent: this.br.bind(this)\n      };\n      this.dr = new Ln(this.vr, h, {\n        treatVertTouchDragAsPageScroll: !1,\n        treatHorzTouchDragAsPageScroll: !0\n      });\n    }\n  }\n\n  return t.prototype.destroy = function () {\n    null !== this.dr && this.dr.destroy();\n  }, t.prototype.getElement = function () {\n    return this.ar;\n  }, t.prototype.getSize = function () {\n    return new mn(this.er.getSize().w, 1);\n  }, t.prototype.getImage = function () {\n    var t = this.getSize(),\n        i = kn(document, t),\n        n = gn(i);\n    return n.fillStyle = this.ur.options().timeScale.borderColor, n.fillRect(0, 0, t.w, t.h), i;\n  }, t.prototype.update = function () {\n    this.lr();\n  }, t.prototype.lr = function () {\n    this.cr.style.background = this.ur.options().timeScale.borderColor;\n  }, t.prototype.Mr = function (t) {\n    this.Qh = t.pageY, this.tr = 0, this.ir = this.er.getSize().h + this.or.getSize().h, this.nr = this.er.stretchFactor() + this.or.stretchFactor(), this.sr = 30, this.hr = this.ir - this.sr, this.rr = this.nr / this.ir;\n  }, t.prototype.wr = function (t) {\n    this.tr = t.pageY - this.Qh;\n    var i = this.er.getSize().h,\n        n = ot(i + this.tr, this.sr, this.hr) * this.rr,\n        s = this.nr - n;\n    this.er.setStretchFactor(n), this.or.setStretchFactor(s), this.ur.adjustSize(), this.er.getSize().h !== i && (this.Qh = t.pageY);\n  }, t.prototype.br = function (t) {\n    this.Qh = 0, this.tr = 0, this.ir = 0, this.nr = 0, this.sr = 0, this.hr = 0, this.rr = 0;\n  }, t;\n}(),\n    In = function () {\n  function t(t, i, n, s) {\n    this.$t = new Kt(200), this.Zt = 0, this.mr = \"\", this.pr = \"\", this.gr = [], this.yr = new Map(), this.Zt = t, this.mr = i, this.pr = Oi(t, n, s);\n  }\n\n  return t.prototype.destroy = function () {\n    delete this.$t, this.gr = [], this.yr.clear();\n  }, t.prototype.paintTo = function (t, i, n, s, h) {\n    var r = this.kr(t, i);\n\n    if (\"left\" !== h) {\n      var u = pn(t.canvas);\n      n -= Math.floor(r.textWidth * u);\n    }\n\n    s -= Math.floor(r.height / 2), t.drawImage(r.canvas, n, s, r.width, r.height);\n  }, t.prototype.kr = function (t, i) {\n    var n,\n        s = this;\n    if (this.yr.has(i)) n = a(this.yr.get(i));else {\n      if (this.gr.length >= 200) {\n        var h = a(this.gr.shift());\n        this.yr[\"delete\"](h);\n      }\n\n      var r = pn(t.canvas),\n          u = Math.ceil(this.Zt / 4.5),\n          e = Math.round(this.Zt / 10),\n          o = Math.ceil(this.$t.measureText(t, i)),\n          f = ct(Math.round(o + 2 * u)),\n          c = ct(this.Zt + 2 * u),\n          l = kn(document, new mn(f, c));\n      n = {\n        text: i,\n        textWidth: Math.round(Math.max(1, o)),\n        width: Math.ceil(f * r),\n        height: Math.ceil(c * r),\n        canvas: l\n      }, 0 !== o && (this.gr.push(n.text), this.yr.set(n.text, n)), q(t = gn(n.canvas), r, function () {\n        t.font = s.pr, t.fillStyle = s.mr, t.fillText(i, 0, c - u - e);\n      });\n    }\n    return n;\n  }, t;\n}();\n\n!function (t) {\n  t[t.Default = 0] = \"Default\", t[t.NsResize = 1] = \"NsResize\";\n}(Fn || (Fn = {}));\n\nvar On,\n    Rn,\n    Wn = function () {\n  function t(t, i, n, s) {\n    var h = this;\n    this.B = null, this.Nr = null, this.Sr = null, this.xr = !1, this.Dr = !0, this.Cr = new Kt(50), this.Tr = new In(11, \"#000\"), this.mr = null, this.pr = null, this.Er = 0, this.Lr = function () {\n      h.Ar(h.ah.options()), h.I.chart().model().lightUpdate();\n    }, this.Br = function () {\n      h.I.chart().model().lightUpdate();\n    }, this.I = t, this.$ = i, this.ah = n, this.zr = \"left\" === s, this.cr = document.createElement(\"div\"), this.cr.style.height = \"100%\", this.cr.style.overflow = \"hidden\", this.cr.style.width = \"25px\", this.cr.style.left = \"0\", this.cr.style.position = \"relative\", this.Vr = Nn(this.cr, new mn(16, 16)), this.Vr.subscribeCanvasConfigured(this.Lr);\n    var r = this.Vr.canvas;\n    r.style.position = \"absolute\", r.style.zIndex = \"1\", r.style.left = \"0\", r.style.top = \"0\", this.Fr = Nn(this.cr, new mn(16, 16)), this.Fr.subscribeCanvasConfigured(this.Br);\n    var u = this.Fr.canvas;\n    u.style.position = \"absolute\", u.style.zIndex = \"2\", u.style.left = \"0\", u.style.top = \"0\";\n    var e = {\n      mouseDownEvent: this.Mr.bind(this),\n      pressedMouseMoveEvent: this.wr.bind(this),\n      mouseDownOutsideEvent: this.Pr.bind(this),\n      mouseUpEvent: this.br.bind(this),\n      mouseDoubleClickEvent: this.Ir.bind(this),\n      mouseEnterEvent: this.Or.bind(this),\n      mouseLeaveEvent: this.Rr.bind(this)\n    };\n    this.dr = new Ln(this.Fr.canvas, e, {\n      treatVertTouchDragAsPageScroll: !1,\n      treatHorzTouchDragAsPageScroll: !0\n    });\n  }\n\n  return t.prototype.destroy = function () {\n    this.dr.destroy(), this.Fr.unsubscribeCanvasConfigured(this.Br), this.Fr.destroy(), this.Vr.unsubscribeCanvasConfigured(this.Lr), this.Vr.destroy(), null !== this.B && (this.B.onMarksChanged().unsubscribeAll(this), this.B.optionsChanged().unsubscribeAll(this)), this.B = null, null !== this.Sr && (clearTimeout(this.Sr), this.Sr = null), this.Tr.destroy();\n  }, t.prototype.getElement = function () {\n    return this.cr;\n  }, t.prototype.backgroundColor = function () {\n    return this.$.backgroundColor;\n  }, t.prototype.lineColor = function () {\n    return this.I.chart().options().priceScale.borderColor;\n  }, t.prototype.textColor = function () {\n    return this.$.textColor;\n  }, t.prototype.fontSize = function () {\n    return this.$.fontSize;\n  }, t.prototype.baseFont = function () {\n    return Oi(this.fontSize(), this.$.fontFamily);\n  }, t.prototype.rendererOptions = function () {\n    var t = this.ah.options(),\n        i = this.mr !== t.color,\n        n = this.pr !== t.font;\n    return (i || n) && (this.Ar(t), this.mr = t.color), n && (this.Cr.reset(), this.pr = t.font), t;\n  }, t.prototype.optimalWidth = function () {\n    if (!this.isVisible() || null === this.B) return 0;\n    var t = 34,\n        i = this.rendererOptions(),\n        n = gn(this.Vr.canvas),\n        s = this.B.marks();\n    n.font = this.baseFont(), s.length > 0 && (t = Math.max(this.Cr.measureText(n, s[0].label), this.Cr.measureText(n, s[s.length - 1].label)));\n\n    for (var h = this.Wr(), r = h.length; r--;) {\n      var u = this.Cr.measureText(n, h[r].text());\n      u > t && (t = u);\n    }\n\n    var e = Math.ceil(i.borderSize + i.tickLength + i.paddingInner + i.paddingOuter + t);\n    return e += e % 2;\n  }, t.prototype.setSize = function (t) {\n    if (t.w < 0 || t.h < 0) throw new Error(\"Try to set invalid size to PriceAxisWidget \" + JSON.stringify(t));\n    null !== this.Nr && this.Nr.equals(t) || (this.Nr = t, this.Vr.resizeCanvas({\n      width: t.w,\n      height: t.h\n    }), this.Fr.resizeCanvas({\n      width: t.w,\n      height: t.h\n    }), this.cr.style.width = t.w + \"px\", this.cr.style.height = t.h + \"px\", this.cr.style.minWidth = t.w + \"px\");\n  }, t.prototype.getWidth = function () {\n    return c(this.Nr).w;\n  }, t.prototype.setPriceScale = function (t) {\n    this.B !== t && (null !== this.B && (this.B.onMarksChanged().unsubscribeAll(this), this.B.optionsChanged().unsubscribeAll(this)), this.B = t, t.onMarksChanged().subscribe(this.cn.bind(this), this));\n  }, t.prototype.priceScale = function () {\n    return this.B;\n  }, t.prototype.isVisible = function () {\n    return this.Dr;\n  }, t.prototype.setVisible = function (t) {\n    t !== this.Dr && (this.cr.style.display = t ? \"table-cell\" : \"none\", this.Dr = t);\n  }, t.prototype.setAutoScale = function (t) {\n    var i = this.I.state();\n    this.I.chart().model().setPriceAutoScale(i, c(this.priceScale()), t);\n  }, t.prototype.reset = function () {\n    var t = this.I.state();\n    this.I.chart().model().resetPriceScale(t, c(this.priceScale()));\n  }, t.prototype.paint = function (t) {\n    if (this.Dr && null !== this.Nr) {\n      if (1 !== t) {\n        var i = gn(this.Vr.canvas);\n        this.Ur(), this.qr(i, this.Vr.pixelRatio), this.Lt(i, this.Vr.pixelRatio), this.jr(i, this.Vr.pixelRatio), this.Hr(i, this.Vr.pixelRatio);\n      }\n\n      var n = gn(this.Fr.canvas),\n          s = this.Nr.w,\n          h = this.Nr.h;\n      q(n, this.Fr.pixelRatio, function () {\n        n.clearRect(0, 0, s, h);\n      }), this.Yr(n, this.Fr.pixelRatio);\n    }\n  }, t.prototype.getImage = function () {\n    return this.Vr.canvas;\n  }, t.prototype.isLeft = function () {\n    return this.zr;\n  }, t.prototype.Mr = function (t) {\n    if (null !== this.B && !this.B.isEmpty() && this.I.chart().options().handleScale.axisPressedMouseMove) {\n      var i = this.I.chart().model(),\n          n = this.I.state();\n      this.xr = !0, i.startScalePrice(n, this.B, t.localY);\n    }\n  }, t.prototype.wr = function (t) {\n    if (null !== this.B && this.I.chart().options().handleScale.axisPressedMouseMove) {\n      var i = this.I.chart().model(),\n          n = this.I.state(),\n          s = this.B;\n      i.scalePriceTo(n, s, t.localY);\n    }\n  }, t.prototype.Pr = function () {\n    if (null !== this.B && this.I.chart().options().handleScale.axisPressedMouseMove) {\n      var t = this.I.chart().model(),\n          i = this.I.state(),\n          n = this.B;\n      this.xr && (this.xr = !1, t.endScalePrice(i, n));\n    }\n  }, t.prototype.br = function (t) {\n    if (null !== this.B && this.I.chart().options().handleScale.axisPressedMouseMove) {\n      var i = this.I.chart().model(),\n          n = this.I.state();\n      this.xr = !1, i.endScalePrice(n, this.B);\n    }\n  }, t.prototype.Ir = function (t) {\n    this.I.chart().options().handleScale.axisDoubleClickReset && this.reset();\n  }, t.prototype.Or = function (t) {\n    null !== this.B && (!this.I.chart().model().options().handleScale.axisPressedMouseMove || this.B.isPercentage() || this.B.isIndexedTo100() || this.Kr(1));\n  }, t.prototype.Rr = function (t) {\n    this.Kr(0);\n  }, t.prototype.Wr = function () {\n    var t = this,\n        i = [],\n        n = null === this.B ? void 0 : this.B;\n    return function (s) {\n      for (var h = 0; h < s.length; ++h) {\n        for (var r = s[h].priceAxisViews(t.I.state(), n), u = 0; u < r.length; u++) {\n          i.push(r[u]);\n        }\n      }\n    }(this.I.state().orderedSources()), i;\n  }, t.prototype.qr = function (t, i) {\n    var n = this;\n\n    if (null !== this.Nr) {\n      var s = this.Nr.w,\n          h = this.Nr.h;\n      q(t, i, function () {\n        j(t, 0, 0, s, h, n.backgroundColor());\n      });\n    }\n  }, t.prototype.Lt = function (t, i) {\n    if (null !== this.Nr && null !== this.B && this.B.options().borderVisible) {\n      t.save(), t.fillStyle = this.lineColor();\n      var n,\n          s = Math.max(1, Math.floor(this.rendererOptions().borderSize * i));\n      n = this.zr ? Math.floor(this.Nr.w * i) - s : 0, t.fillRect(n, 0, s, Math.ceil(this.Nr.h * i)), t.restore();\n    }\n  }, t.prototype.jr = function (t, i) {\n    if (null !== this.Nr && null !== this.B) {\n      var n = this.B.marks();\n      t.save(), t.strokeStyle = this.lineColor(), t.font = this.baseFont(), t.fillStyle = this.lineColor();\n      var s = this.rendererOptions(),\n          h = this.B.options().borderVisible,\n          r = this.zr ? Math.floor((this.Nr.w - s.tickLength) * i - s.borderSize * i) : Math.floor(s.borderSize * i),\n          u = this.zr ? Math.round(r - s.paddingInner * i) : Math.round(r + s.tickLength * i + s.paddingInner * i),\n          e = this.zr ? \"right\" : \"left\",\n          o = Math.max(1, Math.floor(i)),\n          f = Math.floor(.5 * i);\n\n      if (h) {\n        var a = Math.round(s.tickLength * i);\n        t.beginPath();\n\n        for (var c = 0, l = n; c < l.length; c++) {\n          var v = l[c];\n          t.rect(r, Math.round(v.coord * i) - f, a, o);\n        }\n\n        t.fill();\n      }\n\n      t.fillStyle = this.textColor();\n\n      for (var d = 0, M = n; d < M.length; d++) {\n        v = M[d];\n        this.Tr.paintTo(t, v.label, u, Math.round(v.coord * i), e);\n      }\n\n      t.restore();\n    }\n  }, t.prototype.Ur = function () {\n    if (null !== this.Nr && null !== this.B) {\n      var t = this.Nr.h / 2,\n          i = [],\n          n = this.B.orderedSources().slice(),\n          s = this.I.state(),\n          h = this.rendererOptions();\n      this.B === s.defaultPriceScale() && this.I.state().orderedSources().forEach(function (t) {\n        s.isOverlay(t) && n.push(t);\n      });\n      var r = this.B.mainSource(),\n          u = this.B;\n      n.forEach(function (n) {\n        var h = n.priceAxisViews(s, u);\n        h.forEach(function (t) {\n          t.setFixedCoordinate(null), t.isVisible() && i.push(t);\n        }), r === n && h.length > 0 && (t = h[0].coordinate());\n      });\n      var e = i.filter(function (i) {\n        return i.coordinate() <= t;\n      }),\n          o = i.filter(function (i) {\n        return i.coordinate() > t;\n      });\n\n      if (e.sort(function (t, i) {\n        return i.coordinate() - t.coordinate();\n      }), e.length && o.length && o.push(e[0]), o.sort(function (t, i) {\n        return t.coordinate() - i.coordinate();\n      }), i.forEach(function (t) {\n        return t.setFixedCoordinate(t.coordinate());\n      }), this.B.options().alignLabels) {\n        for (var f = 1; f < e.length; f++) {\n          var a = e[f],\n              c = (v = e[f - 1]).height(h, !1);\n          a.coordinate() > (d = v.getFixedCoordinate()) - c && a.setFixedCoordinate(d - c);\n        }\n\n        for (var l = 1; l < o.length; l++) {\n          var v, d;\n          a = o[l], c = (v = o[l - 1]).height(h, !0);\n          a.coordinate() < (d = v.getFixedCoordinate()) + c && a.setFixedCoordinate(d + c);\n        }\n      }\n    }\n  }, t.prototype.Hr = function (t, i) {\n    var n = this;\n\n    if (null !== this.Nr) {\n      t.save();\n      var s = this.Nr,\n          h = this.Wr(),\n          r = this.rendererOptions(),\n          u = this.zr ? \"right\" : \"left\";\n      h.forEach(function (h) {\n        if (h.isAxisLabelVisible()) {\n          var e = h.renderer();\n          t.save(), e.draw(t, r, n.Cr, s.w, u, i), t.restore();\n        }\n      }), t.restore();\n    }\n  }, t.prototype.Yr = function (t, i) {\n    var n = this;\n\n    if (null !== this.Nr && null !== this.B) {\n      t.save();\n      var s = this.Nr,\n          h = this.I.chart().model(),\n          r = [],\n          u = this.I.state(),\n          e = h.crosshairSource().priceAxisViews(u, this.B);\n      e.length && r.push(e);\n      var o = this.rendererOptions(),\n          f = this.zr ? \"right\" : \"left\";\n      r.forEach(function (h) {\n        h.forEach(function (h) {\n          t.save(), h.renderer().draw(t, o, n.Cr, s.w, f, i), t.restore();\n        });\n      }), t.restore();\n    }\n  }, t.prototype.Kr = function (t) {\n    this.cr.style.cursor = 1 === t ? \"ns-resize\" : \"default\";\n  }, t.prototype.cn = function () {\n    var t = this,\n        i = this.optimalWidth();\n\n    if (this.Er < i) {\n      var n = this.I.chart();\n      null === this.Sr && (this.Sr = setTimeout(function () {\n        n && n.model().fullUpdate(), t.Sr = null;\n      }, 100));\n    }\n\n    this.Er = i;\n  }, t.prototype.Ar = function (t) {\n    this.Tr.destroy(), this.Tr = new In(t.fontSize, t.color, t.fontFamily);\n  }, t;\n}(),\n    Un = En,\n    qn = function () {\n  function t(t, i) {\n    var n = this;\n    this.Nr = new mn(0, 0), this.$r = null, this._r = null, this.Xr = !1, this.Zr = \"none\", this.Jr = new rt(), this.Gr = 0, this.Qr = !1, this.tu = null, this.iu = !1, this.nu = null, this.Lr = function () {\n      return n.su && n.F().lightUpdate();\n    }, this.Br = function () {\n      return n.su && n.F().lightUpdate();\n    }, this.hu = t, this.su = i, this.su.onDestroyed().subscribe(this.ru.bind(this), this, !0), this.uu = document.createElement(\"td\"), this.uu.style.padding = \"0\", this.uu.style.position = \"relative\";\n    var s = document.createElement(\"div\");\n    s.style.width = \"100%\", s.style.height = \"100%\", s.style.position = \"relative\", s.style.overflow = \"hidden\", this.eu = document.createElement(\"td\"), this.eu.style.padding = \"0\", this.ou = document.createElement(\"td\"), this.ou.style.padding = \"0\", this.uu.appendChild(s), this.Vr = Nn(s, new mn(16, 16)), this.Vr.subscribeCanvasConfigured(this.Lr);\n    var h = this.Vr.canvas;\n    h.style.position = \"absolute\", h.style.zIndex = \"1\", h.style.left = \"0\", h.style.top = \"0\", this.Fr = Nn(s, new mn(16, 16)), this.Fr.subscribeCanvasConfigured(this.Br);\n    var r = this.Fr.canvas;\n    r.style.position = \"absolute\", r.style.zIndex = \"2\", r.style.left = \"0\", r.style.top = \"0\", this.ar = document.createElement(\"tr\"), this.ar.appendChild(this.eu), this.ar.appendChild(this.uu), this.ar.appendChild(this.ou), this.fu(), t.model().mainPriceScaleOptionsChanged().subscribe(this.au.bind(this), this), this.updatePriceAxisWidget();\n    var u = this.chart().options().handleScroll;\n    this.dr = new Ln(this.Fr.canvas, this, {\n      treatVertTouchDragAsPageScroll: !u.vertTouchDrag,\n      treatHorzTouchDragAsPageScroll: !u.horzTouchDrag\n    });\n  }\n\n  return t.prototype.destroy = function () {\n    null !== this.$r && this.$r.destroy(), this.Fr.unsubscribeCanvasConfigured(this.Br), this.Fr.destroy(), this.Vr.unsubscribeCanvasConfigured(this.Lr), this.Vr.destroy(), null !== this.su && this.su.onDestroyed().unsubscribeAll(this), this.dr.destroy();\n  }, t.prototype.state = function () {\n    return c(this.su);\n  }, t.prototype.stateOrNull = function () {\n    return this.su;\n  }, t.prototype.setState = function (i) {\n    null !== this.su && this.su.onDestroyed().unsubscribeAll(this), this.su = i, null !== this.su && this.su.onDestroyed().subscribe(t.prototype.ru.bind(this), this, !0), this.updatePriceAxisWidget();\n  }, t.prototype.chart = function () {\n    return this.hu;\n  }, t.prototype.getElement = function () {\n    return this.ar;\n  }, t.prototype.updatePriceAxisWidget = function () {\n    if (null !== this.su && null !== this.$r && 0 !== this.F().serieses().length) {\n      var t = this.su.defaultPriceScale();\n      this.$r.setPriceScale(c(t));\n    }\n  }, t.prototype.stretchFactor = function () {\n    return null !== this.su ? this.su.stretchFactor() : 0;\n  }, t.prototype.setStretchFactor = function (t) {\n    this.su && this.su.setStretchFactor(t);\n  }, t.prototype.mouseEnterEvent = function (t) {\n    if (this.su) {\n      var i = t.localX,\n          n = t.localY;\n      Dn || this.cu(i, n);\n    }\n  }, t.prototype.mouseDownEvent = function (t) {\n    if (this.Qr = !1, this.iu = null !== this.tu, this.su) {\n      if (document.activeElement !== document.body && document.activeElement !== document.documentElement) c(document.activeElement).blur();else {\n        var i = document.getSelection();\n        null !== i && i.removeAllRanges();\n      }\n      var n = this.F();\n\n      if (!this.su.defaultPriceScale().isEmpty() && !n.timeScale().isEmpty()) {\n        if (null !== this.tu) {\n          var s = n.crosshairSource();\n          this.nu = {\n            x: s.appliedX(),\n            y: s.appliedY()\n          }, this.tu = {\n            x: t.localX,\n            y: t.localY\n          };\n        }\n\n        Dn || this.cu(t.localX, t.localY);\n      }\n    }\n  }, t.prototype.mouseMoveEvent = function (t) {\n    if (this.su) {\n      var i = t.localX,\n          n = t.localY;\n\n      if (this.lu() && this.vu(), !Dn) {\n        this.cu(i, n);\n        var s = this.hitTest(i, n);\n        this.F().setHoveredSource(s && {\n          source: s.source,\n          object: s.object\n        }), null !== s && void 0 !== s.view.moveHandler && s.view.moveHandler(i, n);\n      }\n    }\n  }, t.prototype.mouseClickEvent = function (t) {\n    if (null !== this.su) {\n      var i = t.localX,\n          n = t.localY,\n          s = this.hitTest(i, n);\n\n      if (null !== s && void 0 !== s.view.clickHandler && s.view.clickHandler(i, n), this.Jr.hasListeners()) {\n        var h = this.F().crosshairSource().appliedIndex();\n        this.Jr.fire(h, {\n          x: i,\n          y: n\n        });\n      }\n\n      this.du();\n    }\n  }, t.prototype.pressedMouseMoveEvent = function (t) {\n    if (null !== this.su) {\n      var i = this.F(),\n          n = t.localX,\n          s = t.localY;\n\n      if (null !== this.tu) {\n        this.iu = !1;\n        var h = c(this.nu),\n            r = h.x + (n - this.tu.x),\n            u = h.y + (s - this.tu.y);\n        this.cu(r, u);\n      } else this.lu() || this.cu(n, s);\n\n      if (!i.timeScale().isEmpty()) {\n        var e = this.hu.options().handleScroll;\n\n        if (e.pressedMouseMove && \"touch\" !== t.type || (e.horzTouchDrag || e.vertTouchDrag) && \"mouse\" !== t.type) {\n          var o = this.su.defaultPriceScale();\n          null !== this._r || this.Mu() || (this._r = {\n            x: t.clientX,\n            y: t.clientY\n          }), null === this._r || this._r.x === t.clientX && this._r.y === t.clientY || this.Xr || (o.isEmpty() || i.startScrollPrice(this.su, o, t.localY), i.startScrollTime(t.localX), this.Xr = !0), this.Xr && (o.isEmpty() || i.scrollPriceTo(this.su, o, t.localY), i.scrollTimeTo(t.localX));\n        }\n      }\n    }\n  }, t.prototype.mouseUpEvent = function (t) {\n    if (null !== this.su) {\n      this.Qr = !1;\n      var i = this.F();\n\n      if (this.Xr) {\n        var n = this.su.defaultPriceScale();\n        i.endScrollPrice(this.su, n), i.endScrollTime(), this._r = null, this.Xr = !1;\n      }\n    }\n  }, t.prototype.longTapEvent = function (t) {\n    if (this.Qr = !0, null === this.tu && Un) {\n      var i = {\n        x: t.localX,\n        y: t.localY\n      };\n      this.wu(i, i);\n    }\n  }, t.prototype.mouseLeaveEvent = function (t) {\n    null !== this.su && (this.su.model().setHoveredSource(null), En || this.vu());\n  }, t.prototype.clicked = function () {\n    return this.Jr;\n  }, t.prototype.pinchStartEvent = function () {\n    this.Gr = 1;\n  }, t.prototype.pinchEvent = function (t, i) {\n    if (this.hu.options().handleScale.pinch) {\n      var n = 5 * (i - this.Gr);\n      this.Gr = i, this.F().zoomTime(t.x, n);\n    }\n  }, t.prototype.hitTest = function (t, i) {\n    var n = this.su;\n    if (null === n) return null;\n\n    for (var s = 0, h = n.orderedSources(); s < h.length; s++) {\n      var r = h[s],\n          u = this.bu(r.paneViews(n), t, i);\n      if (null !== u) return {\n        source: r,\n        view: u.view,\n        object: u.object\n      };\n    }\n\n    return null;\n  }, t.prototype.setPriceAxisSize = function (t) {\n    c(this.$r).setSize(new mn(t, this.Nr.h));\n  }, t.prototype.getSize = function () {\n    return this.Nr;\n  }, t.prototype.setSize = function (t) {\n    if (t.w < 0 || t.h < 0) throw new Error(\"Try to set invalid size to PaneWidget \" + JSON.stringify(t));\n    this.Nr.equals(t) || (this.Nr = t, this.Vr.resizeCanvas({\n      width: t.w,\n      height: t.h\n    }), this.Fr.resizeCanvas({\n      width: t.w,\n      height: t.h\n    }), this.uu.style.width = t.w + \"px\", this.uu.style.height = t.h + \"px\");\n  }, t.prototype.recalculatePriceScale = function () {\n    var t = c(this.su);\n    t.recalculatePriceScale(t.defaultPriceScale());\n\n    for (var i = 0, n = t.dataSources(); i < n.length; i++) {\n      var s = n[i];\n\n      if (t.isOverlay(s)) {\n        var h = s.priceScale();\n        null !== h && t.recalculatePriceScale(h), s.updateAllViews();\n      }\n    }\n  }, t.prototype.getImage = function () {\n    return this.Vr.canvas;\n  }, t.prototype.paint = function (t) {\n    if (0 !== t && null !== this.su) {\n      if (t > 1 && this.recalculatePriceScale(), null !== this.$r && this.$r.paint(t), 1 !== t) {\n        var i = gn(this.Vr.canvas);\n        i.save(), this.qr(i, this.mu(), this.Vr.pixelRatio), this.su && (this.pu(i, this.Vr.pixelRatio), this.gu(i, this.Vr.pixelRatio), this.yu(i, this.Vr.pixelRatio)), i.restore();\n      }\n\n      var n = gn(this.Fr.canvas);\n      n.clearRect(0, 0, Math.ceil(this.Nr.w * this.Fr.pixelRatio), Math.ceil(this.Nr.h * this.Fr.pixelRatio)), this.ku(n, this.Fr.pixelRatio);\n    }\n  }, t.prototype.priceAxisWidget = function () {\n    return this.$r;\n  }, t.prototype.mu = function () {\n    return this.hu.options().layout.backgroundColor;\n  }, t.prototype.ru = function () {\n    null !== this.su && this.su.onDestroyed().unsubscribeAll(this), this.su = null;\n  }, t.prototype.qr = function (t, i, n) {\n    var s = this;\n    q(t, n, function () {\n      j(t, 0, 0, s.Nr.w, s.Nr.h, i);\n    });\n  }, t.prototype.pu = function (t, i) {\n    for (var n = c(this.su), s = this.F().gridSource().paneViews(n), h = n.height(), r = n.width(), u = 0, e = s; u < e.length; u++) {\n      var o = e[u];\n      t.save();\n      var f = o.renderer(h, r);\n      null !== f && f.draw(t, i, !1), t.restore();\n    }\n  }, t.prototype.gu = function (t, i) {\n    var n = this.F().watermarkSource();\n\n    if (null !== n) {\n      var s = c(this.su);\n      if (s.containsSeries()) for (var h = n.paneViews(), r = s.height(), u = s.width(), e = 0, o = h; e < o.length; e++) {\n        var f = o[e];\n        t.save();\n        var a = f.renderer(r, u);\n        null !== a && a.draw(t, i, !1), t.restore();\n      }\n    }\n  }, t.prototype.ku = function (t, i) {\n    this.Nu(this.F().crosshairSource(), t, i);\n  }, t.prototype.yu = function (t, i) {\n    for (var n = c(this.su).orderedSources(), s = this.F().crosshairSource(), h = 0, r = n; h < r.length; h++) {\n      var u = r[h];\n      this.Su(u, t, i);\n    }\n\n    for (var e = 0, o = n; e < o.length; e++) {\n      (u = o[e]) !== s && this.Nu(u, t, i);\n    }\n  }, t.prototype.Nu = function (t, i, n) {\n    for (var s = c(this.su), h = t.paneViews(s), r = s.height(), u = s.width(), e = s.model().hoveredSource(), o = null !== e && e.source === t, f = null !== e && o && void 0 !== e.object ? e.object.hitTestData : void 0, a = 0, l = h; a < l.length; a++) {\n      var v = l[a].renderer(r, u);\n      null !== v && (i.save(), v.draw(i, n, o, f), i.restore());\n    }\n  }, t.prototype.Su = function (t, i, n) {\n    for (var s = c(this.su), h = t.paneViews(s), r = s.height(), u = s.width(), e = s.model().hoveredSource(), o = null !== e && e.source === t, f = null !== e && o && void 0 !== e.object ? e.object.hitTestData : void 0, a = 0, l = h; a < l.length; a++) {\n      var v = l[a].renderer(r, u);\n      null !== v && void 0 !== v.drawBackground && (i.save(), v.drawBackground(i, n, o, f), i.restore());\n    }\n  }, t.prototype.bu = function (t, i, n) {\n    for (var s = 0, h = t; s < h.length; s++) {\n      var r = h[s],\n          u = r.renderer(this.Nr.h, this.Nr.w);\n\n      if (null !== u && u.hitTest) {\n        var e = u.hitTest(i, n);\n        if (null !== e) return {\n          view: r,\n          object: e\n        };\n      }\n    }\n\n    return null;\n  }, t.prototype.au = function () {\n    this.fu(), this.hu.adjustSize();\n  }, t.prototype.fu = function () {\n    if (null !== this.su) {\n      var t = this.hu,\n          i = this.su.defaultPriceScale().options().position;\n\n      if (this.Zr !== i) {\n        if (null !== this.$r && (this.$r.isLeft() ? this.eu.removeChild(this.$r.getElement()) : this.ou.removeChild(this.$r.getElement()), this.$r.destroy(), this.$r = null), \"none\" !== i) {\n          var n = t.model().rendererOptionsProvider();\n          this.$r = new Wn(this, t.options().layout, n, i), \"left\" === i && this.eu.appendChild(this.$r.getElement()), \"right\" === i && this.ou.appendChild(this.$r.getElement());\n        }\n\n        this.Zr = i;\n      }\n    }\n  }, t.prototype.lu = function () {\n    return Un && null === this.tu;\n  }, t.prototype.Mu = function () {\n    return Un && this.Qr || null !== this.tu;\n  }, t.prototype.xu = function (t) {\n    return Math.max(0, Math.min(t, this.Nr.w - 1));\n  }, t.prototype.Du = function (t) {\n    return Math.max(0, Math.min(t, this.Nr.h - 1));\n  }, t.prototype.cu = function (t, i) {\n    this.F().setAndSaveCurrentPosition(this.xu(t), this.Du(i), c(this.su));\n  }, t.prototype.vu = function () {\n    this.F().clearCurrentPosition();\n  }, t.prototype.du = function () {\n    this.iu && (this.tu = null, this.vu());\n  }, t.prototype.wu = function (t, i) {\n    this.tu = t, this.iu = !1, this.cu(i.x, i.y);\n    var n = this.F().crosshairSource();\n    this.nu = {\n      x: n.appliedX(),\n      y: n.appliedY()\n    };\n  }, t.prototype.F = function () {\n    return this.hu.model();\n  }, t;\n}(),\n    jn = function () {\n  function t(t, i, n, s) {\n    var h = this;\n    this.o = !0, this.Nr = new mn(0, 0), this.Lr = function () {\n      return h.paint(3);\n    }, this.zr = \"left\" === t, this.ah = n.rendererOptionsProvider, this.$ = i, this.Cu = s, this.cr = document.createElement(\"div\"), this.cr.style.width = \"25px\", this.cr.style.height = \"100%\", this.cr.style.overflow = \"hidden\", this.Vr = Nn(this.cr, new mn(16, 16)), this.Vr.subscribeCanvasConfigured(this.Lr);\n  }\n\n  return t.prototype.destroy = function () {\n    this.Vr.unsubscribeCanvasConfigured(this.Lr), this.Vr.destroy();\n  }, t.prototype.update = function () {\n    this.o = !0;\n  }, t.prototype.getElement = function () {\n    return this.cr;\n  }, t.prototype.getSize = function () {\n    return this.Nr;\n  }, t.prototype.setSize = function (t) {\n    if (t.w < 0 || t.h < 0) throw new Error(\"Try to set invalid size to PriceAxisStub \" + JSON.stringify(t));\n    this.Nr.equals(t) || (this.Nr = t, this.Vr.resizeCanvas({\n      width: t.w,\n      height: t.h\n    }), this.cr.style.width = t.w + \"px\", this.cr.style.minWidth = t.w + \"px\", this.cr.style.height = t.h + \"px\", this.o = !0);\n  }, t.prototype.paint = function (t) {\n    if ((!(t < 3) || this.o) && 0 !== this.Nr.w && 0 !== this.Nr.h) {\n      this.o = !1;\n      var i = gn(this.Vr.canvas);\n      this.qr(i, this.Vr.pixelRatio), this.Lt(i, this.Vr.pixelRatio);\n    }\n  }, t.prototype.getImage = function () {\n    return this.Vr.canvas;\n  }, t.prototype.isLeft = function () {\n    return this.zr;\n  }, t.prototype.Lt = function (t, i) {\n    if (this.Cu()) {\n      var n = this.Nr.w;\n      t.save(), t.fillStyle = this.$.timeScale.borderColor;\n      var s = Math.floor(this.ah.options().borderSize * i),\n          h = this.zr ? Math.round(n * i) - s : 0;\n      t.fillRect(h, 0, s, s), t.restore();\n    }\n  }, t.prototype.qr = function (t, i) {\n    var n = this;\n    q(t, i, function () {\n      j(t, 0, 0, n.Nr.w, n.Nr.h, n.$.layout.backgroundColor);\n    });\n  }, t;\n}();\n\nfunction Hn(t, i) {\n  return t.span > i.span ? t : i;\n}\n\n!function (t) {\n  t[t.BorderSize = 1] = \"BorderSize\", t[t.TickLength = 3] = \"TickLength\";\n}(On || (On = {})), function (t) {\n  t[t.Default = 0] = \"Default\", t[t.EwResize = 1] = \"EwResize\";\n}(Rn || (Rn = {}));\n\nvar Yn = function () {\n  function t(t) {\n    var i = this;\n    this.Tu = null, this.Eu = 70, this.Ht = null, this.Lu = !1, this.Nr = new mn(0, 0), this.Zr = \"none\", this.Lr = function () {\n      return i.hu.model().lightUpdate();\n    }, this.Br = function () {\n      return i.hu.model().lightUpdate();\n    }, this.hu = t, this.$ = t.options().layout, this.Au = document.createElement(\"tr\"), this.Bu = document.createElement(\"td\"), this.Bu.style.padding = \"0\", this.zu = document.createElement(\"td\"), this.zu.style.padding = \"0\", this.cr = document.createElement(\"td\"), this.cr.style.height = \"25px\", this.cr.style.padding = \"0\", this.Vu = document.createElement(\"div\"), this.Vu.style.width = \"100%\", this.Vu.style.height = \"100%\", this.Vu.style.position = \"relative\", this.Vu.style.overflow = \"hidden\", this.cr.appendChild(this.Vu), this.Vr = Nn(this.Vu, new mn(16, 16)), this.Vr.subscribeCanvasConfigured(this.Lr);\n    var n = this.Vr.canvas;\n    n.style.position = \"absolute\", n.style.zIndex = \"1\", n.style.left = \"0\", n.style.top = \"0\", this.Fr = Nn(this.Vu, new mn(16, 16)), this.Fr.subscribeCanvasConfigured(this.Br);\n    var s = this.Fr.canvas;\n    s.style.position = \"absolute\", s.style.zIndex = \"2\", s.style.left = \"0\", s.style.top = \"0\", this.Au.appendChild(this.Bu), this.Au.appendChild(this.cr), this.Au.appendChild(this.zu), this.Fu(), this.hu.model().mainPriceScaleOptionsChanged().subscribe(this.Fu.bind(this), this), this.dr = new Ln(this.Fr.canvas, this, {\n      treatVertTouchDragAsPageScroll: !0,\n      treatHorzTouchDragAsPageScroll: !1\n    });\n  }\n\n  return t.prototype.destroy = function () {\n    this.dr.destroy(), null !== this.Tu && this.Tu.destroy(), this.Fr.unsubscribeCanvasConfigured(this.Br), this.Fr.destroy(), this.Vr.unsubscribeCanvasConfigured(this.Lr), this.Vr.destroy();\n  }, t.prototype.getElement = function () {\n    return this.Au;\n  }, t.prototype.stub = function () {\n    return this.Tu;\n  }, t.prototype.mouseDownEvent = function (t) {\n    if (!this.Lu) {\n      this.Lu = !0;\n      var i = this.hu.model();\n      !i.timeScale().isEmpty() && this.hu.options().handleScale.axisPressedMouseMove && i.startScaleTime(t.localX);\n    }\n  }, t.prototype.mouseDownOutsideEvent = function () {\n    var t = this.hu.model();\n    !t.timeScale().isEmpty() && this.Lu && (this.Lu = !1, this.hu.options().handleScale.axisPressedMouseMove && t.endScaleTime());\n  }, t.prototype.pressedMouseMoveEvent = function (t) {\n    var i = this.hu.model();\n    !i.timeScale().isEmpty() && this.hu.options().handleScale.axisPressedMouseMove && i.scaleTimeTo(t.localX);\n  }, t.prototype.mouseUpEvent = function (t) {\n    this.Lu = !1;\n    var i = this.hu.model();\n    i.timeScale().isEmpty() && !this.hu.options().handleScale.axisPressedMouseMove || i.endScaleTime();\n  }, t.prototype.mouseDoubleClickEvent = function () {\n    this.hu.options().handleScale.axisDoubleClickReset && this.hu.model().resetTimeScale();\n  }, t.prototype.mouseEnterEvent = function (t) {\n    this.hu.model().options().handleScale.axisPressedMouseMove && this.Kr(1);\n  }, t.prototype.mouseLeaveEvent = function (t) {\n    this.Kr(0);\n  }, t.prototype.getSize = function () {\n    return this.Nr;\n  }, t.prototype.setSizes = function (t, i) {\n    this.Nr && this.Nr.equals(t) || (this.Nr = t, this.Vr.resizeCanvas({\n      width: t.w,\n      height: t.h\n    }), this.Fr.resizeCanvas({\n      width: t.w,\n      height: t.h\n    }), this.cr.style.width = t.w + \"px\", this.cr.style.height = t.h + \"px\"), null !== this.Tu && this.Tu.setSize(new mn(i, t.h));\n  }, t.prototype.width = function () {\n    return this.Nr.w;\n  }, t.prototype.height = function () {\n    return this.Nr.h;\n  }, t.prototype.optimalHeight = function () {\n    var t = this.Pu();\n    return Math.ceil(t.borderSize + t.tickLength + t.fontSize + t.paddingTop + t.paddingBottom);\n  }, t.prototype.update = function () {\n    var t = this,\n        i = this.hu.model().timeScale().marks();\n    i && (this.Eu = 70, i.forEach(function (i) {\n      t.Eu = Math.min(i.span, t.Eu);\n    }));\n  }, t.prototype.getImage = function () {\n    return this.Vr.canvas;\n  }, t.prototype.paint = function (t) {\n    if (0 !== t) {\n      if (1 !== t) {\n        var i = gn(this.Vr.canvas);\n        this.qr(i, this.Vr.pixelRatio), this.Lt(i, this.Vr.pixelRatio), this.jr(i, this.Vr.pixelRatio), this.Hr(i, this.Vr.pixelRatio), null !== this.Tu && this.Tu.paint(t);\n      }\n\n      var n = gn(this.Fr.canvas);\n      this.Yr(n, this.Fr.pixelRatio);\n    }\n  }, t.prototype.qr = function (t, i) {\n    var n = this;\n    q(t, i, function () {\n      j(t, 0, 0, n.Nr.w, n.Nr.h, n.mu());\n    });\n  }, t.prototype.Lt = function (t, i) {\n    if (this.hu.options().timeScale.borderVisible) {\n      t.save(), t.fillStyle = this.Iu();\n      var n = Math.max(1, Math.floor(this.Pu().borderSize * i));\n      t.fillRect(0, 0, Math.ceil(this.Nr.w * i), n), t.restore();\n    }\n  }, t.prototype.jr = function (t, i) {\n    var n = this,\n        s = this.hu.model().timeScale().marks();\n\n    if (s && 0 !== s.length) {\n      var h = s.reduce(Hn, s[0]).span;\n      h > 30 && h < 40 && (h = 30), t.save(), t.strokeStyle = this.Iu();\n      var r = this.Pu(),\n          u = r.borderSize + r.tickLength + r.paddingTop + r.fontSize - r.baselineOffset;\n      t.textAlign = \"center\", t.fillStyle = this.Iu();\n      var e = Math.floor(this.Pu().borderSize * i),\n          o = Math.max(1, Math.floor(i)),\n          f = Math.floor(.5 * i);\n\n      if (this.hu.model().timeScale().options().borderVisible) {\n        t.beginPath();\n\n        for (var a = Math.round(r.tickLength * i), c = s.length; c--;) {\n          var l = Math.round(s[c].coord * i);\n          t.rect(l - f, e, o, a);\n        }\n\n        t.fill();\n      }\n\n      t.fillStyle = this.Pn(), q(t, i, function () {\n        t.font = n.Ou();\n\n        for (var i = 0, r = s; i < r.length; i++) {\n          (f = r[i]).span < h && t.fillText(f.label, f.coord, u);\n        }\n\n        t.font = n.Ru();\n\n        for (var e = 0, o = s; e < o.length; e++) {\n          var f;\n          (f = o[e]).span >= h && t.fillText(f.label, f.coord, u);\n        }\n      });\n    }\n  }, t.prototype.Hr = function (t, i) {\n    t.save();\n    var n = new Set(),\n        s = this.hu.model(),\n        h = s.dataSources();\n    n.add(s.crosshairSource());\n\n    for (var r = this.Pu(), u = 0, e = h; u < e.length; u++) {\n      var o = e[u];\n      if (!n.has(o)) for (var f = 0, a = o.timeAxisViews(); f < a.length; f++) {\n        a[f].renderer().draw(t, r, i);\n      }\n    }\n\n    t.restore();\n  }, t.prototype.Yr = function (t, i) {\n    t.save(), t.clearRect(0, 0, Math.ceil(this.Nr.w * i), Math.ceil(this.Nr.h * i));\n    var n = [],\n        s = this.hu.model().crosshairSource().timeAxisViews();\n    n.push(s);\n    var h = this.Pu();\n    n.forEach(function (n) {\n      n.forEach(function (n) {\n        t.save(), n.renderer().draw(t, h, i), t.restore();\n      });\n    }), t.restore();\n  }, t.prototype.mu = function () {\n    return this.$.backgroundColor;\n  }, t.prototype.Iu = function () {\n    return this.hu.options().timeScale.borderColor;\n  }, t.prototype.Pn = function () {\n    return this.$.textColor;\n  }, t.prototype.Zt = function () {\n    return this.$.fontSize;\n  }, t.prototype.Ou = function () {\n    return Oi(this.Zt(), this.$.fontFamily);\n  }, t.prototype.Ru = function () {\n    return Oi(this.Zt(), this.$.fontFamily, \"bold\");\n  }, t.prototype.Pu = function () {\n    null === this.Ht && (this.Ht = {\n      borderSize: 1,\n      baselineOffset: NaN,\n      paddingTop: NaN,\n      paddingBottom: NaN,\n      paddingHorizontal: NaN,\n      tickLength: 3,\n      fontSize: NaN,\n      font: \"\",\n      widthCache: new Kt()\n    });\n    var t = this.Ht,\n        i = this.Ou();\n\n    if (t.font !== i) {\n      var n = this.Zt();\n      t.fontSize = n, t.font = i, t.paddingTop = Math.ceil(n / 2.5), t.paddingBottom = t.paddingTop, t.paddingHorizontal = Math.ceil(n / 2), t.baselineOffset = Math.round(this.Zt() / 5), t.widthCache.reset();\n    }\n\n    return this.Ht;\n  }, t.prototype.Kr = function (t) {\n    this.cr.style.cursor = 1 === t ? \"ew-resize\" : \"default\";\n  }, t.prototype.Fu = function () {\n    var t = this.hu.model().mainPriceScale().options().position;\n\n    if (t !== this.Zr) {\n      if (null !== this.Tu && (this.Tu.isLeft() ? this.Bu.removeChild(this.Tu.getElement()) : this.zu.removeChild(this.Tu.getElement()), this.Tu.destroy(), this.Tu = null), \"none\" !== t) {\n        var i = {\n          rendererOptionsProvider: this.hu.model().rendererOptionsProvider()\n        },\n            n = this.hu.model();\n        this.Tu = new jn(t, this.hu.options(), i, function () {\n          return n.mainPriceScale().options().borderVisible && n.timeScale().options().borderVisible;\n        }), (\"left\" === t ? this.Bu : this.zu).appendChild(this.Tu.getElement());\n      }\n\n      this.Zr = t;\n    }\n  }, t;\n}(),\n    Kn = function () {\n  function t(t, i) {\n    var n = this;\n    this.Wu = [], this.Uu = [], this.qu = 0, this.ju = new rt(), this.nn = 0, this.Kt = 0, this.Hu = 0, this.Yu = null, this.Ku = !1, this.Jr = new rt(), this.oh = new rt(), this.$ = i, this.Au = document.createElement(\"div\"), this.Au.classList.add(\"tv-lightweight-charts\"), this.Au.style.overflow = \"hidden\", this.Au.style.width = \"100%\", this.Au.style.height = \"100%\", this.$u = document.createElement(\"table\"), this.$u.setAttribute(\"cellspacing\", \"0\"), this.Au.appendChild(this.$u), this._u = this.Xu.bind(this), this.Au.addEventListener(\"wheel\", this._u, {\n      passive: !1\n    }), this.F = new bn(this.fh.bind(this), this.$), this.model().crosshairMoved().subscribe(this.Zu.bind(this), this), this.Ju = new Yn(this), this.$u.appendChild(this.Ju.getElement());\n    var s = this.$.width,\n        h = this.$.height;\n\n    if (0 === s && 0 === h) {\n      var r = t.getBoundingClientRect();\n      (s = Math.floor(r.width)) % 2 && (s -= 1), (h = Math.floor(r.height)) % 2 && (h -= 1);\n    }\n\n    s = Math.max(70, s), h = Math.max(50, h), this.resize(s, h), this.Gu(), t.appendChild(this.Au), this.Qu(), this.F.timeScale().optionsApplied().subscribe(function () {\n      n.Qu(), n.adjustSize();\n    }, this);\n  }\n\n  return t.prototype.model = function () {\n    return this.F;\n  }, t.prototype.options = function () {\n    return this.$;\n  }, t.prototype.paneWidgets = function () {\n    return this.Wu;\n  }, t.prototype.destroy = function () {\n    this.Au.removeEventListener(\"wheel\", this._u), 0 !== this.qu && window.cancelAnimationFrame(this.qu), this.F.crosshairMoved().unsubscribeAll(this), this.F.timeScale().optionsApplied().unsubscribeAll(this), this.F.destroy();\n\n    for (var t = 0, i = this.Wu; t < i.length; t++) {\n      var n = i[t];\n      this.$u.removeChild(n.getElement()), n.clicked().unsubscribeAll(this), n.destroy();\n    }\n\n    this.Wu = [];\n\n    for (var s = 0, h = this.Uu; s < h.length; s++) {\n      var r = h[s];\n      this.te(r);\n    }\n\n    this.Uu = [], c(this.Ju).destroy(), null !== this.Au.parentElement && this.Au.parentElement.removeChild(this.Au), this.oh.destroy(), this.Jr.destroy(), delete this.Au;\n  }, t.prototype.resize = function (t, i, n) {\n    if (void 0 === n && (n = !1), this.nn !== i || this.Kt !== t) {\n      this.nn = i, this.Kt = t;\n      var s = i + \"px\",\n          h = t + \"px\";\n      c(this.Au).style.height = s, c(this.Au).style.width = h, this.$u.style.height = s, this.$u.style.width = h, n ? this.ie(new Hi(3)) : this.F.fullUpdate();\n    }\n  }, t.prototype.paint = function (t) {\n    void 0 === t && (t = new Hi(3));\n\n    for (var i = 0; i < this.Wu.length; i++) {\n      this.Wu[i].paint(t.invalidateForPane(i).level);\n    }\n\n    this.Ju.paint(t.fullInvalidation());\n  }, t.prototype.adjustSize = function () {\n    this.ne(), this.F.fullUpdate();\n  }, t.prototype.applyOptions = function (t) {\n    this.F.applyOptions(t), this.Qu();\n    var i = t.width || this.Kt,\n        n = t.height || this.nn;\n    this.resize(i, n);\n  }, t.prototype.clicked = function () {\n    return this.Jr;\n  }, t.prototype.crosshairMoved = function () {\n    return this.oh;\n  }, t.prototype.takeScreenshot = function () {\n    var t = this;\n    null !== this.Yu && (this.ie(this.Yu), this.Yu = null);\n    var i = this.Wu[0],\n        n = kn(document, new mn(this.Kt, this.nn)),\n        s = gn(n),\n        h = pn(n);\n    return q(s, h, function () {\n      var n = 0,\n          h = 0,\n          r = function r() {\n        for (var i = 0; i < t.Wu.length; i++) {\n          var r = t.Wu[i],\n              u = r.getSize().h,\n              e = c(r.priceAxisWidget()),\n              o = e.getImage();\n          s.drawImage(o, n, h, e.getWidth(), u), h += u, i < t.Wu.length - 1 && (h += 1);\n        }\n      };\n\n      \"left\" === t.$.priceScale.position && (r(), n = c(i.priceAxisWidget()).getWidth()), h = 0;\n\n      for (var u = 0; u < t.Wu.length; u++) {\n        var e = t.Wu[u],\n            o = e.getSize(),\n            f = e.getImage();\n\n        if (s.drawImage(f, n, h, o.w, o.h), h += o.h, u < t.Wu.length - 1) {\n          var a = t.Uu[u],\n              l = a.getSize(),\n              v = a.getImage();\n          s.drawImage(v, n, h, l.w, l.h), h += l.h;\n        }\n      }\n\n      n += i.getSize().w, \"right\" === t.$.priceScale.position && (h = 0, r());\n\n      var d = function d() {\n        var i = c(t.Ju.stub()),\n            r = i.getSize(),\n            u = i.getImage();\n        s.drawImage(u, n, h, r.w, r.h);\n      };\n\n      if (t.$.timeScale.visible) {\n        n = 0, \"left\" === t.$.priceScale.position && (d(), n = c(i.priceAxisWidget()).getWidth());\n        var M = t.Ju.getSize();\n        f = t.Ju.getImage();\n        s.drawImage(f, n, h, M.w, M.h), \"right\" === t.$.priceScale.position && (n = i.getSize().w, d(), s.restore());\n      }\n    }), n;\n  }, t.prototype.ne = function () {\n    for (var t = 0, i = 0, n = 0, s = this.Wu; n < s.length; n++) {\n      var h = s[n];\n      \"none\" !== this.$.priceScale.position && (i = Math.max(i, c(h.priceAxisWidget()).optimalWidth())), t += h.stretchFactor();\n    }\n\n    var r = this.Kt,\n        u = this.nn,\n        e = Math.max(r - i, 0),\n        o = 1 * this.Uu.length,\n        f = this.$.timeScale.visible ? this.Ju.optimalHeight() : 0;\n    f % 2 && (f += 1);\n\n    for (var a = o + f, l = u < a ? 0 : u - a, v = l / t, d = 0, M = 0; M < this.Wu.length; ++M) {\n      (h = this.Wu[M]).setState(this.F.panes()[M]);\n      var w,\n          b = 0;\n      b = M === this.Wu.length - 1 ? l - d : Math.round(h.stretchFactor() * v), d += w = Math.max(b, 2), h.setSize(new mn(e, w)), \"none\" !== this.$.priceScale.position && h.setPriceAxisSize(i), h.state() && this.F.setPaneHeight(h.state(), w);\n    }\n\n    this.Ju.setSizes(new mn(e, f), i), this.F.setWidth(e), this.Hu !== i && (this.Hu = i, this.ju.fire(i));\n  }, t.prototype.Xu = function (t) {\n    var i = t.deltaX / 100,\n        n = -t.deltaY / 100;\n\n    if (0 !== i && this.$.handleScroll.mouseWheel || 0 !== n && this.$.handleScale.mouseWheel) {\n      switch (t.cancelable && t.preventDefault(), t.deltaMode) {\n        case t.DOM_DELTA_PAGE:\n          i *= 120, n *= 120;\n          break;\n\n        case t.DOM_DELTA_LINE:\n          i *= 32, n *= 32;\n      }\n\n      if (0 !== n && this.$.handleScale.mouseWheel) {\n        var s = Math.sign(n) * Math.min(1, Math.abs(n)),\n            h = t.clientX - this.Au.getBoundingClientRect().left;\n        this.model().zoomTime(h, s);\n      }\n\n      0 !== i && this.$.handleScroll.mouseWheel && this.model().scrollChart(-80 * i);\n    }\n  }, t.prototype.ie = function (t) {\n    var i = t.fullInvalidation();\n\n    if (3 === i && this.se(), 3 === i || 2 === i) {\n      for (var n = this.F.panes(), s = 0; s < n.length; s++) {\n        t.invalidateForPane(s).autoScale && n[s].momentaryAutoScale();\n      }\n\n      t.getFitContent() && this.F.timeScale().fitContent();\n      var h = t.getTargetTimeRange();\n      null !== h && this.F.timeScale().setTimePointsRange(h), this.Ju.update();\n    }\n\n    this.paint(t);\n  }, t.prototype.fh = function (t) {\n    var i = this;\n    null !== this.Yu ? this.Yu.merge(t) : this.Yu = t, this.Ku || (this.Ku = !0, this.qu = window.requestAnimationFrame(function () {\n      i.Ku = !1, i.qu = 0, null !== i.Yu && (i.ie(i.Yu), i.Yu = null);\n    }));\n  }, t.prototype.se = function () {\n    this.Gu();\n  }, t.prototype.te = function (t) {\n    this.$u.removeChild(t.getElement()), t.destroy();\n  }, t.prototype.Gu = function () {\n    for (var t = this.F.panes(), i = t.length, n = this.Wu.length, s = i; s < n; s++) {\n      var h = a(this.Wu.pop());\n      this.$u.removeChild(h.getElement()), h.clicked().unsubscribeAll(this), h.destroy(), void 0 !== (r = this.Uu.pop()) && this.te(r);\n    }\n\n    for (s = n; s < i; s++) {\n      if ((h = new qn(this, t[s])).clicked().subscribe(this.he.bind(this), this), this.Wu.push(h), s > 1) {\n        var r = new Pn(this, s - 1, s, !0);\n        this.Uu.push(r), this.$u.insertBefore(r.getElement(), this.Ju.getElement());\n      }\n\n      this.$u.insertBefore(h.getElement(), this.Ju.getElement());\n    }\n\n    for (s = 0; s < i; s++) {\n      var u = t[s];\n      (h = this.Wu[s]).state() !== u ? h.setState(u) : h.updatePriceAxisWidget();\n    }\n\n    this.Qu(), this.ne();\n  }, t.prototype.ue = function (t, i) {\n    var n,\n        s = new Map();\n    null !== t && this.F.serieses().forEach(function (i) {\n      var n = i.dataAt(t);\n      null !== n && s.set(i, n);\n    });\n\n    if (null !== t) {\n      var h = this.F.timeScale().indexToUserTime(t);\n      null !== h && (n = h);\n    }\n\n    var r = this.model().hoveredSource(),\n        u = null !== r && r.source instanceof Ci ? r.source : void 0,\n        e = null !== r && void 0 !== r.object ? r.object.externalId : void 0;\n    return {\n      time: n,\n      point: i || void 0,\n      hoveredSeries: u,\n      seriesPrices: s,\n      hoveredObject: e\n    };\n  }, t.prototype.he = function (t, i) {\n    var n = this;\n    this.Jr.fire(function () {\n      return n.ue(t, i);\n    });\n  }, t.prototype.Zu = function (t, i) {\n    var n = this;\n    this.oh.fire(function () {\n      return n.ue(t, i);\n    });\n  }, t.prototype.Qu = function () {\n    var t = this.$.timeScale.visible ? \"\" : \"none\";\n    this.Ju.getElement().style.display = t;\n  }, t;\n}();\n\nfunction $n(t) {\n  if (!Fi(t)) throw new Error(\"time must be of type BusinessDay\");\n  var i = new Date(Date.UTC(t.year, t.month - 1, t.day, 0, 0, 0, 0));\n  return {\n    timestamp: Math.round(i.getTime() / 1e3),\n    businessDay: t\n  };\n}\n\nfunction _n(t) {\n  if (!Pi(t)) throw new Error(\"time must be of type isUTCTimestamp\");\n  return {\n    timestamp: t\n  };\n}\n\nfunction Xn(t) {\n  return 0 === t.length ? null : Fi(t[0].time) ? $n : _n;\n}\n\nfunction Zn(t) {\n  return Pi(t) ? _n(t) : Fi(t) ? $n(t) : $n(es(t));\n}\n\nfunction Jn(t, i) {\n  var n = t.value,\n      s = null;\n  return \"color\" in t && void 0 !== t.color && (s = i.addColor(t.color)), [n, n, n, n, s];\n}\n\nfunction Gn(t, i) {\n  return [t.open, t.high, t.low, t.close, null];\n}\n\nvar Qn = {\n  Candlestick: Gn,\n  Bar: Gn,\n  Area: Jn,\n  Histogram: Jn,\n  Line: Jn\n};\n\nfunction ts(t) {\n  return Qn[t];\n}\n\nfunction is(t) {\n  return 60 * t * 60 * 1e3;\n}\n\nfunction ns(t) {\n  return 60 * t * 1e3;\n}\n\nvar ss,\n    hs = [{\n  divisor: 1,\n  span: 20\n}, {\n  divisor: (ss = 1, 1e3 * ss),\n  span: 19\n}, {\n  divisor: ns(1),\n  span: 20\n}, {\n  divisor: ns(5),\n  span: 21\n}, {\n  divisor: ns(30),\n  span: 22\n}, {\n  divisor: is(1),\n  span: 30\n}, {\n  divisor: is(3),\n  span: 31\n}, {\n  divisor: is(6),\n  span: 32\n}, {\n  divisor: is(12),\n  span: 33\n}];\n\nfunction rs(t, i) {\n  if (null !== i) {\n    var n = new Date(1e3 * i.timestamp),\n        s = new Date(1e3 * t.timestamp);\n    if (s.getUTCFullYear() !== n.getUTCFullYear()) return 70;\n    if (s.getUTCMonth() !== n.getUTCMonth()) return 60;\n    if (s.getUTCDate() !== n.getUTCDate()) return 50;\n\n    for (var h = hs.length - 1; h >= 0; --h) {\n      if (Math.floor(n.getTime() / hs[h].divisor) !== Math.floor(s.getTime() / hs[h].divisor)) return hs[h].span;\n    }\n  }\n\n  return 20;\n}\n\nfunction us(t, i) {\n  return t.timestamp < i.timestamp;\n}\n\nfunction es(t) {\n  var i = new Date(t);\n  if (isNaN(i.getTime())) throw new Error(\"Invalid date string=\" + t + \", expected format=yyyy-mm-dd\");\n  return {\n    day: i.getUTCDate(),\n    month: i.getUTCMonth() + 1,\n    year: i.getUTCFullYear()\n  };\n}\n\nfunction os(t) {\n  w(t.time) && (t.time = es(t.time));\n}\n\nvar fs,\n    as = function () {\n  function t() {\n    this.ee = new Map(), this.oe = new Map(), this.fe = [];\n  }\n\n  return t.prototype.destroy = function () {\n    this.ee.clear(), this.oe.clear(), this.fe = [];\n  }, t.prototype.setSeriesData = function (t, i) {\n    var n = this;\n    t.clearData(), function (t) {\n      t.forEach(os);\n    }(i), this.ee.forEach(function (i) {\n      return i.mapping[\"delete\"](t);\n    });\n    var s = Xn(i);\n    null !== s && i.forEach(function (i) {\n      var h = s(i.time),\n          r = n.ee.get(h.timestamp) || {\n        index: 0,\n        mapping: new Map(),\n        timePoint: h\n      };\n      r.mapping.set(t, i), n.ee.set(h.timestamp, r);\n    });\n    var h = new Map();\n    return this.ee.forEach(function (t, i) {\n      t.mapping.size > 0 && h.set(i, t);\n    }), this.ae(h);\n  }, t.prototype.removeSeries = function (t) {\n    return this.setSeriesData(t, []);\n  }, t.prototype.updateSeriesData = function (t, i) {\n    os(i);\n    var n = t.data().bars();\n    if (n.size() > 0) if (void 0 !== c(n.last()).time.businessDay) {\n      if (!Fi(i.time)) throw new Error(\"time must be of type BusinessDay\");\n    } else if (!Pi(i.time)) throw new Error(\"time must be of type isUTCTimestamp\");\n    var s = c(Xn([i]))(i.time),\n        h = this.ee.get(s.timestamp) || {\n      index: 0,\n      mapping: new Map(),\n      timePoint: s\n    },\n        r = 0 === h.mapping.size;\n    h.mapping.set(t, i);\n    var u = !1;\n\n    if (r) {\n      var e = this.ee.size;\n      this.fe.length > 0 && this.fe[this.fe.length - 1].timestamp > s.timestamp ? (e = Ct(this.fe, s, us), this.fe.splice(e, 0, s), this.ce(e), u = !0) : this.fe.push(s), h.index = e, this.oe.set(h.index, s);\n    }\n\n    this.ee.set(s.timestamp, h);\n\n    var o = new Map(),\n        f = function f(i) {\n      var n = a(l.oe.get(i));\n      a(l.ee.get(n.timestamp)).mapping.forEach(function (s, h) {\n        if (u || h === t) {\n          var r = ts(h.seriesType()),\n              e = o.get(h) || {\n            update: []\n          },\n              f = {\n            index: i,\n            time: n,\n            value: r(s, h.palette())\n          };\n          e.update.push(f), o.set(h, e);\n        }\n      });\n    },\n        l = this;\n\n    for (e = h.index; e < this.ee.size; ++e) {\n      f(e);\n    }\n\n    var v = r ? this.le(h.index) : [],\n        d = r ? this.fe.slice(h.index) : [];\n    return {\n      timeScaleUpdate: {\n        seriesUpdates: o,\n        changes: d,\n        index: h.index,\n        marks: v\n      }\n    };\n  }, t.prototype.ae = function (t) {\n    var i = this;\n    this.ee = t, this.fe = Array.from(this.ee.values()).map(function (t) {\n      return t.timePoint;\n    }), this.fe.sort(function (t, i) {\n      return t.timestamp - i.timestamp;\n    });\n    var n = new Map();\n    this.fe.forEach(function (t, s) {\n      var h = a(i.ee.get(t.timestamp));\n      h.index = s, h.mapping.forEach(function (i, h) {\n        var r = ts(h.seriesType()),\n            u = n.get(h) || {\n          update: []\n        },\n            e = {\n          index: s,\n          time: t,\n          value: r(i, h.palette())\n        };\n        u.update.push(e), n.set(h, u);\n      });\n    });\n    var s = null,\n        h = this.fe.map(function (t, i) {\n      var n = rs(t, s);\n      return s = t, {\n        span: n,\n        time: t,\n        index: i\n      };\n    }),\n        r = {\n      seriesUpdates: n,\n      changes: this.fe.slice(),\n      index: 0,\n      marks: h\n    };\n    return this.ve(), {\n      timeScaleUpdate: r\n    };\n  }, t.prototype.ce = function (t) {\n    for (var i = this.oe.size - 1; i >= t; --i) {\n      var n = a(this.oe.get(i)),\n          s = i + 1;\n      a(this.ee.get(n.timestamp)).index = s, this.oe[\"delete\"](i), this.oe.set(s, n);\n    }\n  }, t.prototype.ve = function () {\n    var t = this;\n    this.oe.clear(), this.ee.forEach(function (i, n) {\n      t.oe.set(i.index, i.timePoint);\n    });\n  }, t.prototype.le = function (t) {\n    for (var i = [], n = this.oe.get(t - 1) || null, s = t; s < this.oe.size; ++s) {\n      var h = a(this.oe.get(s)),\n          r = rs(h, n);\n      n = h, i.push({\n        span: r,\n        time: h,\n        index: s\n      });\n    }\n\n    return i;\n  }, t;\n}(),\n    cs = {\n  color: \"#FF0000\",\n  price: 0,\n  lineStyle: 2,\n  lineWidth: 1,\n  axisLabelVisible: !0\n},\n    ls = function () {\n  function t(t) {\n    this.ii = t;\n  }\n\n  return t.prototype.applyOptions = function (t) {\n    this.ii.applyOptions(t);\n  }, t.prototype.options = function () {\n    return this.ii.options();\n  }, t.prototype.priceLine = function () {\n    return this.ii;\n  }, t;\n}(),\n    vs = function () {\n  function t(t, i) {\n    this._series = t, this._dataUpdatesConsumer = i;\n  }\n\n  return t.prototype.destroy = function () {\n    delete this._series, delete this._dataUpdatesConsumer;\n  }, t.prototype.priceFormatter = function () {\n    return this._series.formatter();\n  }, t.prototype.series = function () {\n    return this._series;\n  }, t.prototype.priceToCoordinate = function (t) {\n    var i = this._series.firstValue();\n\n    return null === i ? null : this._series.priceScale().priceToCoordinate(t, i.value);\n  }, t.prototype.coordinateToPrice = function (t) {\n    var i = this._series.firstValue();\n\n    return null === i ? null : this._series.priceScale().coordinateToPrice(t, i.value);\n  }, t.prototype.setData = function (t) {\n    this._dataUpdatesConsumer.applyNewData(this._series, t);\n  }, t.prototype.update = function (t) {\n    this._dataUpdatesConsumer.updateData(this._series, t);\n  }, t.prototype.setMarkers = function (t) {\n    var i = t.map(function (t) {\n      return _e(_e({}, t), {\n        time: Zn(t.time)\n      });\n    });\n\n    this._series.setMarkers(i);\n  }, t.prototype.applyOptions = function (t) {\n    this._series.applyOptions(t);\n  }, t.prototype.options = function () {\n    return p(this._series.options());\n  }, t.prototype.createPriceLine = function (t) {\n    var i = v(p(cs), t),\n        n = this._series.createPriceLine(i);\n\n    return new ls(n);\n  }, t.prototype.removePriceLine = function (t) {\n    this._series.removePriceLine(t.priceLine());\n  }, t;\n}(),\n    ds = function (t) {\n  function i() {\n    return null !== t && t.apply(this, arguments) || this;\n  }\n\n  return u(i, t), i.prototype.applyOptions = function (i) {\n    Vi(i), t.prototype.applyOptions.call(this, i);\n  }, i;\n}(vs),\n    Ms = {\n  width: 0,\n  height: 0,\n  layout: {\n    backgroundColor: \"#FFFFFF\",\n    textColor: \"#191919\",\n    fontSize: 11,\n    fontFamily: \"'Trebuchet MS', Roboto, Ubuntu, sans-serif\"\n  },\n  crosshair: {\n    vertLine: {\n      color: \"#758696\",\n      width: 1,\n      style: 3,\n      visible: !0,\n      labelVisible: !0,\n      labelBackgroundColor: \"#4c525e\"\n    },\n    horzLine: {\n      color: \"#758696\",\n      width: 1,\n      style: 3,\n      visible: !0,\n      labelVisible: !0,\n      labelBackgroundColor: \"#4c525e\"\n    },\n    mode: 1\n  },\n  grid: {\n    vertLines: {\n      color: \"#D6DCDE\",\n      style: 0,\n      visible: !0\n    },\n    horzLines: {\n      color: \"#D6DCDE\",\n      style: 0,\n      visible: !0\n    }\n  },\n  priceScale: {\n    autoScale: !0,\n    mode: 0,\n    invertScale: !1,\n    alignLabels: !0,\n    position: \"right\",\n    borderVisible: !0,\n    borderColor: \"#2B2B43\",\n    entireTextOnly: !1,\n    scaleMargins: {\n      bottom: .1,\n      top: .2\n    }\n  },\n  timeScale: {\n    rightOffset: 0,\n    barSpacing: 6,\n    fixLeftEdge: !1,\n    lockVisibleTimeRangeOnResize: !1,\n    rightBarStaysOnScroll: !1,\n    borderVisible: !0,\n    borderColor: \"#2B2B43\",\n    visible: !0,\n    timeVisible: !1,\n    secondsVisible: !0\n  },\n  watermark: {\n    color: \"rgba(0, 0, 0, 0)\",\n    visible: !1,\n    fontSize: 48,\n    text: \"\",\n    horzAlign: \"center\",\n    vertAlign: \"center\"\n  },\n  localization: {\n    locale: navigator.language,\n    dateFormat: \"dd MMM 'yy\"\n  },\n  handleScroll: {\n    mouseWheel: !0,\n    pressedMouseMove: !0,\n    horzTouchDrag: !0,\n    vertTouchDrag: !0\n  },\n  handleScale: {\n    axisPressedMouseMove: !0,\n    axisDoubleClickReset: !0,\n    mouseWheel: !0,\n    pinch: !0\n  }\n},\n    ws = {\n  upColor: \"#26a69a\",\n  downColor: \"#ef5350\",\n  wickVisible: !0,\n  borderVisible: !0,\n  borderColor: \"#378658\",\n  borderUpColor: \"#26a69a\",\n  borderDownColor: \"#ef5350\",\n  wickColor: \"#737375\",\n  wickUpColor: \"#26a69a\",\n  wickDownColor: \"#ef5350\"\n},\n    bs = {\n  upColor: \"#26a69a\",\n  downColor: \"#ef5350\",\n  openVisible: !0,\n  thinBars: !0\n},\n    ms = {\n  color: \"#2196f3\",\n  lineStyle: 0,\n  lineWidth: 3,\n  lineType: 0,\n  crosshairMarkerVisible: !0,\n  crosshairMarkerRadius: 4\n},\n    ps = {\n  topColor: \"rgba( 46, 220, 135, 0.4)\",\n  bottomColor: \"rgba( 40, 221, 100, 0)\",\n  lineColor: \"#33D778\",\n  lineStyle: 0,\n  lineWidth: 3,\n  lineType: 0,\n  crosshairMarkerVisible: !0,\n  crosshairMarkerRadius: 4\n},\n    gs = {\n  color: \"#26a69a\",\n  base: 0\n},\n    ys = {\n  title: \"\",\n  lastValueVisible: !0,\n  priceLineVisible: !0,\n  priceLineSource: 0,\n  priceLineWidth: 1,\n  priceLineColor: \"\",\n  priceLineStyle: 2,\n  baseLineVisible: !0,\n  baseLineWidth: 1,\n  baseLineColor: \"#B2B5BE\",\n  baseLineStyle: 0,\n  priceFormat: {\n    type: \"price\",\n    precision: 2,\n    minMove: .01\n  }\n},\n    ks = function () {\n  function t(t) {\n    this.l = t;\n  }\n\n  return t.prototype.destroy = function () {\n    delete this.l;\n  }, t.prototype.applyOptions = function (t) {\n    this.l.applyOptions({\n      priceScale: t\n    });\n  }, t.prototype.options = function () {\n    return this.B().options();\n  }, t.prototype.B = function () {\n    return this.l.mainPriceScale();\n  }, t;\n}();\n\n!function (t) {\n  t[t.AnimationDurationMs = 1e3] = \"AnimationDurationMs\";\n}(fs || (fs = {}));\n\nvar Ns = function () {\n  function t(t) {\n    this.F = t;\n  }\n\n  return t.prototype.destroy = function () {\n    delete this.F;\n  }, t.prototype.scrollPosition = function () {\n    return this.$n().rightOffset();\n  }, t.prototype.scrollToPosition = function (t, i) {\n    i ? this.$n().scrollToOffsetAnimated(t, 1e3) : this.$n().setRightOffset(t);\n  }, t.prototype.scrollToRealTime = function () {\n    this.$n().scrollToRealTime();\n  }, t.prototype.getVisibleRange = function () {\n    var t = this.$n().visibleBars();\n    if (null === t) return null;\n    var i = this.F.timeScale().points(),\n        n = c(i.firstIndex()),\n        s = c(i.lastIndex());\n    return {\n      from: Ss(c(i.valueAt(Math.max(n, t.firstBar())))),\n      to: Ss(c(i.valueAt(Math.min(s, t.lastBar()))))\n    };\n  }, t.prototype.setVisibleRange = function (t) {\n    var i = {\n      from: Zn(t.from),\n      to: Zn(t.to)\n    };\n    this.F.setTargetTimeRange(i);\n  }, t.prototype.resetTimeScale = function () {\n    this.F.resetTimeScale();\n  }, t.prototype.fitContent = function () {\n    this.F.fitContent();\n  }, t.prototype.applyOptions = function (t) {\n    this.$n().applyOptions(t);\n  }, t.prototype.options = function () {\n    return p(this.$n().options());\n  }, t.prototype.$n = function () {\n    return this.F.timeScale();\n  }, t;\n}();\n\nfunction Ss(t) {\n  return t.businessDay || t.timestamp;\n}\n\nfunction xs(t) {\n  if (void 0 !== t && \"custom\" !== t.type) {\n    var i = t;\n    void 0 !== i.minMove && void 0 === i.precision && (i.precision = function (t) {\n      if (t >= 1) return 0;\n\n      for (var i = 0; i < 8; i++) {\n        var n = Math.round(t);\n        if (Math.abs(n - t) < 1e-8) return i;\n        t *= 10;\n      }\n\n      return i;\n    }(i.minMove));\n  }\n}\n\nfunction Ds(t) {\n  var i = t.handleScale;\n  m(i) && (t.handleScale = {\n    axisDoubleClickReset: i,\n    axisPressedMouseMove: i,\n    mouseWheel: i,\n    pinch: i\n  });\n  var n = t.handleScroll;\n  return m(n) && (t.handleScroll = {\n    horzTouchDrag: n,\n    vertTouchDrag: n,\n    mouseWheel: n,\n    pressedMouseMove: n\n  }), t;\n}\n\nvar Cs = function () {\n  function t(t, i) {\n    var n = this;\n    this.de = new as(), this.Me = new rt(), this.we = new Map(), this.be = new Map(), this.me = new rt(), this.pe = new rt();\n    var s = void 0 === i ? p(Ms) : v(p(Ms), Ds(i));\n    this.ur = new Kn(t, s), this.ur.model().timeScale().visibleBarsChanged().subscribe(this.ge.bind(this)), this.ur.clicked().subscribe(function (t) {\n      n.me.hasListeners() && n.me.fire(n.ye(t()));\n    }, this), this.ur.crosshairMoved().subscribe(function (t) {\n      n.pe.hasListeners() && n.pe.fire(n.ye(t()));\n    }, this);\n    var h = this.ur.model();\n    this.ke = new ks(h), this.Ne = new Ns(h);\n  }\n\n  return t.prototype.remove = function () {\n    this.ur.model().timeScale().visibleBarsChanged().unsubscribeAll(this), this.ur.clicked().unsubscribeAll(this), this.ur.crosshairMoved().unsubscribeAll(this), this.ke.destroy(), this.Ne.destroy(), this.ur.destroy(), delete this.ur, this.we.forEach(function (t, i) {\n      i.destroy();\n    }), this.we.clear(), this.be.clear(), this.Me.destroy(), this.me.destroy(), this.pe.destroy(), this.de.destroy(), delete this.de;\n  }, t.prototype.resize = function (t, i, n) {\n    this.ur.resize(t, i, n);\n  }, t.prototype.addAreaSeries = function (t) {\n    void 0 === t && (t = {}), xs(t.priceFormat);\n    var i = v(p(ys), ps, t),\n        n = this.ur.model().createSeries(\"Area\", i),\n        s = new vs(n, this);\n    return this.we.set(s, n), this.be.set(n, s), s;\n  }, t.prototype.addBarSeries = function (t) {\n    void 0 === t && (t = {}), xs(t.priceFormat);\n    var i = v(p(ys), bs, t),\n        n = this.ur.model().createSeries(\"Bar\", i),\n        s = new vs(n, this);\n    return this.we.set(s, n), this.be.set(n, s), s;\n  }, t.prototype.addCandlestickSeries = function (t) {\n    void 0 === t && (t = {}), Vi(t), xs(t.priceFormat);\n    var i = v(p(ys), ws, t),\n        n = this.ur.model().createSeries(\"Candlestick\", i),\n        s = new ds(n, this);\n    return this.we.set(s, n), this.be.set(n, s), s;\n  }, t.prototype.addHistogramSeries = function (t) {\n    void 0 === t && (t = {}), xs(t.priceFormat);\n    var i = v(p(ys), gs, t),\n        n = this.ur.model().createSeries(\"Histogram\", i),\n        s = new vs(n, this);\n    return this.we.set(s, n), this.be.set(n, s), s;\n  }, t.prototype.addLineSeries = function (t) {\n    void 0 === t && (t = {}), xs(t.priceFormat);\n    var i = v(p(ys), ms, t),\n        n = this.ur.model().createSeries(\"Line\", i),\n        s = new vs(n, this);\n    return this.we.set(s, n), this.be.set(n, s), s;\n  }, t.prototype.removeSeries = function (t) {\n    var i = t,\n        n = a(this.we.get(i)),\n        s = this.de.removeSeries(n),\n        h = this.ur.model();\n    h.removeSeries(n);\n    var r = s.timeScaleUpdate;\n    h.updateTimeScale(r.index, r.changes, r.marks, !0), r.seriesUpdates.forEach(function (t, i) {\n      i.updateData(t.update);\n    }), h.updateTimeScaleBaseIndex(0), this.we[\"delete\"](i), this.be[\"delete\"](n);\n  }, t.prototype.applyNewData = function (t, i) {\n    var n = this.de.setSeriesData(t, i),\n        s = this.ur.model(),\n        h = n.timeScaleUpdate;\n    s.updateTimeScale(h.index, h.changes, h.marks, !0), h.seriesUpdates.forEach(function (t, i) {\n      i.updateData(t.update, !0);\n    }), s.updateTimeScaleBaseIndex(0);\n  }, t.prototype.updateData = function (t, i) {\n    var n = this.de.updateSeriesData(t, i),\n        s = this.ur.model(),\n        h = n.timeScaleUpdate;\n    s.updateTimeScale(h.index, h.changes, h.marks, !1), h.seriesUpdates.forEach(function (t, i) {\n      i.updateData(t.update);\n    }), s.updateTimeScaleBaseIndex(0);\n  }, t.prototype.subscribeClick = function (t) {\n    this.me.subscribe(t);\n  }, t.prototype.unsubscribeClick = function (t) {\n    this.me.unsubscribe(t);\n  }, t.prototype.subscribeCrosshairMove = function (t) {\n    this.pe.subscribe(t);\n  }, t.prototype.unsubscribeCrosshairMove = function (t) {\n    this.pe.unsubscribe(t);\n  }, t.prototype.subscribeVisibleTimeRangeChange = function (t) {\n    this.Me.subscribe(t);\n  }, t.prototype.unsubscribeVisibleTimeRangeChange = function (t) {\n    this.Me.unsubscribe(t);\n  }, t.prototype.priceScale = function () {\n    return this.ke;\n  }, t.prototype.timeScale = function () {\n    return this.Ne;\n  }, t.prototype.applyOptions = function (t) {\n    this.ur.applyOptions(Ds(t));\n  }, t.prototype.options = function () {\n    return this.ur.options();\n  }, t.prototype.takeScreenshot = function () {\n    return this.ur.takeScreenshot();\n  }, t.prototype.ge = function () {\n    this.Me.hasListeners() && this.Me.fire(this.timeScale().getVisibleRange());\n  }, t.prototype.Se = function (t) {\n    return a(this.be.get(t));\n  }, t.prototype.ye = function (t) {\n    var i = this,\n        n = new Map();\n    t.seriesPrices.forEach(function (t, s) {\n      n.set(i.Se(s), t);\n    });\n    var s = void 0 === t.hoveredSeries ? void 0 : this.Se(t.hoveredSeries);\n    return {\n      time: t.time && (t.time.businessDay || t.time.timestamp),\n      point: t.point,\n      hoveredSeries: s,\n      hoveredMarkerId: t.hoveredObject,\n      seriesPrices: n\n    };\n  }, t;\n}();\n\nfunction Ts(t, i) {\n  var n = c(w(t) ? document.getElementById(t) : t);\n  return new Cs(n, i);\n}\n\nfunction Es() {\n  return \"2.0.0\";\n}\n\nexport { H as CrosshairMode, n as LineStyle, i as LineType, Li as PriceLineSource, xi as PriceScaleMode, Ts as createChart, Fi as isBusinessDay, Pi as isUTCTimestamp, Es as version };","map":null,"metadata":{},"sourceType":"module"}
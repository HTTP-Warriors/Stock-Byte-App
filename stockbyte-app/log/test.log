  [1m[35m (109.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "stockbyte_app_test"[0m
  [1m[35m (438.3ms)[0m  [1m[35mCREATE DATABASE "stockbyte_app_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "portfolios" CASCADE[0m
  [1m[35m (25.7ms)[0m  [1m[35mCREATE TABLE "portfolios" ("id" bigserial primary key, "user_id" integer, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "stocks" CASCADE[0m
  [1m[35m (24.1ms)[0m  [1m[35mCREATE TABLE "stocks" ("id" bigserial primary key, "symbol" character varying, "portfolio_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "trades" CASCADE[0m
  [1m[35m (12.1ms)[0m  [1m[35mCREATE TABLE "trades" ("id" bigserial primary key, "action" integer, "price" float, "quantity" integer, "stock_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (23.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (12.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (12.4ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35m (26.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (5.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200407174453)[0m
  [1m[35m (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20200406182701),
(20200406213429),
(20200406213719),
(20200406213945),
(20200407172821);

[0m
  [1m[35m (24.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2020-04-07 18:29:29.639825"], ["updated_at", "2020-04-07 18:29:29.639825"]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "22d3a881884464009a529fdf38f34929e4ebea04"], ["created_at", "2020-04-07 18:29:29.644654"], ["updated_at", "2020-04-07 18:29:29.644654"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$2WECv923b0KGwkZmut4Yy.nVBiks0xefz5VOtP4lDkF33UPQ6INOa"], ["created_at", "2020-04-07 18:44:55.532075"], ["updated_at", "2020-04-07 18:44:55.532075"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$5OXyTJcFWB5xrywjkME53ObsY3PQmwuMkWM2LpdPBKnc.WgdGILvi"], ["created_at", "2020-04-07 18:45:08.172653"], ["updated_at", "2020-04-07 18:45:08.172653"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.5ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["name", "test_portfolio"], ["created_at", "2020-04-07 18:45:08.193831"], ["updated_at", "2020-04-07 18:45:08.193831"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 1], ["created_at", "2020-04-07 18:45:08.207167"], ["updated_at", "2020-04-07 18:45:08.207167"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTrade Create (0.4ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 1], ["created_at", "2020-04-07 18:45:08.220597"], ["updated_at", "2020-04-07 18:45:08.220597"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades" for 127.0.0.1 at 2020-04-07 18:45:08 +0000
Processing by TradesController#index as HTML
  [1m[36mTrade Load (0.3ms)[0m  [1m[34mSELECT "trades".* FROM "trades"[0m
Completed 200 OK in 7ms (Views: 0.9ms | ActiveRecord: 0.3ms | Allocations: 562)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$CN05KymNCFpksRXs1xgGwuYvd8Sh5zqB88BfijvYOYsmGrf0kT7QK"], ["created_at", "2020-04-07 18:45:20.107576"], ["updated_at", "2020-04-07 18:45:20.107576"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 3], ["name", "test_portfolio"], ["created_at", "2020-04-07 18:45:20.121572"], ["updated_at", "2020-04-07 18:45:20.121572"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 2], ["created_at", "2020-04-07 18:45:20.132308"], ["updated_at", "2020-04-07 18:45:20.132308"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTrade Create (0.4ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 2], ["created_at", "2020-04-07 18:45:20.144511"], ["updated_at", "2020-04-07 18:45:20.144511"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades" for 127.0.0.1 at 2020-04-07 18:45:20 +0000
Processing by TradesController#index as HTML
  [1m[36mTrade Load (0.4ms)[0m  [1m[34mSELECT "trades".* FROM "trades"[0m
Completed 200 OK in 7ms (Views: 1.1ms | ActiveRecord: 0.4ms | Allocations: 562)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (108.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "stockbyte_app_test"[0m
  [1m[35m (372.0ms)[0m  [1m[35mCREATE DATABASE "stockbyte_app_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (5.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "portfolios" CASCADE[0m
  [1m[35m (26.1ms)[0m  [1m[35mCREATE TABLE "portfolios" ("id" bigserial primary key, "user_id" integer, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "stocks" CASCADE[0m
  [1m[35m (23.5ms)[0m  [1m[35mCREATE TABLE "stocks" ("id" bigserial primary key, "symbol" character varying, "total_quantity" integer, "portfolio_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "trades" CASCADE[0m
  [1m[35m (12.6ms)[0m  [1m[35mCREATE TABLE "trades" ("id" bigserial primary key, "action" integer, "price" float, "quantity" integer, "stock_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (23.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (12.6ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (12.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35m (22.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200407174453)[0m
  [1m[35m (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20200406182701),
(20200406213429),
(20200406213719),
(20200406213945),
(20200407172821);

[0m
  [1m[35m (24.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2020-04-07 22:54:02.199761"], ["updated_at", "2020-04-07 22:54:02.199761"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "19e38f71627ba3bcd4006067fdcce42ca0fb18ca"], ["created_at", "2020-04-07 22:54:02.204125"], ["updated_at", "2020-04-07 22:54:02.204125"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$5y3w8/P/Yk6zoIU6PzkIxOomJLtanWPkPJhiky0S9oN0no6RmyxTK"], ["created_at", "2020-04-07 22:54:02.289735"], ["updated_at", "2020-04-07 22:54:02.289735"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["name", "test_portfolio"], ["created_at", "2020-04-07 22:54:02.308656"], ["updated_at", "2020-04-07 22:54:02.308656"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 1], ["created_at", "2020-04-07 22:54:02.320737"], ["updated_at", "2020-04-07 22:54:02.320737"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTrade Create (0.4ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 1], ["created_at", "2020-04-07 22:54:02.332097"], ["updated_at", "2020-04-07 22:54:02.332097"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades" for 127.0.0.1 at 2020-04-07 22:54:02 +0000
Processing by TradesController#index as HTML
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.0ms | Allocations: 941)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$6IWyrDLdPes5AjVn0BR9OuYD.dzgqWiG/Mtr..EajMy/gBn6HMyZG"], ["created_at", "2020-04-07 22:56:47.536729"], ["updated_at", "2020-04-07 22:56:47.536729"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["name", "test_portfolio"], ["created_at", "2020-04-07 22:56:47.553793"], ["updated_at", "2020-04-07 22:56:47.553793"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 2], ["created_at", "2020-04-07 22:56:47.566269"], ["updated_at", "2020-04-07 22:56:47.566269"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 2], ["created_at", "2020-04-07 22:56:47.577943"], ["updated_at", "2020-04-07 22:56:47.577943"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-07 22:56:47 +0000
Processing by TradesController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio", "stock"=>"TEST"}
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.0ms | Allocations: 941)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$2MOs1IAnTXvM4/UOYpKtrOreH9CK1.NTgBlmcurWGncQUxhzjLF3."], ["created_at", "2020-04-07 23:00:31.726978"], ["updated_at", "2020-04-07 23:00:31.726978"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 3], ["name", "test_portfolio"], ["created_at", "2020-04-07 23:00:31.741926"], ["updated_at", "2020-04-07 23:00:31.741926"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 3], ["created_at", "2020-04-07 23:00:31.754266"], ["updated_at", "2020-04-07 23:00:31.754266"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 3], ["created_at", "2020-04-07 23:00:31.766211"], ["updated_at", "2020-04-07 23:00:31.766211"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-07 23:00:31 +0000
Processing by TradesController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio", "stock"=>"TEST"}
Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.0ms | Allocations: 4211)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$8kzvc6L3bbjlZb16iVKv9.ceTZ34W0e2M8TO4LzyzlZvU8.63pkoW"], ["created_at", "2020-04-07 23:00:50.663351"], ["updated_at", "2020-04-07 23:00:50.663351"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 4], ["name", "test_portfolio"], ["created_at", "2020-04-07 23:00:50.678186"], ["updated_at", "2020-04-07 23:00:50.678186"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 4], ["created_at", "2020-04-07 23:00:50.690433"], ["updated_at", "2020-04-07 23:00:50.690433"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 4], ["created_at", "2020-04-07 23:00:50.701753"], ["updated_at", "2020-04-07 23:00:50.701753"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-07 23:00:50 +0000
Processing by TradesController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 4], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 4], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 4]]
Completed 200 OK in 13ms (Views: 1.0ms | ActiveRecord: 0.8ms | Allocations: 1792)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$gNRIUNMN/gFnUdsGzsN0r.yT.1C5YgpLLXtnS6aoqhEOURvYsOHgm"], ["created_at", "2020-04-07 23:05:45.112814"], ["updated_at", "2020-04-07 23:05:45.112814"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 5], ["name", "test_portfolio"], ["created_at", "2020-04-07 23:05:45.127065"], ["updated_at", "2020-04-07 23:05:45.127065"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 5], ["created_at", "2020-04-07 23:05:45.139094"], ["updated_at", "2020-04-07 23:05:45.139094"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 5], ["created_at", "2020-04-07 23:05:45.150160"], ["updated_at", "2020-04-07 23:05:45.150160"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-07 23:05:45 +0000
Processing by TradesController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 5], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 5], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 5]]
Completed 200 OK in 12ms (Views: 0.9ms | ActiveRecord: 0.7ms | Allocations: 1792)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$RnjHXhPabhNMkkQgB8yEsOUVdAip5o0Q.h4gVOSJgc54rREL9aEfa"], ["created_at", "2020-04-07 23:05:45.182810"], ["updated_at", "2020-04-07 23:05:45.182810"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 6], ["name", "test_portfolio"], ["created_at", "2020-04-07 23:05:45.185196"], ["updated_at", "2020-04-07 23:05:45.185196"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 6], ["created_at", "2020-04-07 23:05:45.187833"], ["updated_at", "2020-04-07 23:05:45.187833"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$8G1EV/HkbZjpct6jfcPpKeomI..FAIhsMf22OWyIi4kZ1aMSmiqO."], ["created_at", "2020-04-07 23:05:59.476320"], ["updated_at", "2020-04-07 23:05:59.476320"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 7], ["name", "test_portfolio"], ["created_at", "2020-04-07 23:05:59.491146"], ["updated_at", "2020-04-07 23:05:59.491146"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 7], ["created_at", "2020-04-07 23:05:59.503945"], ["updated_at", "2020-04-07 23:05:59.503945"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mTrade Create (0.4ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 7], ["created_at", "2020-04-07 23:05:59.516093"], ["updated_at", "2020-04-07 23:05:59.516093"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-07 23:05:59 +0000
Processing by TradesController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 7], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 7], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 7]]
Completed 200 OK in 13ms (Views: 1.0ms | ActiveRecord: 0.9ms | Allocations: 1792)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$YYB7Z7U3YnsH.AWZG6EzGOBb5mDybOdhhh/PLuXTZ8XcuobjwH/v."], ["created_at", "2020-04-07 23:05:59.551409"], ["updated_at", "2020-04-07 23:05:59.551409"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 8], ["name", "test_portfolio"], ["created_at", "2020-04-07 23:05:59.554070"], ["updated_at", "2020-04-07 23:05:59.554070"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 8], ["created_at", "2020-04-07 23:05:59.556702"], ["updated_at", "2020-04-07 23:05:59.556702"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-07 23:05:59 +0000
Processing by TradesController#create as HTML
  Parameters: {"trade"=>{"action"=>"1", "price"=>"100.0", "quantity"=>"20"}, "portfolio"=>"test_portfolio", "stock"=>"TEST"}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms | Allocations: 837)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$nX83yV1orEO5h40HIoiC4uBjJhuqou3Ly6WzvzsiOyzOP8sM5esZu"], ["created_at", "2020-04-07 23:06:23.607249"], ["updated_at", "2020-04-07 23:06:23.607249"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 9], ["name", "test_portfolio"], ["created_at", "2020-04-07 23:06:23.621772"], ["updated_at", "2020-04-07 23:06:23.621772"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 9], ["created_at", "2020-04-07 23:06:23.633802"], ["updated_at", "2020-04-07 23:06:23.633802"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 9], ["created_at", "2020-04-07 23:06:23.645098"], ["updated_at", "2020-04-07 23:06:23.645098"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-07 23:06:23 +0000
Processing by TradesController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 9], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 9], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 9]]
Completed 200 OK in 12ms (Views: 1.0ms | ActiveRecord: 0.7ms | Allocations: 1792)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$qI5d/zmjMdnajy.PJCVuy.3s6HWI.CCmSlDEr0TS16HlxZSozvE9C"], ["created_at", "2020-04-07 23:06:23.679883"], ["updated_at", "2020-04-07 23:06:23.679883"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 10], ["name", "test_portfolio"], ["created_at", "2020-04-07 23:06:23.682268"], ["updated_at", "2020-04-07 23:06:23.682268"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 10], ["created_at", "2020-04-07 23:06:23.684793"], ["updated_at", "2020-04-07 23:06:23.684793"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-07 23:06:23 +0000
Processing by TradesController#create as HTML
  Parameters: {"trade"=>{"action"=>"1", "price"=>"100.0", "quantity"=>"20"}, "portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 10], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 10], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTrade Create (0.2ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 100.0], ["quantity", 20], ["stock_id", 10], ["created_at", "2020-04-07 23:06:23.695672"], ["updated_at", "2020-04-07 23:06:23.695672"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.9ms | Allocations: 1847)
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" ORDER BY "trades"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$8VYR9h3cM934EAnY7c.fR.Ubv7uUgyrk0ksqHb77Dj9G7XyCaaXJW"], ["created_at", "2020-04-07 23:06:35.766468"], ["updated_at", "2020-04-07 23:06:35.766468"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 11], ["name", "test_portfolio"], ["created_at", "2020-04-07 23:06:35.781198"], ["updated_at", "2020-04-07 23:06:35.781198"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 11], ["created_at", "2020-04-07 23:06:35.793313"], ["updated_at", "2020-04-07 23:06:35.793313"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mTrade Create (0.4ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 11], ["created_at", "2020-04-07 23:06:35.804881"], ["updated_at", "2020-04-07 23:06:35.804881"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-07 23:06:35 +0000
Processing by TradesController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 11], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 11], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 11]]
Completed 200 OK in 13ms (Views: 1.0ms | ActiveRecord: 0.8ms | Allocations: 1792)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$/okhyhDw/vpgEKxhVg6J8uAGodq/T0Tqi12xCUCPdU9dMBbDv5BUS"], ["created_at", "2020-04-07 23:06:35.838095"], ["updated_at", "2020-04-07 23:06:35.838095"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 12], ["name", "test_portfolio"], ["created_at", "2020-04-07 23:06:35.840389"], ["updated_at", "2020-04-07 23:06:35.840389"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 12], ["created_at", "2020-04-07 23:06:35.843038"], ["updated_at", "2020-04-07 23:06:35.843038"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-07 23:06:35 +0000
Processing by TradesController#create as HTML
  Parameters: {"trade"=>{"action"=>"1", "price"=>"100.0", "quantity"=>"20"}, "portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 12], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 12], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 100.0], ["quantity", 20], ["stock_id", 12], ["created_at", "2020-04-07 23:06:35.853903"], ["updated_at", "2020-04-07 23:06:35.853903"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 1.0ms | Allocations: 1847)
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" ORDER BY "trades"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$JG0ETh4fls/Gka9OkKfk7ecY3lUSx.ZuwzRoKlesAEgsAZXlKIIJO"], ["created_at", "2020-04-07 23:10:33.426164"], ["updated_at", "2020-04-07 23:10:33.426164"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 13], ["name", "test_portfolio"], ["created_at", "2020-04-07 23:10:33.441098"], ["updated_at", "2020-04-07 23:10:33.441098"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 13], ["created_at", "2020-04-07 23:10:33.453714"], ["updated_at", "2020-04-07 23:10:33.453714"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 13], ["created_at", "2020-04-07 23:10:33.465150"], ["updated_at", "2020-04-07 23:10:33.465150"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-07 23:10:33 +0000
Processing by TradesController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 13], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 13], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 13]]
Completed 200 OK in 13ms (Views: 0.9ms | ActiveRecord: 0.8ms | Allocations: 1792)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$KjyGLDN/N8L5qvb9/9i2eOUFlxIPNIFp6O330z247eaMeCbGxGb26"], ["created_at", "2020-04-07 23:10:33.498537"], ["updated_at", "2020-04-07 23:10:33.498537"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 14], ["name", "test_portfolio"], ["created_at", "2020-04-07 23:10:33.500953"], ["updated_at", "2020-04-07 23:10:33.500953"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 14], ["created_at", "2020-04-07 23:10:33.503561"], ["updated_at", "2020-04-07 23:10:33.503561"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-07 23:10:33 +0000
Processing by TradesController#create as HTML
  Parameters: {"trade"=>{"action"=>"1", "price"=>"100.0", "quantity"=>"20"}, "portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 14], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 14], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTrade Create (0.2ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 100.0], ["quantity", 20], ["stock_id", 14], ["created_at", "2020-04-07 23:10:33.514683"], ["updated_at", "2020-04-07 23:10:33.514683"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 1.0ms | Allocations: 1847)
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" ORDER BY "trades"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$1crApUx2CIX0ekdrGo08qub8o.OTh6/rcYRp4L1WPznzl2m.44NHW"], ["created_at", "2020-04-07 23:18:18.386340"], ["updated_at", "2020-04-07 23:18:18.386340"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 15], ["name", "test_portfolio"], ["created_at", "2020-04-07 23:18:18.400604"], ["updated_at", "2020-04-07 23:18:18.400604"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 15], ["created_at", "2020-04-07 23:18:18.412528"], ["updated_at", "2020-04-07 23:18:18.412528"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 15], ["created_at", "2020-04-07 23:18:18.423926"], ["updated_at", "2020-04-07 23:18:18.423926"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-07 23:18:18 +0000
Processing by StocksController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 15], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 15]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 15]]
Completed 200 OK in 13ms (Views: 2.1ms | ActiveRecord: 0.8ms | Allocations: 1862)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$Gd94khyvIAcHuwUud0ttkeQ5fHGa7JGvt7.iDEjqdyhFuLpodI2.K"], ["created_at", "2020-04-07 23:18:18.460793"], ["updated_at", "2020-04-07 23:18:18.460793"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 16], ["name", "test_portfolio"], ["created_at", "2020-04-07 23:18:18.463233"], ["updated_at", "2020-04-07 23:18:18.463233"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 16], ["created_at", "2020-04-07 23:18:18.465793"], ["updated_at", "2020-04-07 23:18:18.465793"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mTrade Create (0.2ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 16], ["created_at", "2020-04-07 23:18:18.467878"], ["updated_at", "2020-04-07 23:18:18.467878"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-07 23:18:18 +0000
Processing by TradesController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 16], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 16], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 16]]
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 0.7ms | Allocations: 1415)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$oqdCrKON2/S0Ex3ANmClWeZt09buFmksw.AaFI1/ZdZrtL6l6n.SK"], ["created_at", "2020-04-07 23:18:18.481303"], ["updated_at", "2020-04-07 23:18:18.481303"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 17], ["name", "test_portfolio"], ["created_at", "2020-04-07 23:18:18.483571"], ["updated_at", "2020-04-07 23:18:18.483571"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 17], ["created_at", "2020-04-07 23:18:18.486098"], ["updated_at", "2020-04-07 23:18:18.486098"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-07 23:18:18 +0000
Processing by TradesController#create as HTML
  Parameters: {"trade"=>{"action"=>"1", "price"=>"100.0", "quantity"=>"20"}, "portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 17], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 17], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTrade Create (0.2ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 100.0], ["quantity", 20], ["stock_id", 17], ["created_at", "2020-04-07 23:18:18.496381"], ["updated_at", "2020-04-07 23:18:18.496381"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.2ms | ActiveRecord: 1.0ms | Allocations: 1847)
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" ORDER BY "trades"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$tYNWxdo7czdl0HqZcjVkaetZ6WMUwZgxjZIzahTnm4f1FjxpPAqH."], ["created_at", "2020-04-07 23:18:42.557443"], ["updated_at", "2020-04-07 23:18:42.557443"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 18], ["name", "test_portfolio"], ["created_at", "2020-04-07 23:18:42.572115"], ["updated_at", "2020-04-07 23:18:42.572115"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 18], ["created_at", "2020-04-07 23:18:42.584177"], ["updated_at", "2020-04-07 23:18:42.584177"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 18], ["created_at", "2020-04-07 23:18:42.595825"], ["updated_at", "2020-04-07 23:18:42.595825"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mTrade Create (0.2ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 180.0], ["quantity", 20], ["stock_id", 18], ["created_at", "2020-04-07 23:18:42.598100"], ["updated_at", "2020-04-07 23:18:42.598100"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-07 23:18:42 +0000
Processing by StocksController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 18], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 18]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 18]]
Completed 200 OK in 13ms (Views: 2.2ms | ActiveRecord: 0.8ms | Allocations: 1880)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$8y.TU/387wrKE.IHhQENMuyQqHu39aPtGgctavTIXy3hrKZu5BqIm"], ["created_at", "2020-04-07 23:18:42.647196"], ["updated_at", "2020-04-07 23:18:42.647196"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 19], ["name", "test_portfolio"], ["created_at", "2020-04-07 23:18:42.650054"], ["updated_at", "2020-04-07 23:18:42.650054"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 19], ["created_at", "2020-04-07 23:18:42.652716"], ["updated_at", "2020-04-07 23:18:42.652716"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mTrade Create (0.2ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 19], ["created_at", "2020-04-07 23:18:42.654966"], ["updated_at", "2020-04-07 23:18:42.654966"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-07 23:18:42 +0000
Processing by TradesController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 19], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 19], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 19]]
Completed 200 OK in 5ms (Views: 0.8ms | ActiveRecord: 0.8ms | Allocations: 1432)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$iqhzUS0/zcwj54cgOvAJAuJ7H6aFgfQwG3rA7xKDm0bwkoQKVWZPW"], ["created_at", "2020-04-07 23:18:42.671329"], ["updated_at", "2020-04-07 23:18:42.671329"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 20], ["name", "test_portfolio"], ["created_at", "2020-04-07 23:18:42.673771"], ["updated_at", "2020-04-07 23:18:42.673771"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 20], ["created_at", "2020-04-07 23:18:42.676351"], ["updated_at", "2020-04-07 23:18:42.676351"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-07 23:18:42 +0000
Processing by TradesController#create as HTML
  Parameters: {"trade"=>{"action"=>"1", "price"=>"100.0", "quantity"=>"20"}, "portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 20], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 20], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 100.0], ["quantity", 20], ["stock_id", 20], ["created_at", "2020-04-07 23:18:42.688095"], ["updated_at", "2020-04-07 23:18:42.688095"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 1.0ms | Allocations: 1849)
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" ORDER BY "trades"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$VOmXJ1d2A0hnWAtJqklfhuNFzlnjY3gCj7.EWyh1QIIm5Dy2uuLCe"], ["created_at", "2020-04-07 23:19:46.278696"], ["updated_at", "2020-04-07 23:19:46.278696"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 21], ["name", "test_portfolio"], ["created_at", "2020-04-07 23:19:46.293520"], ["updated_at", "2020-04-07 23:19:46.293520"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 21], ["created_at", "2020-04-07 23:19:46.305689"], ["updated_at", "2020-04-07 23:19:46.305689"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 21], ["created_at", "2020-04-07 23:19:46.317370"], ["updated_at", "2020-04-07 23:19:46.317370"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 21], ["created_at", "2020-04-07 23:19:46.320072"], ["updated_at", "2020-04-07 23:19:46.320072"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[36mTrade Create (0.2ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 22], ["created_at", "2020-04-07 23:19:46.322087"], ["updated_at", "2020-04-07 23:19:46.322087"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-07 23:19:46 +0000
Processing by StocksController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 21], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 21]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 21]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 22]]
Completed 200 OK in 14ms (Views: 2.8ms | ActiveRecord: 1.0ms | Allocations: 2215)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$UStmglxXwjRHOy8EIu5mMu9ByQGqOGQhs6P9hQyKxrSDVGl005NN."], ["created_at", "2020-04-07 23:19:46.356894"], ["updated_at", "2020-04-07 23:19:46.356894"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 22], ["name", "test_portfolio"], ["created_at", "2020-04-07 23:19:46.359386"], ["updated_at", "2020-04-07 23:19:46.359386"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 22], ["created_at", "2020-04-07 23:19:46.362023"], ["updated_at", "2020-04-07 23:19:46.362023"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  [1m[36mTrade Create (0.2ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 23], ["created_at", "2020-04-07 23:19:46.364106"], ["updated_at", "2020-04-07 23:19:46.364106"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-07 23:19:46 +0000
Processing by TradesController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 22], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 22], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 23]]
Completed 200 OK in 4ms (Views: 0.7ms | ActiveRecord: 0.7ms | Allocations: 1415)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$27kwZ4vEqCKHeMmjA8UtO.4fIGp8HSDVWOMjm8KXEN9PiMc.dRUSq"], ["created_at", "2020-04-07 23:19:46.378329"], ["updated_at", "2020-04-07 23:19:46.378329"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 23], ["name", "test_portfolio"], ["created_at", "2020-04-07 23:19:46.380633"], ["updated_at", "2020-04-07 23:19:46.380633"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 23], ["created_at", "2020-04-07 23:19:46.383269"], ["updated_at", "2020-04-07 23:19:46.383269"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-07 23:19:46 +0000
Processing by TradesController#create as HTML
  Parameters: {"trade"=>{"action"=>"1", "price"=>"100.0", "quantity"=>"20"}, "portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 23], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 23], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTrade Create (0.2ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 100.0], ["quantity", 20], ["stock_id", 24], ["created_at", "2020-04-07 23:19:46.394458"], ["updated_at", "2020-04-07 23:19:46.394458"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.9ms | Allocations: 1847)
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" ORDER BY "trades"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$UpH/5u0UAYrQyvIIrLuCxOCjIk4wvtyWn4pya4l2nW4kcA7pnXo/q"], ["created_at", "2020-04-07 23:20:32.654368"], ["updated_at", "2020-04-07 23:20:32.654368"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 24], ["name", "test_portfolio"], ["created_at", "2020-04-07 23:20:32.669224"], ["updated_at", "2020-04-07 23:20:32.669224"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 24], ["created_at", "2020-04-07 23:20:32.681487"], ["updated_at", "2020-04-07 23:20:32.681487"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 25], ["created_at", "2020-04-07 23:20:32.693303"], ["updated_at", "2020-04-07 23:20:32.693303"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 24], ["created_at", "2020-04-07 23:20:32.696104"], ["updated_at", "2020-04-07 23:20:32.696104"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-07 23:20:32 +0000
Processing by StocksController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 24], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 24]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 25]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 26]]
Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.9ms | Allocations: 2178)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$Uyz2GroTkEHGkUACtUZM6eed6SRe/SbxU2tETxjfosjfVWa9axdRy"], ["created_at", "2020-04-07 23:20:32.729759"], ["updated_at", "2020-04-07 23:20:32.729759"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 25], ["name", "test_portfolio"], ["created_at", "2020-04-07 23:20:32.732145"], ["updated_at", "2020-04-07 23:20:32.732145"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 25], ["created_at", "2020-04-07 23:20:32.734699"], ["updated_at", "2020-04-07 23:20:32.734699"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mTrade Create (0.2ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 27], ["created_at", "2020-04-07 23:20:32.736759"], ["updated_at", "2020-04-07 23:20:32.736759"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-07 23:20:32 +0000
Processing by TradesController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 25], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 25], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 27]]
Completed 200 OK in 4ms (Views: 0.7ms | ActiveRecord: 0.7ms | Allocations: 1424)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$zwFzjfKIGLaeUccujZj8neF3Sj5eND88rqcfI4qgBa3tLY7y4obwa"], ["created_at", "2020-04-07 23:20:32.752177"], ["updated_at", "2020-04-07 23:20:32.752177"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 26], ["name", "test_portfolio"], ["created_at", "2020-04-07 23:20:32.754793"], ["updated_at", "2020-04-07 23:20:32.754793"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 26], ["created_at", "2020-04-07 23:20:32.757356"], ["updated_at", "2020-04-07 23:20:32.757356"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-07 23:20:32 +0000
Processing by TradesController#create as HTML
  Parameters: {"trade"=>{"action"=>"1", "price"=>"100.0", "quantity"=>"20"}, "portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 26], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 26], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTrade Create (0.2ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 100.0], ["quantity", 20], ["stock_id", 28], ["created_at", "2020-04-07 23:20:32.768595"], ["updated_at", "2020-04-07 23:20:32.768595"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 1.0ms | Allocations: 1847)
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" ORDER BY "trades"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$gPzS/ppmdb3evA2TrM6bk.tPqzNF8JlV2KaJLvHCh8UbOtdtW9d.K"], ["created_at", "2020-04-07 23:22:26.859880"], ["updated_at", "2020-04-07 23:22:26.859880"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 27], ["name", "test_portfolio"], ["created_at", "2020-04-07 23:22:26.874661"], ["updated_at", "2020-04-07 23:22:26.874661"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 27], ["created_at", "2020-04-07 23:22:26.889984"], ["updated_at", "2020-04-07 23:22:26.889984"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 29], ["created_at", "2020-04-07 23:22:26.901637"], ["updated_at", "2020-04-07 23:22:26.901637"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 27], ["created_at", "2020-04-07 23:22:26.904311"], ["updated_at", "2020-04-07 23:22:26.904311"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-07 23:22:26 +0000
Processing by StocksController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 27], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 27]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 29]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 30]]
Completed 200 OK in 13ms (Views: 2.7ms | ActiveRecord: 1.0ms | Allocations: 2195)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$XUB5Og9ziNoNz7fw82AxseLc5I5MMTUNSMUZf7oK5NLYhtJYaC36e"], ["created_at", "2020-04-07 23:22:26.938643"], ["updated_at", "2020-04-07 23:22:26.938643"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 28], ["name", "test_portfolio"], ["created_at", "2020-04-07 23:22:26.941014"], ["updated_at", "2020-04-07 23:22:26.941014"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 28], ["created_at", "2020-04-07 23:22:26.943526"], ["updated_at", "2020-04-07 23:22:26.943526"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[36mTrade Create (0.2ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 31], ["created_at", "2020-04-07 23:22:26.945646"], ["updated_at", "2020-04-07 23:22:26.945646"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-07 23:22:26 +0000
Processing by TradesController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 28], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 28], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 31]]
Completed 200 OK in 4ms (Views: 0.7ms | ActiveRecord: 0.7ms | Allocations: 1415)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$RrrdqNbItCl/LTjmZnE6XO3NFfq0gLimUVOLrVh6K9wQbw9EXpu8y"], ["created_at", "2020-04-07 23:22:26.960023"], ["updated_at", "2020-04-07 23:22:26.960023"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 29], ["name", "test_portfolio"], ["created_at", "2020-04-07 23:22:26.962414"], ["updated_at", "2020-04-07 23:22:26.962414"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 29], ["created_at", "2020-04-07 23:22:26.964992"], ["updated_at", "2020-04-07 23:22:26.964992"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-07 23:22:26 +0000
Processing by TradesController#create as HTML
  Parameters: {"trade"=>{"action"=>"1", "price"=>"100.0", "quantity"=>"20"}, "portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 29], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 29], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTrade Create (0.2ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 100.0], ["quantity", 20], ["stock_id", 32], ["created_at", "2020-04-07 23:22:26.976386"], ["updated_at", "2020-04-07 23:22:26.976386"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 1.0ms | Allocations: 1847)
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" ORDER BY "trades"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (5.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (3.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$VwIj1zhZ.1PYggMf02Txwus6dPL0EiaTZjiUyYPCgVI6j3lgPHnZO"], ["created_at", "2020-04-08 17:00:11.611966"], ["updated_at", "2020-04-08 17:00:11.611966"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (8.1ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.9ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 30], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:00:11.653033"], ["updated_at", "2020-04-08 17:00:11.653033"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mStock Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.9ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 30], ["created_at", "2020-04-08 17:00:11.676633"], ["updated_at", "2020-04-08 17:00:11.676633"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[36mTrade Create (9.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 33], ["created_at", "2020-04-08 17:00:11.698749"], ["updated_at", "2020-04-08 17:00:11.698749"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 30], ["created_at", "2020-04-08 17:00:11.710916"], ["updated_at", "2020-04-08 17:00:11.710916"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$qyu2lMNX8bHaoG4TwDY/lejmqB4deIA07totzkaBFSJ7Q9RBYp9xm"], ["created_at", "2020-04-08 17:00:11.738642"], ["updated_at", "2020-04-08 17:00:11.738642"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 31], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:00:11.741488"], ["updated_at", "2020-04-08 17:00:11.741488"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$C6o/k6iEEDrVktSG8TdvcO1pKt/COHRr1fDIpVefFfyQiQ1D5hhaG"], ["created_at", "2020-04-08 17:00:11.766573"], ["updated_at", "2020-04-08 17:00:11.766573"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 32], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:00:11.769162"], ["updated_at", "2020-04-08 17:00:11.769162"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 32], ["created_at", "2020-04-08 17:00:11.771850"], ["updated_at", "2020-04-08 17:00:11.771850"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  [1m[36mTrade Create (0.2ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 35], ["created_at", "2020-04-08 17:00:11.774062"], ["updated_at", "2020-04-08 17:00:11.774062"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$.xkPAoJIe94N/3NhJSJLTOXfzQVmgTGLSapg.WcRbu/oAd0SF.cg2"], ["created_at", "2020-04-08 17:00:11.791217"], ["updated_at", "2020-04-08 17:00:11.791217"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 33], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:00:11.794010"], ["updated_at", "2020-04-08 17:00:11.794010"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 33], ["created_at", "2020-04-08 17:00:11.798183"], ["updated_at", "2020-04-08 17:00:11.798183"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$kH863hGMQ.Qrsl6JFYznCub/7y4wldZeQeyeQP7Pc58Uf3cifqmtK"], ["created_at", "2020-04-08 17:07:06.681491"], ["updated_at", "2020-04-08 17:07:06.681491"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 34], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:07:06.696155"], ["updated_at", "2020-04-08 17:07:06.696155"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 34], ["created_at", "2020-04-08 17:07:06.708143"], ["updated_at", "2020-04-08 17:07:06.708143"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 37], ["created_at", "2020-04-08 17:07:06.719485"], ["updated_at", "2020-04-08 17:07:06.719485"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 34], ["created_at", "2020-04-08 17:07:06.722140"], ["updated_at", "2020-04-08 17:07:06.722140"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$/f3PzuyhGHcFwnnC1vM6YO17d1eE8oSphmKXr3xZG/OkXl/BeT3He"], ["created_at", "2020-04-08 17:07:06.735478"], ["updated_at", "2020-04-08 17:07:06.735478"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 35], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:07:06.738032"], ["updated_at", "2020-04-08 17:07:06.738032"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$r.h254AnSgHhQuu5jRg/keEz.opNFWK0kgrwLSdTCFdjt729HavGS"], ["created_at", "2020-04-08 17:07:06.751746"], ["updated_at", "2020-04-08 17:07:06.751746"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 36], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:07:06.754202"], ["updated_at", "2020-04-08 17:07:06.754202"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 36], ["created_at", "2020-04-08 17:07:06.756805"], ["updated_at", "2020-04-08 17:07:06.756805"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  [1m[36mTrade Create (0.2ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 39], ["created_at", "2020-04-08 17:07:06.759044"], ["updated_at", "2020-04-08 17:07:06.759044"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$HELkBk.OK8YpkgHVYaDckupCG7IzJ2F5QSIBWG.azv9hnqCzxypw2"], ["created_at", "2020-04-08 17:07:06.765956"], ["updated_at", "2020-04-08 17:07:06.765956"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 37], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:07:06.768267"], ["updated_at", "2020-04-08 17:07:06.768267"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 37], ["created_at", "2020-04-08 17:07:06.770742"], ["updated_at", "2020-04-08 17:07:06.770742"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$.kQxgWpwTaclOHGaLQq7NOIZHEKkouxQGWZwhlCK07HzCo4axFJPu"], ["created_at", "2020-04-08 17:12:40.264537"], ["updated_at", "2020-04-08 17:12:40.264537"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 38], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:12:40.279447"], ["updated_at", "2020-04-08 17:12:40.279447"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 38], ["created_at", "2020-04-08 17:12:40.291619"], ["updated_at", "2020-04-08 17:12:40.291619"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 41], ["created_at", "2020-04-08 17:12:40.303162"], ["updated_at", "2020-04-08 17:12:40.303162"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 38], ["created_at", "2020-04-08 17:12:40.305891"], ["updated_at", "2020-04-08 17:12:40.305891"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$zR4bYzXITJnTf.5H56i7Vu.jB6D9Ves6e8UeKaEI/3D2/yO4wI4n2"], ["created_at", "2020-04-08 17:12:40.319627"], ["updated_at", "2020-04-08 17:12:40.319627"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 39], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:12:40.322214"], ["updated_at", "2020-04-08 17:12:40.322214"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$pq4kKRNSHdO/Jy9wFQwU4.Jwll0uvW5wHG/HLOpMMGeVacS40pzje"], ["created_at", "2020-04-08 17:12:40.335441"], ["updated_at", "2020-04-08 17:12:40.335441"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 40], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:12:40.337782"], ["updated_at", "2020-04-08 17:12:40.337782"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 40], ["created_at", "2020-04-08 17:12:40.340415"], ["updated_at", "2020-04-08 17:12:40.340415"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  [1m[36mTrade Create (0.2ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 43], ["created_at", "2020-04-08 17:12:40.342627"], ["updated_at", "2020-04-08 17:12:40.342627"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$/..fhCHja6RJz4pO1qu51.KFsZlSz7KabEMEopu9GAhV3wTE3YVKW"], ["created_at", "2020-04-08 17:12:40.349459"], ["updated_at", "2020-04-08 17:12:40.349459"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 41], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:12:40.351906"], ["updated_at", "2020-04-08 17:12:40.351906"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 41], ["created_at", "2020-04-08 17:12:40.354456"], ["updated_at", "2020-04-08 17:12:40.354456"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$4lhu4fTLmjQ7UkzYCeCCLeOahYeyeW264tUENwQg0fxfU0zPSGHVS"], ["created_at", "2020-04-08 17:17:09.493384"], ["updated_at", "2020-04-08 17:17:09.493384"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.5ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 42], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:17:09.511352"], ["updated_at", "2020-04-08 17:17:09.511352"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 42], ["created_at", "2020-04-08 17:17:09.526278"], ["updated_at", "2020-04-08 17:17:09.526278"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 45], ["created_at", "2020-04-08 17:17:09.539407"], ["updated_at", "2020-04-08 17:17:09.539407"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 42], ["created_at", "2020-04-08 17:17:09.543248"], ["updated_at", "2020-04-08 17:17:09.543248"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$Vr7yZSLqitmUj9vT03Ffc.Av1KtzOVXne76sGsmFMLynLwJP7UjxG"], ["created_at", "2020-04-08 17:17:09.557155"], ["updated_at", "2020-04-08 17:17:09.557155"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 43], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:17:09.560662"], ["updated_at", "2020-04-08 17:17:09.560662"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$TSO7jHbeXEyRdHwjGRhHPuuv7FDUZUNfBMQInW3VqGHUMm/3cuNM."], ["created_at", "2020-04-08 17:17:09.574354"], ["updated_at", "2020-04-08 17:17:09.574354"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 44], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:17:09.577558"], ["updated_at", "2020-04-08 17:17:09.577558"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 44], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 44], ["created_at", "2020-04-08 17:17:09.581225"], ["updated_at", "2020-04-08 17:17:09.581225"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 47], ["LIMIT", 1]]
  [1m[36mTrade Create (0.2ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 47], ["created_at", "2020-04-08 17:17:09.584253"], ["updated_at", "2020-04-08 17:17:09.584253"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$JZZK3SolKXVgBlPzasCaIubsGfwqHCCumCuUnYaxCKA10a9wSP9vu"], ["created_at", "2020-04-08 17:17:09.592387"], ["updated_at", "2020-04-08 17:17:09.592387"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 45], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:17:09.595716"], ["updated_at", "2020-04-08 17:17:09.595716"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 45], ["created_at", "2020-04-08 17:17:09.599334"], ["updated_at", "2020-04-08 17:17:09.599334"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$fn8qcdi.AtwVkdcm7W7Moul/FU1piDufw64kLfAaQvPw0oxgd5SqC"], ["created_at", "2020-04-08 17:18:30.377282"], ["updated_at", "2020-04-08 17:18:30.377282"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 46], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:18:30.393820"], ["updated_at", "2020-04-08 17:18:30.393820"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 46], ["created_at", "2020-04-08 17:18:30.407836"], ["updated_at", "2020-04-08 17:18:30.407836"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 49], ["created_at", "2020-04-08 17:18:30.420249"], ["updated_at", "2020-04-08 17:18:30.420249"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 46], ["created_at", "2020-04-08 17:18:30.425496"], ["updated_at", "2020-04-08 17:18:30.425496"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$0NI/EuNgwkYgWAzlXWSnCuxSfhzYGg4nmI1Uk1inbfa4yjCmk8mK."], ["created_at", "2020-04-08 17:18:30.439328"], ["updated_at", "2020-04-08 17:18:30.439328"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 47], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:18:30.442916"], ["updated_at", "2020-04-08 17:18:30.442916"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$GxSY36wDoMBF7vqUZC/aT.OMGQGqlPTMcskWmMIztfS.Acu7cBgbC"], ["created_at", "2020-04-08 17:18:30.456896"], ["updated_at", "2020-04-08 17:18:30.456896"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 48], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:18:30.460145"], ["updated_at", "2020-04-08 17:18:30.460145"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 48], ["created_at", "2020-04-08 17:18:30.463910"], ["updated_at", "2020-04-08 17:18:30.463910"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
  [1m[36mTrade Create (0.2ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 51], ["created_at", "2020-04-08 17:18:30.466946"], ["updated_at", "2020-04-08 17:18:30.466946"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$Q94Et6FQIWCmq4ovLWuzN.s22SBL5uMzBrPX3Y02/NxZsHxq/3HIK"], ["created_at", "2020-04-08 17:18:30.474814"], ["updated_at", "2020-04-08 17:18:30.474814"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 49], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:18:30.477976"], ["updated_at", "2020-04-08 17:18:30.477976"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 49], ["created_at", "2020-04-08 17:18:30.482081"], ["updated_at", "2020-04-08 17:18:30.482081"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$1BVblaQOlrOBrb7gwR5MnuwIJd9SVONN3YCLyqaoaSf9SIQfW9mRa"], ["created_at", "2020-04-08 17:20:16.731478"], ["updated_at", "2020-04-08 17:20:16.731478"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 50], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:20:16.746420"], ["updated_at", "2020-04-08 17:20:16.746420"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.5ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 50], ["created_at", "2020-04-08 17:20:16.759343"], ["updated_at", "2020-04-08 17:20:16.759343"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 53], ["created_at", "2020-04-08 17:20:16.771368"], ["updated_at", "2020-04-08 17:20:16.771368"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 50], ["created_at", "2020-04-08 17:20:16.773965"], ["updated_at", "2020-04-08 17:20:16.773965"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$AFYos1/e4kZZdNMFoJfSS..2HUSczb5uQrtV43/M.xdhycT4FtWwW"], ["created_at", "2020-04-08 17:20:16.787351"], ["updated_at", "2020-04-08 17:20:16.787351"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 51], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:20:16.789867"], ["updated_at", "2020-04-08 17:20:16.789867"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$KagwRGpocXNHadBugfUAOuXK6Kz6AvvR26FqMKSOsxgzRpT9hXjAS"], ["created_at", "2020-04-08 17:20:16.802961"], ["updated_at", "2020-04-08 17:20:16.802961"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 52], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:20:16.805292"], ["updated_at", "2020-04-08 17:20:16.805292"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 52], ["created_at", "2020-04-08 17:20:16.807866"], ["updated_at", "2020-04-08 17:20:16.807866"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  [1m[36mTrade Create (0.2ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 55], ["created_at", "2020-04-08 17:20:16.809961"], ["updated_at", "2020-04-08 17:20:16.809961"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$wLdfQp7dMaNx80K.oPaeGu4pVOtDbSxZdJe25kJsMkFq5EC3uLos."], ["created_at", "2020-04-08 17:20:16.816622"], ["updated_at", "2020-04-08 17:20:16.816622"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 53], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:20:16.818901"], ["updated_at", "2020-04-08 17:20:16.818901"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 53], ["created_at", "2020-04-08 17:20:16.821369"], ["updated_at", "2020-04-08 17:20:16.821369"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$Ke42eXI54y2juYLmyvF1euiapTAEq18d/C9mhTxcvIzLW6WACwcfm"], ["created_at", "2020-04-08 17:25:52.068811"], ["updated_at", "2020-04-08 17:25:52.068811"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 54], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:25:52.083925"], ["updated_at", "2020-04-08 17:25:52.083925"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 54], ["created_at", "2020-04-08 17:25:52.096267"], ["updated_at", "2020-04-08 17:25:52.096267"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 57], ["created_at", "2020-04-08 17:25:52.107751"], ["updated_at", "2020-04-08 17:25:52.107751"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 54], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 54], ["created_at", "2020-04-08 17:25:52.110448"], ["updated_at", "2020-04-08 17:25:52.110448"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$lJFZG7vzanQJhdA95QiEHuTNM0oAWt8fLBNgWgjEBNCPA.Oxkc/By"], ["created_at", "2020-04-08 17:25:52.123730"], ["updated_at", "2020-04-08 17:25:52.123730"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 55], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:25:52.126397"], ["updated_at", "2020-04-08 17:25:52.126397"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$eVpow7WnlL6YQ3Gaw65feuUygo8C4csqFgnZBJqvSSikXJr6lMaR2"], ["created_at", "2020-04-08 17:25:52.140043"], ["updated_at", "2020-04-08 17:25:52.140043"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 56], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:25:52.142467"], ["updated_at", "2020-04-08 17:25:52.142467"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 56], ["created_at", "2020-04-08 17:25:52.145020"], ["updated_at", "2020-04-08 17:25:52.145020"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  [1m[36mTrade Create (0.2ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 59], ["created_at", "2020-04-08 17:25:52.147167"], ["updated_at", "2020-04-08 17:25:52.147167"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$AM1valzOnguHKTIuZzsSXO0F9md9wRlV7uP8ZPwtqsH3ByNOFQJC."], ["created_at", "2020-04-08 17:25:52.154059"], ["updated_at", "2020-04-08 17:25:52.154059"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 57], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:25:52.156368"], ["updated_at", "2020-04-08 17:25:52.156368"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 57], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 57], ["created_at", "2020-04-08 17:25:52.158859"], ["updated_at", "2020-04-08 17:25:52.158859"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$UvT4UUTRueSNsDWrMC6zcODsh.e3Xi5RmchYoZsfuT9HdGe8hFQNi"], ["created_at", "2020-04-08 17:28:24.651161"], ["updated_at", "2020-04-08 17:28:24.651161"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 58], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:28:24.666171"], ["updated_at", "2020-04-08 17:28:24.666171"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 58], ["created_at", "2020-04-08 17:28:24.678571"], ["updated_at", "2020-04-08 17:28:24.678571"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 61], ["created_at", "2020-04-08 17:28:24.690105"], ["updated_at", "2020-04-08 17:28:24.690105"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 58], ["created_at", "2020-04-08 17:28:24.692863"], ["updated_at", "2020-04-08 17:28:24.692863"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 17:28:24 +0000
Processing by StocksController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 58], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 58]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 61]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 62]]
Completed 200 OK in 14ms (Views: 2.7ms | ActiveRecord: 1.0ms | Allocations: 2195)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$pWPJJl37qyCDHv5l4E5qM.ZTHOzhpe2dvy3fDsllFRqkCCTHXwLR."], ["created_at", "2020-04-08 17:28:24.739503"], ["updated_at", "2020-04-08 17:28:24.739503"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 59], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:28:24.741969"], ["updated_at", "2020-04-08 17:28:24.741969"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 17:28:24 +0000
Processing by StocksController#create as HTML
  Parameters: {"stock"=>{"symbol"=>"test"}, "portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 59], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "test"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "test"], ["portfolio_id", 59], ["created_at", "2020-04-08 17:28:24.762188"], ["updated_at", "2020-04-08 17:28:24.762188"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 63]]
Completed 200 OK in 6ms (Views: 0.8ms | ActiveRecord: 1.3ms | Allocations: 1818)
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" ORDER BY "stocks"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$95iejsDJK9djZ66rfaNYve7qcYzcvMY3q7zzCwOOv72ElKbjZ/nJC"], ["created_at", "2020-04-08 17:28:24.770219"], ["updated_at", "2020-04-08 17:28:24.770219"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 60], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:28:24.772693"], ["updated_at", "2020-04-08 17:28:24.772693"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 60], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 60], ["created_at", "2020-04-08 17:28:24.775312"], ["updated_at", "2020-04-08 17:28:24.775312"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  [1m[36mTrade Create (0.2ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 64], ["created_at", "2020-04-08 17:28:24.777421"], ["updated_at", "2020-04-08 17:28:24.777421"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 17:28:24 +0000
Processing by TradesController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 60], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 60], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 64]]
Completed 200 OK in 4ms (Views: 0.7ms | ActiveRecord: 0.7ms | Allocations: 1415)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$kTL31XqMBg67caMSUCvc5eQ2k4v01861HwT0nhNlCSsDkdi.RL6h6"], ["created_at", "2020-04-08 17:28:24.793354"], ["updated_at", "2020-04-08 17:28:24.793354"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 61], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:28:24.795799"], ["updated_at", "2020-04-08 17:28:24.795799"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 61], ["created_at", "2020-04-08 17:28:24.798388"], ["updated_at", "2020-04-08 17:28:24.798388"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 17:28:24 +0000
Processing by TradesController#create as HTML
  Parameters: {"trade"=>{"action"=>"1", "price"=>"100.0", "quantity"=>"20"}, "portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 61], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 61], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTrade Create (0.2ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 100.0], ["quantity", 20], ["stock_id", 65], ["created_at", "2020-04-08 17:28:24.806703"], ["updated_at", "2020-04-08 17:28:24.806703"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 1.0ms | Allocations: 1846)
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" ORDER BY "trades"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$j5dfi5JaqUWT.9UJ6N169u2Cnj0x.8BSh12dTlgXOskE/yMn9m54C"], ["created_at", "2020-04-08 17:29:31.615595"], ["updated_at", "2020-04-08 17:29:31.615595"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 62], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:29:31.630810"], ["updated_at", "2020-04-08 17:29:31.630810"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 62], ["created_at", "2020-04-08 17:29:31.643630"], ["updated_at", "2020-04-08 17:29:31.643630"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 66], ["LIMIT", 1]]
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 66], ["created_at", "2020-04-08 17:29:31.655245"], ["updated_at", "2020-04-08 17:29:31.655245"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 62], ["created_at", "2020-04-08 17:29:31.657974"], ["updated_at", "2020-04-08 17:29:31.657974"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 17:29:31 +0000
Processing by StocksController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 62], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 62]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 66]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 67]]
Completed 200 OK in 14ms (Views: 2.8ms | ActiveRecord: 0.9ms | Allocations: 2195)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$1fEU6SE24wgyR9LSrY4e/uxvrG/z57yhLfg3l/UnSl16rNuOxmvEW"], ["created_at", "2020-04-08 17:29:31.692546"], ["updated_at", "2020-04-08 17:29:31.692546"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 63], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:29:31.695012"], ["updated_at", "2020-04-08 17:29:31.695012"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 17:29:31 +0000
Processing by StocksController#create as HTML
  Parameters: {"stock"=>{"symbol"=>"test"}, "portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 63], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "test"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "test"], ["portfolio_id", 63], ["created_at", "2020-04-08 17:29:31.705821"], ["updated_at", "2020-04-08 17:29:31.705821"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 68]]
Completed 200 OK in 5ms (Views: 0.8ms | ActiveRecord: 1.2ms | Allocations: 1818)
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" ORDER BY "stocks"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$otXQej7VgBJM23alvoNbgulyEq4qPMrBJyDsYKvoWNQCPFM/.PPra"], ["created_at", "2020-04-08 17:29:31.713665"], ["updated_at", "2020-04-08 17:29:31.713665"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 64], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:29:31.715969"], ["updated_at", "2020-04-08 17:29:31.715969"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 64], ["created_at", "2020-04-08 17:29:31.718513"], ["updated_at", "2020-04-08 17:29:31.718513"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 69], ["LIMIT", 1]]
  [1m[36mTrade Create (0.2ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 69], ["created_at", "2020-04-08 17:29:31.720622"], ["updated_at", "2020-04-08 17:29:31.720622"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 17:29:31 +0000
Processing by TradesController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 64], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 64], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 69]]
Completed 200 OK in 4ms (Views: 0.8ms | ActiveRecord: 0.7ms | Allocations: 1415)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$LjUWTR40sM4SWm06EEBhNu.9X7iYzLH3btRjRrMCNS3n1TXTSN0ke"], ["created_at", "2020-04-08 17:29:31.735821"], ["updated_at", "2020-04-08 17:29:31.735821"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 65], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:29:31.738314"], ["updated_at", "2020-04-08 17:29:31.738314"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 65], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 65], ["created_at", "2020-04-08 17:29:31.740938"], ["updated_at", "2020-04-08 17:29:31.740938"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 17:29:31 +0000
Processing by TradesController#create as HTML
  Parameters: {"trade"=>{"action"=>"1", "price"=>"100.0", "quantity"=>"20"}, "portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 65], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 65], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 100.0], ["quantity", 20], ["stock_id", 70], ["created_at", "2020-04-08 17:29:31.757979"], ["updated_at", "2020-04-08 17:29:31.757979"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 0.3ms | ActiveRecord: 1.1ms | Allocations: 1849)
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" ORDER BY "trades"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (6.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (114.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "stockbyte_app_test"[0m
  [1m[35m (447.7ms)[0m  [1m[35mCREATE DATABASE "stockbyte_app_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.9ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (1.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "portfolios" CASCADE[0m
  [1m[35m (28.5ms)[0m  [1m[35mCREATE TABLE "portfolios" ("id" bigserial primary key, "user_id" integer, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "stocks" CASCADE[0m
  [1m[35m (23.1ms)[0m  [1m[35mCREATE TABLE "stocks" ("id" bigserial primary key, "symbol" character varying, "portfolio_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "trades" CASCADE[0m
  [1m[35m (13.5ms)[0m  [1m[35mCREATE TABLE "trades" ("id" bigserial primary key, "action" integer, "price" float, "quantity" integer, "stock_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (23.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (12.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (11.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35m (23.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200406213945)[0m
  [1m[35m (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20200406182701),
(20200406213429),
(20200406213719);

[0m
  [1m[35m (24.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (2.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2020-04-08 18:50:08.986295"], ["updated_at", "2020-04-08 18:50:08.986295"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "fe10c2ca85938de999f8738fc7fcd628bdbf1b71"], ["created_at", "2020-04-08 18:50:08.993520"], ["updated_at", "2020-04-08 18:50:08.993520"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$V4JInZzLTFAX8JUt1P08WeeJPOqkmOjS03kUicl2nusuBxcuP6Wci"], ["created_at", "2020-04-08 18:50:09.093060"], ["updated_at", "2020-04-08 18:50:09.093060"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio1"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.4ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["name", "test_portfolio1"], ["created_at", "2020-04-08 18:50:09.118481"], ["updated_at", "2020-04-08 18:50:09.118481"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/portfolios" for 127.0.0.1 at 2020-04-08 18:50:09 +0000
Processing by PortfoliosController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1[0m  [["user_id", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 1]]
Completed 200 OK in 17ms (Views: 5.4ms | ActiveRecord: 2.2ms | Allocations: 2746)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$6M6bn/u00Dq7ac8S.TWX0OwJbTeXDahIzl31abPR5WCavszKXDdwC"], ["created_at", "2020-04-08 18:50:09.174995"], ["updated_at", "2020-04-08 18:50:09.174995"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/portfolios" for 127.0.0.1 at 2020-04-08 18:50:09 +0000
Processing by PortfoliosController#create as HTML
  Parameters: {"portfolio"=>{"name"=>"test"}}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["name", "test"], ["created_at", "2020-04-08 18:50:09.188118"], ["updated_at", "2020-04-08 18:50:09.188118"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.1ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 2]]
Completed 200 OK in 5ms (Views: 0.8ms | ActiveRecord: 1.0ms | Allocations: 1484)
  [1m[36mPortfolio Load (0.1ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" ORDER BY "portfolios"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$MrcSK5y7uDyab1sfEnKmmeo91vW7usbbdxE/N6.356LS474ofxNxy"], ["created_at", "2020-04-08 18:50:09.195334"], ["updated_at", "2020-04-08 18:50:09.195334"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 3], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:50:09.197471"], ["updated_at", "2020-04-08 18:50:09.197471"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 3], ["created_at", "2020-04-08 18:50:09.206175"], ["updated_at", "2020-04-08 18:50:09.206175"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTrade Create (0.4ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 1], ["created_at", "2020-04-08 18:50:09.219853"], ["updated_at", "2020-04-08 18:50:09.219853"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 3], ["created_at", "2020-04-08 18:50:09.222568"], ["updated_at", "2020-04-08 18:50:09.222568"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 18:50:09 +0000
Processing by StocksController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 3], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 3]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 1]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 2]]
Completed 200 OK in 6ms (Views: 2.7ms | ActiveRecord: 0.9ms | Allocations: 1904)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$cRgWCOAe9INTq9/lozh8DOiuOW16L0ldsJcuNF.n7pzrO7YP6E0CC"], ["created_at", "2020-04-08 18:50:09.240851"], ["updated_at", "2020-04-08 18:50:09.240851"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 4], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:50:09.243276"], ["updated_at", "2020-04-08 18:50:09.243276"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 18:50:09 +0000
Processing by StocksController#create as HTML
  Parameters: {"stock"=>{"symbol"=>"test"}, "portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 4], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "test"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "test"], ["portfolio_id", 4], ["created_at", "2020-04-08 18:50:09.250700"], ["updated_at", "2020-04-08 18:50:09.250700"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 3]]
Completed 200 OK in 5ms (Views: 0.7ms | ActiveRecord: 1.1ms | Allocations: 1813)
  [1m[36mStock Load (0.1ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" ORDER BY "stocks"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$LYxZHYA80hVUZQHxL67qmuwGctratFVV.Q4hyjQmdp6v0MnSct71e"], ["created_at", "2020-04-08 18:50:09.257830"], ["updated_at", "2020-04-08 18:50:09.257830"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 5], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:50:09.260296"], ["updated_at", "2020-04-08 18:50:09.260296"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 5], ["created_at", "2020-04-08 18:50:09.272581"], ["updated_at", "2020-04-08 18:50:09.272581"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTrade Create (0.2ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 4], ["created_at", "2020-04-08 18:50:09.274848"], ["updated_at", "2020-04-08 18:50:09.274848"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 18:50:09 +0000
Processing by TradesController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 5], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 5], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mTrade Load (0.3ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 4]]
Completed 200 OK in 5ms (Views: 0.8ms | ActiveRecord: 0.9ms | Allocations: 1414)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$PfAS7pbIsz8nJqMgvHh9/eLMgPmrCKqdCiRZj6JvUSfB0LYGKb84O"], ["created_at", "2020-04-08 18:50:09.296323"], ["updated_at", "2020-04-08 18:50:09.296323"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 6], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:50:09.298670"], ["updated_at", "2020-04-08 18:50:09.298670"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 6], ["created_at", "2020-04-08 18:50:09.301292"], ["updated_at", "2020-04-08 18:50:09.301292"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 18:50:09 +0000
Processing by TradesController#create as HTML
  Parameters: {"trade"=>{"action"=>"1", "price"=>"100.0", "quantity"=>"20"}, "portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 6], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 6], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTrade Create (0.2ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 100.0], ["quantity", 20], ["stock_id", 5], ["created_at", "2020-04-08 18:50:09.309312"], ["updated_at", "2020-04-08 18:50:09.309312"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 1.0ms | Allocations: 1845)
  [1m[36mTrade Load (0.1ms)[0m  [1m[34mSELECT "trades".* FROM "trades" ORDER BY "trades"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (10.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (5.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (2.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$HjVHdnWvKvGSzmhKOewcqO3ad5cS5U6rB7dsTzX.Isscnc2C/jAja"], ["created_at", "2020-04-09 15:51:07.195382"], ["updated_at", "2020-04-09 15:51:07.195382"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (8.0ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio1"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.9ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 7], ["name", "test_portfolio1"], ["created_at", "2020-04-09 15:51:07.235072"], ["updated_at", "2020-04-09 15:51:07.235072"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/portfolios" for 127.0.0.1 at 2020-04-09 15:51:07 +0000
Processing by PortfoliosController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1[0m  [["user_id", 7]]
  [1m[36mStock Load (5.1ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 7]]
Completed 200 OK in 21ms (Views: 4.8ms | ActiveRecord: 7.0ms | Allocations: 2746)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$u4G006IRoWWt1B870a0Dm.V.x8BY4WWkI8lTuvuj69XwGrLW0rbqO"], ["created_at", "2020-04-09 15:51:07.307881"], ["updated_at", "2020-04-09 15:51:07.307881"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/portfolios" for 127.0.0.1 at 2020-04-09 15:51:07 +0000
Processing by PortfoliosController#create as HTML
  Parameters: {"portfolio"=>{"name"=>"test"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 8], ["name", "test"], ["created_at", "2020-04-09 15:51:07.329236"], ["updated_at", "2020-04-09 15:51:07.329236"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 8]]
Completed 200 OK in 5ms (Views: 0.7ms | ActiveRecord: 1.1ms | Allocations: 1484)
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" ORDER BY "portfolios"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$QGGIlVgvs6Ty/GxWTZEiw.UbKsckKOHYipnYJXHVB2LOwuRBGLuIa"], ["created_at", "2020-04-09 15:51:07.336965"], ["updated_at", "2020-04-09 15:51:07.336965"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 9], ["name", "test_portfolio"], ["created_at", "2020-04-09 15:51:07.339229"], ["updated_at", "2020-04-09 15:51:07.339229"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.9ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 9], ["created_at", "2020-04-09 15:51:07.347746"], ["updated_at", "2020-04-09 15:51:07.347746"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mTrade Create (10.8ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 6], ["created_at", "2020-04-09 15:51:07.369457"], ["updated_at", "2020-04-09 15:51:07.369457"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 9], ["created_at", "2020-04-09 15:51:07.383395"], ["updated_at", "2020-04-09 15:51:07.383395"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-09 15:51:07 +0000
Processing by StocksController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 9], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 9]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 6]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 7]]
Completed 200 OK in 6ms (Views: 2.6ms | ActiveRecord: 1.0ms | Allocations: 1904)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$guxwtU5dEnqBcsd8rnd/MOFzMx8a5oXcd8q2cnbVTmo/CmfD8qmq6"], ["created_at", "2020-04-09 15:51:07.402712"], ["updated_at", "2020-04-09 15:51:07.402712"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 10], ["name", "test_portfolio"], ["created_at", "2020-04-09 15:51:07.405204"], ["updated_at", "2020-04-09 15:51:07.405204"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-09 15:51:07 +0000
Processing by StocksController#create as HTML
  Parameters: {"stock"=>{"symbol"=>"test"}, "portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 10], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "test"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "test"], ["portfolio_id", 10], ["created_at", "2020-04-09 15:51:07.413415"], ["updated_at", "2020-04-09 15:51:07.413415"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 8]]
Completed 200 OK in 6ms (Views: 0.8ms | ActiveRecord: 1.2ms | Allocations: 1813)
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" ORDER BY "stocks"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$oif47egtFy.Eulfr/VxePO05FFCOARt.rOIo6/qRjORaldGkVQ3gO"], ["created_at", "2020-04-09 15:51:07.421286"], ["updated_at", "2020-04-09 15:51:07.421286"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 11], ["name", "test_portfolio"], ["created_at", "2020-04-09 15:51:07.423631"], ["updated_at", "2020-04-09 15:51:07.423631"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 11], ["created_at", "2020-04-09 15:51:07.434599"], ["updated_at", "2020-04-09 15:51:07.434599"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mTrade Create (0.2ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 9], ["created_at", "2020-04-09 15:51:07.436809"], ["updated_at", "2020-04-09 15:51:07.436809"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-09 15:51:07 +0000
Processing by TradesController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 11], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 11], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 9]]
Completed 200 OK in 5ms (Views: 0.8ms | ActiveRecord: 0.8ms | Allocations: 1414)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$.7IiXBqxf4zJzyCRq4AtSuz.d72AQ49.QaRPzconjmEcfI0OcbKA."], ["created_at", "2020-04-09 15:51:07.454041"], ["updated_at", "2020-04-09 15:51:07.454041"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 12], ["name", "test_portfolio"], ["created_at", "2020-04-09 15:51:07.456503"], ["updated_at", "2020-04-09 15:51:07.456503"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 12], ["created_at", "2020-04-09 15:51:07.459077"], ["updated_at", "2020-04-09 15:51:07.459077"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-09 15:51:07 +0000
Processing by TradesController#create as HTML
  Parameters: {"trade"=>{"action"=>"1", "price"=>"100.0", "quantity"=>"20"}, "portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 12], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 12], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTrade Create (0.2ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 100.0], ["quantity", 20], ["stock_id", 10], ["created_at", "2020-04-09 15:51:07.467332"], ["updated_at", "2020-04-09 15:51:07.467332"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 1.0ms | Allocations: 1845)
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" ORDER BY "trades"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m

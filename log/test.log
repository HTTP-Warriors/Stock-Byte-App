  [1m[35m (38.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "stockbyte_app_test"[0m
  [1m[35m (200.6ms)[0m  [1m[35mCREATE DATABASE "stockbyte_app_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (2.6ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (40.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "portfolios" CASCADE[0m
  [1m[35m (8.2ms)[0m  [1m[35mCREATE TABLE "portfolios" ("id" bigserial primary key, "user_id" integer, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "stocks" CASCADE[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "stocks" ("id" bigserial primary key, "symbol" character varying, "portfolio_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "trades" CASCADE[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "trades" ("id" bigserial primary key, "action" integer, "price" float, "quantity" integer, "stock_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (40.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200407174453)[0m
  [1m[35m (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20200406182701),
(20200406213429),
(20200406213719),
(20200406213945),
(20200407172821);

[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2020-04-07 19:54:05.477121"], ["updated_at", "2020-04-07 19:54:05.477121"]]
  [1m[35m (40.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "22d3a881884464009a529fdf38f34929e4ebea04"], ["created_at", "2020-04-07 19:54:05.521306"], ["updated_at", "2020-04-07 19:54:05.521306"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (46.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$XkK71cUn86fYmb7VVLhQ1uIpj9RvocU1jiUr1ayrlWSBYcX40Gl4K"], ["created_at", "2020-04-07 19:54:05.678567"], ["updated_at", "2020-04-07 19:54:05.678567"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.6ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["name", "test_portfolio"], ["created_at", "2020-04-07 19:54:05.700712"], ["updated_at", "2020-04-07 19:54:05.700712"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mStock Create (0.9ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 1], ["created_at", "2020-04-07 19:54:05.718112"], ["updated_at", "2020-04-07 19:54:05.718112"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTrade Create (0.7ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 1], ["created_at", "2020-04-07 19:54:05.734581"], ["updated_at", "2020-04-07 19:54:05.734581"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades" for 127.0.0.1 at 2020-04-07 12:54:05 -0700
Processing by TradesController#index as HTML
  [1m[36mTrade Load (40.6ms)[0m  [1m[34mSELECT "trades".* FROM "trades"[0m
Completed 200 OK in 46ms (Views: 1.1ms | ActiveRecord: 40.6ms | Allocations: 562)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (4.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (41.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "stockbyte_app_test"[0m
  [1m[35m (264.3ms)[0m  [1m[35mCREATE DATABASE "stockbyte_app_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (1.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (1.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "portfolios" CASCADE[0m
  [1m[35m (19.3ms)[0m  [1m[35mCREATE TABLE "portfolios" ("id" bigserial primary key, "user_id" integer, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "stocks" CASCADE[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "stocks" ("id" bigserial primary key, "symbol" character varying, "total_quantity" integer, "portfolio_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "trades" CASCADE[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "trades" ("id" bigserial primary key, "action" integer, "price" float, "quantity" integer, "stock_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (7.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200407174453)[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20200406182701),
(20200406213429),
(20200406213719),
(20200406213945),
(20200407172821);

[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2020-04-08 17:03:24.183437"], ["updated_at", "2020-04-08 17:03:24.183437"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "19e38f71627ba3bcd4006067fdcce42ca0fb18ca"], ["created_at", "2020-04-08 17:03:24.188395"], ["updated_at", "2020-04-08 17:03:24.188395"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (40.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$VBk9gU5q1TjjgvUMaU/f1OcLFjxbu8p0SYY50xqHC5sfp7BXxfVwK"], ["created_at", "2020-04-08 17:03:24.357714"], ["updated_at", "2020-04-08 17:03:24.357714"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.6ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:03:24.387761"], ["updated_at", "2020-04-08 17:03:24.387761"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.6ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 1], ["created_at", "2020-04-08 17:03:24.413583"], ["updated_at", "2020-04-08 17:03:24.413583"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTrade Create (0.9ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 1], ["created_at", "2020-04-08 17:03:24.469954"], ["updated_at", "2020-04-08 17:03:24.469954"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 1], ["created_at", "2020-04-08 17:03:24.474648"], ["updated_at", "2020-04-08 17:03:24.474648"]]
  [1m[35m (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$YrIrLcsY0JheCegRgJVMk.p/Va1TLZ7ogme5KxwxuzEjBA2U7SRW6"], ["created_at", "2020-04-08 17:03:24.503190"], ["updated_at", "2020-04-08 17:03:24.503190"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.4ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:03:24.507354"], ["updated_at", "2020-04-08 17:03:24.507354"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.5ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 2], ["created_at", "2020-04-08 17:03:24.511565"], ["updated_at", "2020-04-08 17:03:24.511565"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 3], ["created_at", "2020-04-08 17:03:24.515560"], ["updated_at", "2020-04-08 17:03:24.515560"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$5hXg7rhNJDMkn1C9wiQ28erMtXtTocp1Ol7l.V4/b7IvZC2i5tFBO"], ["created_at", "2020-04-08 17:03:24.523749"], ["updated_at", "2020-04-08 17:03:24.523749"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 3], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:03:24.528283"], ["updated_at", "2020-04-08 17:03:24.528283"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 3], ["created_at", "2020-04-08 17:03:24.531243"], ["updated_at", "2020-04-08 17:03:24.531243"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$V9ekoAAo59MAZO.XcWDAP.nF1h7DeaHWnESljlOWaU0cJwbmIcZ26"], ["created_at", "2020-04-08 17:13:29.050379"], ["updated_at", "2020-04-08 17:13:29.050379"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (1.0ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 4], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:13:29.073376"], ["updated_at", "2020-04-08 17:13:29.073376"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.8ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 4], ["created_at", "2020-04-08 17:13:29.093278"], ["updated_at", "2020-04-08 17:13:29.093278"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTrade Create (0.6ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 5], ["created_at", "2020-04-08 17:13:29.107562"], ["updated_at", "2020-04-08 17:13:29.107562"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 4], ["created_at", "2020-04-08 17:13:29.111561"], ["updated_at", "2020-04-08 17:13:29.111561"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$uVGIpRUoTGPYjmlurpmL2erkiazdfAuZKy0h.ke7KyR.Mmvth1Y7a"], ["created_at", "2020-04-08 17:13:29.129679"], ["updated_at", "2020-04-08 17:13:29.129679"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 5], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:13:29.133283"], ["updated_at", "2020-04-08 17:13:29.133283"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 5], ["created_at", "2020-04-08 17:13:29.135907"], ["updated_at", "2020-04-08 17:13:29.135907"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mTrade Create (0.6ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 7], ["created_at", "2020-04-08 17:13:29.138108"], ["updated_at", "2020-04-08 17:13:29.138108"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$3RxZ/ei4ET38bCQKjxnFe.gFkpHTTH1NWGOn0gOla/56ypwajOeTK"], ["created_at", "2020-04-08 17:13:29.146446"], ["updated_at", "2020-04-08 17:13:29.146446"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 6], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:13:29.148531"], ["updated_at", "2020-04-08 17:13:29.148531"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.5ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 6], ["created_at", "2020-04-08 17:13:29.151298"], ["updated_at", "2020-04-08 17:13:29.151298"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (2.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$NbgxfXjVn/lOZuuk60gQJ.31rVAivWeH2SGrGCxoeJZLIECFNOFcm"], ["created_at", "2020-04-08 17:19:41.977687"], ["updated_at", "2020-04-08 17:19:41.977687"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.5ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 7], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:19:42.003439"], ["updated_at", "2020-04-08 17:19:42.003439"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 7], ["created_at", "2020-04-08 17:19:42.026636"], ["updated_at", "2020-04-08 17:19:42.026636"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.4ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mTrade Create (0.7ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 9], ["created_at", "2020-04-08 17:19:42.044892"], ["updated_at", "2020-04-08 17:19:42.044892"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 7], ["created_at", "2020-04-08 17:19:42.048995"], ["updated_at", "2020-04-08 17:19:42.048995"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$krP3c.d3URm.qwca9wkH3.N.nLAvCRisYG9kzAgkZJFfO6gWwlO3y"], ["created_at", "2020-04-08 17:19:42.070413"], ["updated_at", "2020-04-08 17:19:42.070413"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 8], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:19:42.074104"], ["updated_at", "2020-04-08 17:19:42.074104"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 8], ["created_at", "2020-04-08 17:19:42.076549"], ["updated_at", "2020-04-08 17:19:42.076549"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mTrade Create (0.6ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 11], ["created_at", "2020-04-08 17:19:42.078508"], ["updated_at", "2020-04-08 17:19:42.078508"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$UTkFPJQAC9VROQQFvlNS7u9rXiG2Mr6hQniUsAx2f0u58xymPmxqy"], ["created_at", "2020-04-08 17:19:42.087655"], ["updated_at", "2020-04-08 17:19:42.087655"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.9ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 9], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:19:42.091698"], ["updated_at", "2020-04-08 17:19:42.091698"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (1.5ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 9], ["created_at", "2020-04-08 17:19:42.096892"], ["updated_at", "2020-04-08 17:19:42.096892"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$InLkSREP8zuixvKNH/fm8OI3UE1UqjMvMJd6Hf7fWT6SIqXKdO2YK"], ["created_at", "2020-04-08 17:19:58.161703"], ["updated_at", "2020-04-08 17:19:58.161703"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.5ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 10], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:19:58.185094"], ["updated_at", "2020-04-08 17:19:58.185094"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.6ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 10], ["created_at", "2020-04-08 17:19:58.203673"], ["updated_at", "2020-04-08 17:19:58.203673"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mTrade Create (0.6ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 13], ["created_at", "2020-04-08 17:19:58.218305"], ["updated_at", "2020-04-08 17:19:58.218305"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.5ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 10], ["created_at", "2020-04-08 17:19:58.222170"], ["updated_at", "2020-04-08 17:19:58.222170"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$SVTr1SzBrzQZdd4aHidqyug3VUKvIET5TaIPpiYLcBn/U/X02gvKy"], ["created_at", "2020-04-08 17:19:58.236230"], ["updated_at", "2020-04-08 17:19:58.236230"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.4ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 11], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:19:58.240224"], ["updated_at", "2020-04-08 17:19:58.240224"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 11], ["created_at", "2020-04-08 17:19:58.243643"], ["updated_at", "2020-04-08 17:19:58.243643"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mTrade Create (0.2ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 15], ["created_at", "2020-04-08 17:19:58.245952"], ["updated_at", "2020-04-08 17:19:58.245952"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$hinQRJ29.dWmSxBZ12Vssu1yQJDKLeF6nJOHJ/W9JHtMlGnDeAzG."], ["created_at", "2020-04-08 17:19:58.252711"], ["updated_at", "2020-04-08 17:19:58.252711"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.4ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 12], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:19:58.255390"], ["updated_at", "2020-04-08 17:19:58.255390"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 12], ["created_at", "2020-04-08 17:19:58.259607"], ["updated_at", "2020-04-08 17:19:58.259607"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$0JRDY9ZXFMbXpSQJyHOL2uSeHXq4qpf.SkXupgHEVfrctLGClKyne"], ["created_at", "2020-04-08 17:21:23.801073"], ["updated_at", "2020-04-08 17:21:23.801073"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.5ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 13], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:21:23.819969"], ["updated_at", "2020-04-08 17:21:23.819969"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.7ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 13], ["created_at", "2020-04-08 17:21:23.837457"], ["updated_at", "2020-04-08 17:21:23.837457"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mTrade Create (0.4ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 17], ["created_at", "2020-04-08 17:21:23.854519"], ["updated_at", "2020-04-08 17:21:23.854519"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.8ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 13], ["created_at", "2020-04-08 17:21:23.857594"], ["updated_at", "2020-04-08 17:21:23.857594"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$l4bCamQdZ3v7VDYDK8eEPOqT9TYJA2PrelW12SNcPxAupnYdfTlWe"], ["created_at", "2020-04-08 17:21:23.872403"], ["updated_at", "2020-04-08 17:21:23.872403"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 14], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:21:23.875190"], ["updated_at", "2020-04-08 17:21:23.875190"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.8ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 14], ["created_at", "2020-04-08 17:21:23.878573"], ["updated_at", "2020-04-08 17:21:23.878573"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mTrade Create (1.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 19], ["created_at", "2020-04-08 17:21:23.886240"], ["updated_at", "2020-04-08 17:21:23.886240"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$mlV0xahP6qB0Myiktct6auWA02QwwWvJr5Z4BgGGdFpNaXiAE.qG6"], ["created_at", "2020-04-08 17:21:23.897172"], ["updated_at", "2020-04-08 17:21:23.897172"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.7ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 15], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:21:23.901757"], ["updated_at", "2020-04-08 17:21:23.901757"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 15], ["created_at", "2020-04-08 17:21:23.908047"], ["updated_at", "2020-04-08 17:21:23.908047"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$qUQfEPy9sswb0B9d/uazVucKoGXkXBswOxgfFYxCJchekn1Hx.OWm"], ["created_at", "2020-04-08 17:25:53.308435"], ["updated_at", "2020-04-08 17:25:53.308435"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.5ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 16], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:25:53.331208"], ["updated_at", "2020-04-08 17:25:53.331208"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 16], ["created_at", "2020-04-08 17:25:53.351290"], ["updated_at", "2020-04-08 17:25:53.351290"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mTrade Create (0.6ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 21], ["created_at", "2020-04-08 17:25:53.367254"], ["updated_at", "2020-04-08 17:25:53.367254"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 16], ["created_at", "2020-04-08 17:25:53.370853"], ["updated_at", "2020-04-08 17:25:53.370853"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$DhdASZ7B1Jjo5B2c5LLAOeDsoB6GeTaCnjjSjIffAmv0Cwu6eOgyu"], ["created_at", "2020-04-08 17:25:53.391033"], ["updated_at", "2020-04-08 17:25:53.391033"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 17], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:25:53.393377"], ["updated_at", "2020-04-08 17:25:53.393377"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 17], ["created_at", "2020-04-08 17:25:53.395641"], ["updated_at", "2020-04-08 17:25:53.395641"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  [1m[36mTrade Create (0.2ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 23], ["created_at", "2020-04-08 17:25:53.397525"], ["updated_at", "2020-04-08 17:25:53.397525"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$puq2hQ01Q/9q1M1gL3fkjOOeq5IqD8ACzz68rWf5l9Air3d7o6.C2"], ["created_at", "2020-04-08 17:25:53.406921"], ["updated_at", "2020-04-08 17:25:53.406921"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (1.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 18], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:25:53.409483"], ["updated_at", "2020-04-08 17:25:53.409483"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
  [1m[36mStock Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.9ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 18], ["created_at", "2020-04-08 17:25:53.418003"], ["updated_at", "2020-04-08 17:25:53.418003"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$qoqLfRX.FID/AB9gE3MjderjwcCMBNq2B2kwT97rkpahlB4Qhrcm."], ["created_at", "2020-04-08 17:33:33.214334"], ["updated_at", "2020-04-08 17:33:33.214334"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.6ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 19], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:33:33.240440"], ["updated_at", "2020-04-08 17:33:33.240440"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 19], ["created_at", "2020-04-08 17:33:33.267426"], ["updated_at", "2020-04-08 17:33:33.267426"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[36mTrade Create (0.8ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 25], ["created_at", "2020-04-08 17:33:33.283616"], ["updated_at", "2020-04-08 17:33:33.283616"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 19], ["created_at", "2020-04-08 17:33:33.288211"], ["updated_at", "2020-04-08 17:33:33.288211"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 10:33:33 -0700
Processing by StocksController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 19], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.8ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 19]]
  [1m[36mTrade Load (45.4ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 25]]
  [1m[36mTrade Load (0.5ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 26]]
Completed 200 OK in 66ms (Views: 7.8ms | ActiveRecord: 47.4ms | Allocations: 2195)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$pR8.a8442reJIEUdyyjkUelED/mag1psz4FI59sxqDedQqC0FiJ1m"], ["created_at", "2020-04-08 17:33:33.386328"], ["updated_at", "2020-04-08 17:33:33.386328"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 20], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:33:33.389754"], ["updated_at", "2020-04-08 17:33:33.389754"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 10:33:33 -0700
Processing by StocksController#create as HTML
  Parameters: {"stock"=>{"symbol"=>"test"}, "portfolio"=>"test_portfolio"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (2.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 20], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "test"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "test"], ["portfolio_id", 20], ["created_at", "2020-04-08 17:33:33.412909"], ["updated_at", "2020-04-08 17:33:33.412909"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTrade Load (0.9ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 27]]
Completed 200 OK in 12ms (Views: 0.9ms | ActiveRecord: 5.8ms | Allocations: 1784)
  [1m[36mStock Load (0.5ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" ORDER BY "stocks"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$6PujM4.C/a2HDn2fBz8HAeT.BFo6k0z7E3/InzhIDPdrp.WqubJgy"], ["created_at", "2020-04-08 17:33:33.430342"], ["updated_at", "2020-04-08 17:33:33.430342"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.5ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 21], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:33:33.434252"], ["updated_at", "2020-04-08 17:33:33.434252"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 21], ["created_at", "2020-04-08 17:33:33.437730"], ["updated_at", "2020-04-08 17:33:33.437730"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.4ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  [1m[36mTrade Create (0.4ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 28], ["created_at", "2020-04-08 17:33:33.440588"], ["updated_at", "2020-04-08 17:33:33.440588"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 10:33:33 -0700
Processing by TradesController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 21], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 21], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 28]]
Completed 200 OK in 6ms (Views: 0.9ms | ActiveRecord: 1.3ms | Allocations: 1415)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$gQtcBWVHbMVy8JnC3Duf0.YAvyEtvOZN2XbjP7huAzjqs7JiEdGMa"], ["created_at", "2020-04-08 17:33:33.466218"], ["updated_at", "2020-04-08 17:33:33.466218"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.4ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 22], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:33:33.470329"], ["updated_at", "2020-04-08 17:33:33.470329"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 22], ["created_at", "2020-04-08 17:33:33.473911"], ["updated_at", "2020-04-08 17:33:33.473911"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 10:33:33 -0700
Processing by TradesController#create as HTML
  Parameters: {"trade"=>{"action"=>"1", "price"=>"100.0", "quantity"=>"20"}, "portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 22], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 22], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTrade Create (0.4ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 100.0], ["quantity", 20], ["stock_id", 29], ["created_at", "2020-04-08 17:33:33.495219"], ["updated_at", "2020-04-08 17:33:33.495219"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.3ms | ActiveRecord: 1.6ms | Allocations: 1815)
  [1m[36mTrade Load (0.3ms)[0m  [1m[34mSELECT "trades".* FROM "trades" ORDER BY "trades"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$6q46DaR3EBl6pk9iyivEuuFg2LxuIRfdmWCOJnO2dYlk3Tj8VjR9C"], ["created_at", "2020-04-08 17:41:37.022921"], ["updated_at", "2020-04-08 17:41:37.022921"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio1"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 23], ["name", "test_portfolio1"], ["created_at", "2020-04-08 17:41:37.050917"], ["updated_at", "2020-04-08 17:41:37.050917"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/portfolios" for 127.0.0.1 at 2020-04-08 10:41:37 -0700
Processing by PortfoliosController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1[0m  [["user_id", 23]]
  [1m[36mStock Load (0.6ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 23]]
Completed 200 OK in 19ms (Views: 6.5ms | ActiveRecord: 3.1ms | Allocations: 2791)
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$UbrRoo.e.U93AY79m4jFf.rlGw7290HMS7IYdX7O0vxzDg/Q/Upg6"], ["created_at", "2020-04-08 17:41:37.109841"], ["updated_at", "2020-04-08 17:41:37.109841"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.5ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 24], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:41:37.113920"], ["updated_at", "2020-04-08 17:41:37.113920"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.5ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 24], ["created_at", "2020-04-08 17:41:37.128695"], ["updated_at", "2020-04-08 17:41:37.128695"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mTrade Create (0.7ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 30], ["created_at", "2020-04-08 17:41:37.152089"], ["updated_at", "2020-04-08 17:41:37.152089"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.5ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.5ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 24], ["created_at", "2020-04-08 17:41:37.156689"], ["updated_at", "2020-04-08 17:41:37.156689"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 10:41:37 -0700
Processing by StocksController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (1.0ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 24], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.5ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 24]]
  [1m[36mTrade Load (0.6ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 30]]
  [1m[36mTrade Load (0.5ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 31]]
Completed 200 OK in 11ms (Views: 4.3ms | ActiveRecord: 2.9ms | Allocations: 1913)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$TEYKITELpalL6SHpksYhTuVlwLM189MX1MEkv.IsI.pZdiNB18KIa"], ["created_at", "2020-04-08 17:41:37.192144"], ["updated_at", "2020-04-08 17:41:37.192144"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 25], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:41:37.195018"], ["updated_at", "2020-04-08 17:41:37.195018"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 10:41:37 -0700
Processing by StocksController#create as HTML
  Parameters: {"stock"=>{"symbol"=>"test"}, "portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 25], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "test"], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "test"], ["portfolio_id", 25], ["created_at", "2020-04-08 17:41:37.214240"], ["updated_at", "2020-04-08 17:41:37.214240"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 32]]
Completed 200 OK in 6ms (Views: 0.7ms | ActiveRecord: 1.8ms | Allocations: 1784)
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" ORDER BY "stocks"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$T5RUaYFg9N1A6RXLicsiXOFOQqn1DQywXgj.Y26BW4YIrZLgUuoYa"], ["created_at", "2020-04-08 17:41:37.222006"], ["updated_at", "2020-04-08 17:41:37.222006"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.5ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 26], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:41:37.228520"], ["updated_at", "2020-04-08 17:41:37.228520"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.6ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 26], ["created_at", "2020-04-08 17:41:37.233280"], ["updated_at", "2020-04-08 17:41:37.233280"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 33], ["created_at", "2020-04-08 17:41:37.237245"], ["updated_at", "2020-04-08 17:41:37.237245"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 10:41:37 -0700
Processing by TradesController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 26], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 26], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mTrade Load (0.3ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 33]]
Completed 200 OK in 8ms (Views: 1.6ms | ActiveRecord: 1.3ms | Allocations: 1417)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$UzAI2b0PVuAKRrUpVQsJ7.IKjmjStkN4k9gK2vCLi0Hg9L6th5Lc."], ["created_at", "2020-04-08 17:41:37.288862"], ["updated_at", "2020-04-08 17:41:37.288862"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.5ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 27], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:41:37.293633"], ["updated_at", "2020-04-08 17:41:37.293633"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.5ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 27], ["created_at", "2020-04-08 17:41:37.297476"], ["updated_at", "2020-04-08 17:41:37.297476"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 10:41:37 -0700
Processing by TradesController#create as HTML
  Parameters: {"trade"=>{"action"=>"1", "price"=>"100.0", "quantity"=>"20"}, "portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 27], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.5ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 27], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTrade Create (0.4ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 100.0], ["quantity", 20], ["stock_id", 34], ["created_at", "2020-04-08 17:41:37.325473"], ["updated_at", "2020-04-08 17:41:37.325473"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 15ms (Views: 0.4ms | ActiveRecord: 2.2ms | Allocations: 1813)
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" ORDER BY "trades"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$42lbEgOJ3RVViDlG7Hro1uDX/ib0HhhEPfIvhrxZUpYJsWZ13PDyq"], ["created_at", "2020-04-08 17:48:09.089320"], ["updated_at", "2020-04-08 17:48:09.089320"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio1"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.5ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 28], ["name", "test_portfolio1"], ["created_at", "2020-04-08 17:48:09.115632"], ["updated_at", "2020-04-08 17:48:09.115632"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/portfolios" for 127.0.0.1 at 2020-04-08 10:48:09 -0700
Processing by PortfoliosController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1[0m  [["user_id", 28]]
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 28]]
Completed 200 OK in 17ms (Views: 5.2ms | ActiveRecord: 2.9ms | Allocations: 2791)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$QHjES5.LOfLKn/41kiz3nuOR.aTOtOCZG7ah/cM1/g5EP5/PKEvOO"], ["created_at", "2020-04-08 17:48:09.205069"], ["updated_at", "2020-04-08 17:48:09.205069"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/portfolios" for 127.0.0.1 at 2020-04-08 10:48:09 -0700
Processing by PortfoliosController#create as HTML
  Parameters: {"portfolio"=>{"name"=>"test"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 29], ["name", "test"], ["created_at", "2020-04-08 17:48:09.223781"], ["updated_at", "2020-04-08 17:48:09.223781"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 29]]
Completed 200 OK in 5ms (Views: 0.6ms | ActiveRecord: 1.3ms | Allocations: 1452)
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" ORDER BY "portfolios"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$5QBiAgbavFvMLfSnFG0uve4hpaqm/QbGQrc90veCBI9c6qE6Z98vW"], ["created_at", "2020-04-08 17:48:09.230451"], ["updated_at", "2020-04-08 17:48:09.230451"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.7ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 30], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:48:09.232859"], ["updated_at", "2020-04-08 17:48:09.232859"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (3.0ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 30], ["created_at", "2020-04-08 17:48:09.258017"], ["updated_at", "2020-04-08 17:48:09.258017"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  [1m[36mTrade Create (1.2ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 35], ["created_at", "2020-04-08 17:48:09.280114"], ["updated_at", "2020-04-08 17:48:09.280114"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 30], ["created_at", "2020-04-08 17:48:09.285369"], ["updated_at", "2020-04-08 17:48:09.285369"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 10:48:09 -0700
Processing by StocksController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 30], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 30]]
  [1m[36mTrade Load (0.4ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 35]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 36]]
Completed 200 OK in 7ms (Views: 2.7ms | ActiveRecord: 1.4ms | Allocations: 1912)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$tmVdHnhcdyPKQZrhjJ0d9ekDlMRpaGRv7/wvZ1HbgRSLHUUKl5MF."], ["created_at", "2020-04-08 17:48:09.312405"], ["updated_at", "2020-04-08 17:48:09.312405"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 31], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:48:09.317026"], ["updated_at", "2020-04-08 17:48:09.317026"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 10:48:09 -0700
Processing by StocksController#create as HTML
  Parameters: {"stock"=>{"symbol"=>"test"}, "portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 31], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "test"], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "test"], ["portfolio_id", 31], ["created_at", "2020-04-08 17:48:09.336441"], ["updated_at", "2020-04-08 17:48:09.336441"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 37]]
Completed 200 OK in 11ms (Views: 0.9ms | ActiveRecord: 2.3ms | Allocations: 1783)
  [1m[36mStock Load (0.5ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" ORDER BY "stocks"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$yZfLd9ZwSZ9elnu4p0/bjeI6gnDiE8fhFv7duRb4l2J3BOoevujsa"], ["created_at", "2020-04-08 17:48:09.363186"], ["updated_at", "2020-04-08 17:48:09.363186"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (1.1ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 32], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:48:09.365619"], ["updated_at", "2020-04-08 17:48:09.365619"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 32], ["created_at", "2020-04-08 17:48:09.371170"], ["updated_at", "2020-04-08 17:48:09.371170"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  [1m[36mTrade Create (0.6ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 38], ["created_at", "2020-04-08 17:48:09.374362"], ["updated_at", "2020-04-08 17:48:09.374362"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 10:48:09 -0700
Processing by TradesController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 32], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.5ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 32], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mTrade Load (0.4ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 38]]
Completed 200 OK in 8ms (Views: 1.5ms | ActiveRecord: 1.7ms | Allocations: 1416)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$Xz.K.i9Uy4DPlDgdPWvxSO5gtw262MIaP9Ef.Ig.smMQFE0w8MEOm"], ["created_at", "2020-04-08 17:48:09.407066"], ["updated_at", "2020-04-08 17:48:09.407066"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 33], ["name", "test_portfolio"], ["created_at", "2020-04-08 17:48:09.410848"], ["updated_at", "2020-04-08 17:48:09.410848"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.6ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 33], ["created_at", "2020-04-08 17:48:09.414275"], ["updated_at", "2020-04-08 17:48:09.414275"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 10:48:09 -0700
Processing by TradesController#create as HTML
  Parameters: {"trade"=>{"action"=>"1", "price"=>"100.0", "quantity"=>"20"}, "portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 33], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 33], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTrade Create (0.5ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 100.0], ["quantity", 20], ["stock_id", 39], ["created_at", "2020-04-08 17:48:09.431694"], ["updated_at", "2020-04-08 17:48:09.431694"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.5ms | ActiveRecord: 1.9ms | Allocations: 1813)
  [1m[36mTrade Load (0.3ms)[0m  [1m[34mSELECT "trades".* FROM "trades" ORDER BY "trades"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (46.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "stockbyte_app_test"[0m
  [1m[35m (288.4ms)[0m  [1m[35mCREATE DATABASE "stockbyte_app_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "portfolios" CASCADE[0m
  [1m[35m (49.9ms)[0m  [1m[35mCREATE TABLE "portfolios" ("id" bigserial primary key, "user_id" integer, "name" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE IF EXISTS "stocks" CASCADE[0m
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE "stocks" ("id" bigserial primary key, "symbol" character varying, "portfolio_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "trades" CASCADE[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "trades" ("id" bigserial primary key, "action" integer, "price" float, "quantity" integer, "stock_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (40.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20200406213945)[0m
  [1m[35m (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20200406182701),
(20200406213429),
(20200406213719);

[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "test"], ["created_at", "2020-04-08 18:10:40.760707"], ["updated_at", "2020-04-08 18:10:40.760707"]]
  [1m[35m (39.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "fe10c2ca85938de999f8738fc7fcd628bdbf1b71"], ["created_at", "2020-04-08 18:10:40.806029"], ["updated_at", "2020-04-08 18:10:40.806029"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$pQk0R6wwIPyVLn2z9.TFs.TBkFVC2GAMcK4VrqmTvH.FxJgf8x3/u"], ["created_at", "2020-04-08 18:10:40.950771"], ["updated_at", "2020-04-08 18:10:40.950771"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio1"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (1.1ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 1], ["name", "test_portfolio1"], ["created_at", "2020-04-08 18:10:40.982535"], ["updated_at", "2020-04-08 18:10:40.982535"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/portfolios" for 127.0.0.1 at 2020-04-08 11:10:40 -0700
Processing by PortfoliosController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1[0m  [["user_id", 1]]
  [1m[36mStock Load (0.4ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 1]]
Completed 200 OK in 17ms (Views: 6.1ms | ActiveRecord: 3.2ms | Allocations: 2748)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$NvV.OefBuBV2UkdpVNp0I.QTmzbpZ8f90qQR1bpg/DA32SbElE12O"], ["created_at", "2020-04-08 18:10:41.035046"], ["updated_at", "2020-04-08 18:10:41.035046"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/portfolios" for 127.0.0.1 at 2020-04-08 11:10:41 -0700
Processing by PortfoliosController#create as HTML
  Parameters: {"portfolio"=>{"name"=>"test"}}
  [1m[36mUser Load (5.9ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (1.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 2], ["name", "test"], ["created_at", "2020-04-08 18:10:41.061285"], ["updated_at", "2020-04-08 18:10:41.061285"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.5ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 2]]
Completed 200 OK in 14ms (Views: 1.2ms | ActiveRecord: 8.3ms | Allocations: 1450)
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" ORDER BY "portfolios"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$aD6RCvbXFMn1jj5.Gh4C9u10A/HblYgOzlm4xB80PEYnOaS.Oecfa"], ["created_at", "2020-04-08 18:10:41.071941"], ["updated_at", "2020-04-08 18:10:41.071941"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.4ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 3], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:10:41.075101"], ["updated_at", "2020-04-08 18:10:41.075101"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.7ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 3], ["created_at", "2020-04-08 18:10:41.088965"], ["updated_at", "2020-04-08 18:10:41.088965"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTrade Create (0.8ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 1], ["created_at", "2020-04-08 18:10:41.110747"], ["updated_at", "2020-04-08 18:10:41.110747"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 3], ["created_at", "2020-04-08 18:10:41.114858"], ["updated_at", "2020-04-08 18:10:41.114858"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 11:10:41 -0700
Processing by StocksController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 3], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 3]]
  [1m[36mTrade Load (0.8ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 1]]
  [1m[36mTrade Load (0.6ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 2]]
Completed 200 OK in 15ms (Views: 4.3ms | ActiveRecord: 4.5ms | Allocations: 1905)
  [1m[35m (2.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$NMd4bzf694YPhXA1AktMHOucn/8Ht3kjUbh8zoEdBDgbEbICknOHC"], ["created_at", "2020-04-08 18:10:41.154227"], ["updated_at", "2020-04-08 18:10:41.154227"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.5ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 4], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:10:41.158177"], ["updated_at", "2020-04-08 18:10:41.158177"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 11:10:41 -0700
Processing by StocksController#create as HTML
  Parameters: {"stock"=>{"symbol"=>"test"}, "portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 4], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "test"], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "test"], ["portfolio_id", 4], ["created_at", "2020-04-08 18:10:41.176748"], ["updated_at", "2020-04-08 18:10:41.176748"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTrade Load (0.3ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 3]]
Completed 200 OK in 8ms (Views: 1.1ms | ActiveRecord: 2.1ms | Allocations: 1779)
  [1m[36mStock Load (0.4ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" ORDER BY "stocks"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$rfwaXsaxIU4zeO66XHsP4uTsvOZaDF0J/IpRxrlR4vW1fAdUeGhvK"], ["created_at", "2020-04-08 18:10:41.193831"], ["updated_at", "2020-04-08 18:10:41.193831"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 5], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:10:41.197477"], ["updated_at", "2020-04-08 18:10:41.197477"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$XVZXkrdxq/26SLgOPDNxne5ArLPL68qGPvNXPSJwCvXwaDrbdXVom"], ["created_at", "2020-04-08 18:10:41.203192"], ["updated_at", "2020-04-08 18:10:41.203192"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 6], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:10:41.205873"], ["updated_at", "2020-04-08 18:10:41.205873"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.5ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 6], ["created_at", "2020-04-08 18:10:41.208673"], ["updated_at", "2020-04-08 18:10:41.208673"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.4ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 4], ["created_at", "2020-04-08 18:10:41.211870"], ["updated_at", "2020-04-08 18:10:41.211870"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 11:10:41 -0700
Processing by TradesController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 6], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.7ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 6], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mTrade Load (0.4ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 4]]
Completed 200 OK in 7ms (Views: 1.0ms | ActiveRecord: 1.7ms | Allocations: 1414)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$3OIRPJDyp1WY0euXhIKaX.v7wVdqqcjLLW0b7rwWh2jOfeMxEXnTa"], ["created_at", "2020-04-08 18:10:41.238257"], ["updated_at", "2020-04-08 18:10:41.238257"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.7ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 7], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:10:41.241981"], ["updated_at", "2020-04-08 18:10:41.241981"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (14.8ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 7], ["created_at", "2020-04-08 18:10:41.248701"], ["updated_at", "2020-04-08 18:10:41.248701"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 11:10:41 -0700
Processing by TradesController#create as HTML
  Parameters: {"trade"=>{"action"=>"1", "price"=>"100.0", "quantity"=>"20"}, "portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 7], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.7ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 7], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTrade Create (0.5ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 100.0], ["quantity", 20], ["stock_id", 5], ["created_at", "2020-04-08 18:10:41.281076"], ["updated_at", "2020-04-08 18:10:41.281076"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.5ms | ActiveRecord: 2.5ms | Allocations: 1811)
  [1m[36mTrade Load (2.3ms)[0m  [1m[34mSELECT "trades".* FROM "trades" ORDER BY "trades"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$DdQLo9Da95FKG76U5vbe1OSkfhJZHQ9IipdtmOcyFGigJlCzsL4AW"], ["created_at", "2020-04-08 18:12:41.184803"], ["updated_at", "2020-04-08 18:12:41.184803"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio1"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.4ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 8], ["name", "test_portfolio1"], ["created_at", "2020-04-08 18:12:41.209810"], ["updated_at", "2020-04-08 18:12:41.209810"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/portfolios" for 127.0.0.1 at 2020-04-08 11:12:41 -0700
Processing by PortfoliosController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1[0m  [["user_id", 8]]
  [1m[36mStock Load (0.7ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 8]]
Completed 200 OK in 17ms (Views: 5.5ms | ActiveRecord: 3.7ms | Allocations: 2747)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$kglqP0IRmSTgU4yIVurjtu4OkZvADx5fi83EtdMkSrVa.0xVIQZdG"], ["created_at", "2020-04-08 18:12:41.263075"], ["updated_at", "2020-04-08 18:12:41.263075"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/portfolios" for 127.0.0.1 at 2020-04-08 11:12:41 -0700
Processing by PortfoliosController#create as HTML
  Parameters: {"portfolio"=>{"name"=>"test"}}
  [1m[36mUser Load (7.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (8.5ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (3.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 9], ["name", "test"], ["created_at", "2020-04-08 18:12:41.298273"], ["updated_at", "2020-04-08 18:12:41.298273"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 9]]
Completed 200 OK in 26ms (Views: 0.8ms | ActiveRecord: 19.8ms | Allocations: 1450)
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" ORDER BY "portfolios"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (1.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$80gwFO7/8xb9Q/kQ0aXhVOBcXbKvaXZlEUCfFX3ygh43LAuiRahBS"], ["created_at", "2020-04-08 18:12:41.311730"], ["updated_at", "2020-04-08 18:12:41.311730"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 10], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:12:41.314093"], ["updated_at", "2020-04-08 18:12:41.314093"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.8ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 10], ["created_at", "2020-04-08 18:12:41.325280"], ["updated_at", "2020-04-08 18:12:41.325280"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.6ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mTrade Create (0.7ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 6], ["created_at", "2020-04-08 18:12:41.344876"], ["updated_at", "2020-04-08 18:12:41.344876"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 10], ["created_at", "2020-04-08 18:12:41.348422"], ["updated_at", "2020-04-08 18:12:41.348422"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 11:12:41 -0700
Processing by StocksController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 10], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 10]]
  [1m[36mTrade Load (0.3ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 6]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 7]]
Completed 200 OK in 8ms (Views: 2.7ms | ActiveRecord: 1.4ms | Allocations: 1904)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$NX4PcGqx96UoDZwSImTS/.IpO1Hr1x11/s4tS8N6o0AcvO5i1my6O"], ["created_at", "2020-04-08 18:12:41.374208"], ["updated_at", "2020-04-08 18:12:41.374208"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 11], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:12:41.377199"], ["updated_at", "2020-04-08 18:12:41.377199"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 11:12:41 -0700
Processing by StocksController#create as HTML
  Parameters: {"stock"=>{"symbol"=>"test"}, "portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 11], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "test"], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "test"], ["portfolio_id", 11], ["created_at", "2020-04-08 18:12:41.394481"], ["updated_at", "2020-04-08 18:12:41.394481"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 8]]
Completed 200 OK in 7ms (Views: 0.8ms | ActiveRecord: 2.3ms | Allocations: 1779)
  [1m[36mStock Load (0.4ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" ORDER BY "stocks"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$tSmwBX3SjFlDaN23nRt3aefxBDhwwo614V4mDM/i/iHnkpv2Ggtii"], ["created_at", "2020-04-08 18:12:41.411416"], ["updated_at", "2020-04-08 18:12:41.411416"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.5ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 12], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:12:41.414402"], ["updated_at", "2020-04-08 18:12:41.414402"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "test"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "test"], ["portfolio_id", 12], ["created_at", "2020-04-08 18:12:41.418182"], ["updated_at", "2020-04-08 18:12:41.418182"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/stocks/1?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 11:12:41 -0700
Processing by StocksController#destroy as HTML
  Parameters: {"portfolio"=>"test_portfolio", "id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 12], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."id" = $2 LIMIT $3[0m  [["portfolio_id", 12], ["id", 1], ["LIMIT", 1]]
Completed 404 Not Found in 3ms (ActiveRecord: 0.8ms | Allocations: 1146)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$Dv.Zoj4tbuSQBOjjaa3bGOas77kpFwzuSEEsT0gL77Nqi7276L0.2"], ["created_at", "2020-04-08 18:12:41.437180"], ["updated_at", "2020-04-08 18:12:41.437180"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.4ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 13], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:12:41.441199"], ["updated_at", "2020-04-08 18:12:41.441199"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 13], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 13], ["created_at", "2020-04-08 18:12:41.444873"], ["updated_at", "2020-04-08 18:12:41.444873"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 10], ["created_at", "2020-04-08 18:12:41.447544"], ["updated_at", "2020-04-08 18:12:41.447544"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 11:12:41 -0700
Processing by TradesController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 13], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 13], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 10]]
Completed 200 OK in 6ms (Views: 0.8ms | ActiveRecord: 1.2ms | Allocations: 1414)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$aRovpAzVNSggtTv3W8A5v..F9Wxvp2hxNIzSqSJf1bppE701xTFvy"], ["created_at", "2020-04-08 18:12:41.472615"], ["updated_at", "2020-04-08 18:12:41.472615"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.4ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 14], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:12:41.477208"], ["updated_at", "2020-04-08 18:12:41.477208"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 14], ["LIMIT", 1]]
  [1m[36mStock Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 14], ["created_at", "2020-04-08 18:12:41.484221"], ["updated_at", "2020-04-08 18:12:41.484221"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 11:12:41 -0700
Processing by TradesController#create as HTML
  Parameters: {"trade"=>{"action"=>"1", "price"=>"100.0", "quantity"=>"20"}, "portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 14], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.4ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 14], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTrade Create (0.4ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 100.0], ["quantity", 20], ["stock_id", 11], ["created_at", "2020-04-08 18:12:41.507104"], ["updated_at", "2020-04-08 18:12:41.507104"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 14ms (Views: 2.8ms | ActiveRecord: 2.1ms | Allocations: 1811)
  [1m[36mTrade Load (0.6ms)[0m  [1m[34mSELECT "trades".* FROM "trades" ORDER BY "trades"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$4HeQ8DruX3.TKz2o4LT1k.vSogpG48kyIVzwkIWscavhYc6AnjXrm"], ["created_at", "2020-04-08 18:14:08.934599"], ["updated_at", "2020-04-08 18:14:08.934599"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio1"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.4ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 15], ["name", "test_portfolio1"], ["created_at", "2020-04-08 18:14:08.958889"], ["updated_at", "2020-04-08 18:14:08.958889"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/portfolios" for 127.0.0.1 at 2020-04-08 11:14:08 -0700
Processing by PortfoliosController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1[0m  [["user_id", 15]]
  [1m[36mStock Load (0.5ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 15]]
Completed 200 OK in 17ms (Views: 5.9ms | ActiveRecord: 3.5ms | Allocations: 2747)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$KJafI9/oA32d/E7.KNHot.rJbuW8HAgP43LSSmVV/0FceThT/dB5y"], ["created_at", "2020-04-08 18:14:09.011353"], ["updated_at", "2020-04-08 18:14:09.011353"]]
  [1m[35m (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/portfolios" for 127.0.0.1 at 2020-04-08 11:14:09 -0700
Processing by PortfoliosController#create as HTML
  Parameters: {"portfolio"=>{"name"=>"test"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.4ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 16], ["name", "test"], ["created_at", "2020-04-08 18:14:09.034647"], ["updated_at", "2020-04-08 18:14:09.034647"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 16]]
Completed 200 OK in 10ms (Views: 1.3ms | ActiveRecord: 2.6ms | Allocations: 1450)
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" ORDER BY "portfolios"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$TFcLJ3T3rIKQHhdnI7eRw.Z2xjfodAWr0/z1oglEB7SEOKO.eHwKe"], ["created_at", "2020-04-08 18:14:09.049354"], ["updated_at", "2020-04-08 18:14:09.049354"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.5ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 17], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:14:09.051951"], ["updated_at", "2020-04-08 18:14:09.051951"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.7ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 17], ["created_at", "2020-04-08 18:14:09.067146"], ["updated_at", "2020-04-08 18:14:09.067146"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.5ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
  [1m[36mTrade Create (0.6ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 12], ["created_at", "2020-04-08 18:14:09.085885"], ["updated_at", "2020-04-08 18:14:09.085885"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.7ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 17], ["created_at", "2020-04-08 18:14:09.090244"], ["updated_at", "2020-04-08 18:14:09.090244"]]
  [1m[35m (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 11:14:09 -0700
Processing by StocksController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.6ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 17], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 17]]
  [1m[36mTrade Load (0.7ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 12]]
  [1m[36mTrade Load (0.4ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 13]]
Completed 200 OK in 13ms (Views: 7.3ms | ActiveRecord: 2.3ms | Allocations: 1904)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$R.o80mnYmNaze41GgYoTxeihs1fcIE5mc1.0bsQ6TkzwnW1A7YlJG"], ["created_at", "2020-04-08 18:14:09.130154"], ["updated_at", "2020-04-08 18:14:09.130154"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.7ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 18], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:14:09.133182"], ["updated_at", "2020-04-08 18:14:09.133182"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 11:14:09 -0700
Processing by StocksController#create as HTML
  Parameters: {"stock"=>{"symbol"=>"test"}, "portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.9ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 18], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "test"], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "test"], ["portfolio_id", 18], ["created_at", "2020-04-08 18:14:09.148216"], ["updated_at", "2020-04-08 18:14:09.148216"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 14]]
Completed 200 OK in 7ms (Views: 0.9ms | ActiveRecord: 2.4ms | Allocations: 1779)
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" ORDER BY "stocks"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$MAx5dS7h2MSBPDSnnqA5/e/UPLmn6qH/ZjWnFW3wbMJPnVdM0ZY4C"], ["created_at", "2020-04-08 18:14:09.165710"], ["updated_at", "2020-04-08 18:14:09.165710"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 19], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:14:09.170592"], ["updated_at", "2020-04-08 18:14:09.170592"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 19], ["created_at", "2020-04-08 18:14:09.173429"], ["updated_at", "2020-04-08 18:14:09.173429"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/stocks/1?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 11:14:09 -0700
Processing by StocksController#destroy as HTML
  Parameters: {"portfolio"=>"test_portfolio", "id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 19], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."id" = $2 LIMIT $3[0m  [["portfolio_id", 19], ["id", 1], ["LIMIT", 1]]
Completed 404 Not Found in 4ms (ActiveRecord: 0.9ms | Allocations: 1146)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$V82VI4TmJxyruOhC.wSud.4st8BW6gKie2GeiOXTIzwmYFnW7aCim"], ["created_at", "2020-04-08 18:14:09.193047"], ["updated_at", "2020-04-08 18:14:09.193047"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.7ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 20], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:14:09.196993"], ["updated_at", "2020-04-08 18:14:09.196993"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (1.0ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 20], ["created_at", "2020-04-08 18:14:09.204791"], ["updated_at", "2020-04-08 18:14:09.204791"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 16], ["created_at", "2020-04-08 18:14:09.207449"], ["updated_at", "2020-04-08 18:14:09.207449"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 11:14:09 -0700
Processing by TradesController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 20], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 20], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mTrade Load (0.4ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 16]]
Completed 200 OK in 8ms (Views: 1.1ms | ActiveRecord: 1.7ms | Allocations: 1414)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$uViGMDmujyG80ZuK9FIx1uvB7tyIWasLj4WpDvNrpaosVoQdSZ5Ze"], ["created_at", "2020-04-08 18:14:09.232828"], ["updated_at", "2020-04-08 18:14:09.232828"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.4ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 21], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:14:09.237953"], ["updated_at", "2020-04-08 18:14:09.237953"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 21], ["created_at", "2020-04-08 18:14:09.241640"], ["updated_at", "2020-04-08 18:14:09.241640"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 11:14:09 -0700
Processing by TradesController#create as HTML
  Parameters: {"trade"=>{"action"=>"1", "price"=>"100.0", "quantity"=>"20"}, "portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 21], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 21], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 100.0], ["quantity", 20], ["stock_id", 17], ["created_at", "2020-04-08 18:14:09.258409"], ["updated_at", "2020-04-08 18:14:09.258409"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.6ms | ActiveRecord: 1.7ms | Allocations: 1811)
  [1m[36mTrade Load (0.3ms)[0m  [1m[34mSELECT "trades".* FROM "trades" ORDER BY "trades"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$6/TNjD91UdjNZ93fIH25eefI3nTZvud062B55joTlJQocyhkX5rXO"], ["created_at", "2020-04-08 18:16:17.642605"], ["updated_at", "2020-04-08 18:16:17.642605"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio1"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.4ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 22], ["name", "test_portfolio1"], ["created_at", "2020-04-08 18:16:17.664318"], ["updated_at", "2020-04-08 18:16:17.664318"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/portfolios" for 127.0.0.1 at 2020-04-08 11:16:17 -0700
Processing by PortfoliosController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1[0m  [["user_id", 22]]
  [1m[36mStock Load (0.5ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 22]]
Completed 200 OK in 17ms (Views: 5.5ms | ActiveRecord: 3.6ms | Allocations: 2747)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$wsvpN0TGnqecfHXZnmB9hONdpI4LfgIzh3mXfrORkxi3Rgg5SxwYm"], ["created_at", "2020-04-08 18:16:17.713875"], ["updated_at", "2020-04-08 18:16:17.713875"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/portfolios" for 127.0.0.1 at 2020-04-08 11:16:17 -0700
Processing by PortfoliosController#create as HTML
  Parameters: {"portfolio"=>{"name"=>"test"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.5ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 23], ["name", "test"], ["created_at", "2020-04-08 18:16:17.751771"], ["updated_at", "2020-04-08 18:16:17.751771"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 23]]
Completed 200 OK in 10ms (Views: 1.1ms | ActiveRecord: 2.3ms | Allocations: 1450)
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" ORDER BY "portfolios"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$HQgJD6aWOh99V7E2s1h.SeF3qb4P8zvgA3PGLLeVThqZ5XX42G7yC"], ["created_at", "2020-04-08 18:16:17.764521"], ["updated_at", "2020-04-08 18:16:17.764521"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.4ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 24], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:16:17.767017"], ["updated_at", "2020-04-08 18:16:17.767017"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.6ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 24], ["created_at", "2020-04-08 18:16:17.779873"], ["updated_at", "2020-04-08 18:16:17.779873"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/stocks/1?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 11:16:17 -0700
Processing by StocksController#destroy as HTML
  Parameters: {"portfolio"=>"test_portfolio", "id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 24], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.4ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."id" = $2 LIMIT $3[0m  [["portfolio_id", 24], ["id", 1], ["LIMIT", 1]]
Completed 404 Not Found in 5ms (ActiveRecord: 1.2ms | Allocations: 1152)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$Yo.jln31kbFzGMklLVI4DOrG/vQOmYWWalDne73gIlUYTnKLIKD/G"], ["created_at", "2020-04-08 18:16:17.803957"], ["updated_at", "2020-04-08 18:16:17.803957"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.5ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 25], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:16:17.808534"], ["updated_at", "2020-04-08 18:16:17.808534"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 25], ["created_at", "2020-04-08 18:16:17.812782"], ["updated_at", "2020-04-08 18:16:17.812782"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mTrade Create (0.6ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 19], ["created_at", "2020-04-08 18:16:17.829272"], ["updated_at", "2020-04-08 18:16:17.829272"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 25], ["created_at", "2020-04-08 18:16:17.832425"], ["updated_at", "2020-04-08 18:16:17.832425"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 11:16:17 -0700
Processing by StocksController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 25], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 25]]
  [1m[36mTrade Load (0.5ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 19]]
  [1m[36mTrade Load (0.3ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 20]]
Completed 200 OK in 6ms (Views: 2.6ms | ActiveRecord: 1.6ms | Allocations: 1898)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$eghddoUW6Tv5LAVnk2h0BeKk2B.lYEJJCna37IxE0Qpty0LbRAcLq"], ["created_at", "2020-04-08 18:16:17.856605"], ["updated_at", "2020-04-08 18:16:17.856605"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.4ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 26], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:16:17.861162"], ["updated_at", "2020-04-08 18:16:17.861162"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 11:16:17 -0700
Processing by StocksController#create as HTML
  Parameters: {"stock"=>{"symbol"=>"test"}, "portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 26], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "test"], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "test"], ["portfolio_id", 26], ["created_at", "2020-04-08 18:16:17.884312"], ["updated_at", "2020-04-08 18:16:17.884312"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTrade Load (0.6ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 21]]
Completed 200 OK in 9ms (Views: 2.1ms | ActiveRecord: 2.4ms | Allocations: 1781)
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" ORDER BY "stocks"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$44bYoXuH.6teg8ZTJH5r5O/iOt.VnDEii3QVrPLBgK7hLJHnEM5za"], ["created_at", "2020-04-08 18:16:17.893807"], ["updated_at", "2020-04-08 18:16:17.893807"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 27], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:16:17.896191"], ["updated_at", "2020-04-08 18:16:17.896191"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 27], ["created_at", "2020-04-08 18:16:17.898569"], ["updated_at", "2020-04-08 18:16:17.898569"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.7ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
  [1m[36mTrade Create (0.4ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 22], ["created_at", "2020-04-08 18:16:17.902121"], ["updated_at", "2020-04-08 18:16:17.902121"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 11:16:17 -0700
Processing by TradesController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 27], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.4ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 27], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mTrade Load (0.3ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 22]]
Completed 200 OK in 7ms (Views: 1.3ms | ActiveRecord: 1.6ms | Allocations: 1413)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$VXzHCG2rWFuba9Qt.yr.EO1eC.Wb0Wv0Q.BgTO86NNsUCARYJTjDa"], ["created_at", "2020-04-08 18:16:17.928823"], ["updated_at", "2020-04-08 18:16:17.928823"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.4ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 28], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:16:17.931340"], ["updated_at", "2020-04-08 18:16:17.931340"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.6ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 28], ["created_at", "2020-04-08 18:16:17.935829"], ["updated_at", "2020-04-08 18:16:17.935829"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 11:16:17 -0700
Processing by TradesController#create as HTML
  Parameters: {"trade"=>{"action"=>"1", "price"=>"100.0", "quantity"=>"20"}, "portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 28], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 28], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTrade Create (0.5ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 100.0], ["quantity", 20], ["stock_id", 23], ["created_at", "2020-04-08 18:16:17.952737"], ["updated_at", "2020-04-08 18:16:17.952737"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.3ms | ActiveRecord: 1.6ms | Allocations: 1811)
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" ORDER BY "trades"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$6IB9OrdekV8ca9wWNfcYT.u7sIG2XSxASoxui0US6sB37JDTuwj56"], ["created_at", "2020-04-08 18:19:14.771711"], ["updated_at", "2020-04-08 18:19:14.771711"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio1"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.5ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 29], ["name", "test_portfolio1"], ["created_at", "2020-04-08 18:19:14.797347"], ["updated_at", "2020-04-08 18:19:14.797347"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/portfolios" for 127.0.0.1 at 2020-04-08 11:19:14 -0700
Processing by PortfoliosController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1[0m  [["user_id", 29]]
  [1m[36mStock Load (0.6ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 29]]
Completed 200 OK in 20ms (Views: 6.0ms | ActiveRecord: 4.5ms | Allocations: 2747)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$/T5Goc5cHoCDVs9IzkQt0.bu0DSJpu4VCmekVtQ6YpjK7LYMwbv3W"], ["created_at", "2020-04-08 18:19:14.853935"], ["updated_at", "2020-04-08 18:19:14.853935"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/portfolios" for 127.0.0.1 at 2020-04-08 11:19:14 -0700
Processing by PortfoliosController#create as HTML
  Parameters: {"portfolio"=>{"name"=>"test"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 30], ["name", "test"], ["created_at", "2020-04-08 18:19:14.873195"], ["updated_at", "2020-04-08 18:19:14.873195"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 30]]
Completed 200 OK in 7ms (Views: 0.9ms | ActiveRecord: 2.1ms | Allocations: 1450)
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" ORDER BY "portfolios"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$aLZb9oJq8SLKV9aohZyc6O7xyrJ3rchHXURNnhh2aucsEIJ4tssz6"], ["created_at", "2020-04-08 18:19:14.883074"], ["updated_at", "2020-04-08 18:19:14.883074"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 31], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:19:14.886540"], ["updated_at", "2020-04-08 18:19:14.886540"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.5ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 31], ["created_at", "2020-04-08 18:19:14.898841"], ["updated_at", "2020-04-08 18:19:14.898841"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$WKdGzIEvTRp70QEN9/PPKOkBWVH/3K2XT2TvZTVU8HX4XPxz2oBri"], ["created_at", "2020-04-08 18:19:14.906063"], ["updated_at", "2020-04-08 18:19:14.906063"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 32], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:19:14.908341"], ["updated_at", "2020-04-08 18:19:14.908341"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.5ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 32], ["created_at", "2020-04-08 18:19:14.911781"], ["updated_at", "2020-04-08 18:19:14.911781"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
  [1m[36mTrade Create (0.6ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 25], ["created_at", "2020-04-08 18:19:14.935057"], ["updated_at", "2020-04-08 18:19:14.935057"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 32], ["created_at", "2020-04-08 18:19:14.938820"], ["updated_at", "2020-04-08 18:19:14.938820"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 11:19:14 -0700
Processing by StocksController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 32], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 32]]
  [1m[36mTrade Load (0.3ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 25]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 26]]
Completed 200 OK in 9ms (Views: 2.7ms | ActiveRecord: 2.2ms | Allocations: 1904)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$XdYvajj5XtuMcaHTaCDOjuXbYzQkzOsOU2wVuiKhyTatxxxehAaKi"], ["created_at", "2020-04-08 18:19:14.966110"], ["updated_at", "2020-04-08 18:19:14.966110"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 33], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:19:14.969438"], ["updated_at", "2020-04-08 18:19:14.969438"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 11:19:14 -0700
Processing by StocksController#create as HTML
  Parameters: {"stock"=>{"symbol"=>"test"}, "portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 33], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "test"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "test"], ["portfolio_id", 33], ["created_at", "2020-04-08 18:19:14.992510"], ["updated_at", "2020-04-08 18:19:14.992510"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTrade Load (0.3ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 27]]
Completed 200 OK in 6ms (Views: 0.8ms | ActiveRecord: 1.4ms | Allocations: 1781)
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" ORDER BY "stocks"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$LT40OSvyPXIvjhEWdqPCCu90xgHusoj0dYmPQBbiE7aNzBFB5cvl."], ["created_at", "2020-04-08 18:19:15.002284"], ["updated_at", "2020-04-08 18:19:15.002284"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.6ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 34], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:19:15.006133"], ["updated_at", "2020-04-08 18:19:15.006133"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (2.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 34], ["created_at", "2020-04-08 18:19:15.011607"], ["updated_at", "2020-04-08 18:19:15.011607"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  [1m[36mTrade Create (0.5ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 28], ["created_at", "2020-04-08 18:19:15.016044"], ["updated_at", "2020-04-08 18:19:15.016044"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 11:19:15 -0700
Processing by TradesController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.6ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 34], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 34], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mTrade Load (0.3ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 28]]
Completed 200 OK in 6ms (Views: 0.9ms | ActiveRecord: 1.3ms | Allocations: 1413)
  [1m[35m (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$L46UVCkdsnWLSx8QuFRrG.aGCP921tmjiTpYULgUNixtGpKKf1kLq"], ["created_at", "2020-04-08 18:19:15.042279"], ["updated_at", "2020-04-08 18:19:15.042279"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 35], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:19:15.045338"], ["updated_at", "2020-04-08 18:19:15.045338"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.7ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 35], ["created_at", "2020-04-08 18:19:15.049371"], ["updated_at", "2020-04-08 18:19:15.049371"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 11:19:15 -0700
Processing by TradesController#create as HTML
  Parameters: {"trade"=>{"action"=>"1", "price"=>"100.0", "quantity"=>"20"}, "portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.5ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 35], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 35], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTrade Create (0.4ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 100.0], ["quantity", 20], ["stock_id", 29], ["created_at", "2020-04-08 18:19:15.066839"], ["updated_at", "2020-04-08 18:19:15.066839"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.3ms | ActiveRecord: 1.8ms | Allocations: 1811)
  [1m[36mTrade Load (0.4ms)[0m  [1m[34mSELECT "trades".* FROM "trades" ORDER BY "trades"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$xLBHOoJyxsUAEGCtrqP/lOmvO7APcTChi5qooTZYT6gd9UALy6NhO"], ["created_at", "2020-04-08 18:20:01.381348"], ["updated_at", "2020-04-08 18:20:01.381348"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio1"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (4.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 36], ["name", "test_portfolio1"], ["created_at", "2020-04-08 18:20:01.407098"], ["updated_at", "2020-04-08 18:20:01.407098"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/portfolios" for 127.0.0.1 at 2020-04-08 11:20:01 -0700
Processing by PortfoliosController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1[0m  [["user_id", 36]]
  [1m[36mStock Load (0.4ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 36]]
Completed 200 OK in 18ms (Views: 5.8ms | ActiveRecord: 2.9ms | Allocations: 2747)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$1J6fbvJ2eqcvGWxjpQKQAeV7nu3jR7BJ5UarwAmEBTW6HOnqEYeOS"], ["created_at", "2020-04-08 18:20:01.467024"], ["updated_at", "2020-04-08 18:20:01.467024"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/portfolios" for 127.0.0.1 at 2020-04-08 11:20:01 -0700
Processing by PortfoliosController#create as HTML
  Parameters: {"portfolio"=>{"name"=>"test"}}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.4ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 37], ["name", "test"], ["created_at", "2020-04-08 18:20:01.490443"], ["updated_at", "2020-04-08 18:20:01.490443"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 37]]
Completed 200 OK in 10ms (Views: 0.8ms | ActiveRecord: 3.8ms | Allocations: 1450)
  [1m[36mPortfolio Load (0.5ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" ORDER BY "portfolios"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$qYiBcvtlqp5qklc1.lZrjeSfXuBVpycMgLQb37dCAAwBhcyiAJbNG"], ["created_at", "2020-04-08 18:20:01.499987"], ["updated_at", "2020-04-08 18:20:01.499987"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 38], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:20:01.503265"], ["updated_at", "2020-04-08 18:20:01.503265"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (1.6ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 38], ["created_at", "2020-04-08 18:20:01.513401"], ["updated_at", "2020-04-08 18:20:01.513401"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/" for 127.0.0.1 at 2020-04-08 11:20:01 -0700
  [1m[35m (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$HOsEqTOGNDg1iSejN.4mw.3PvseWa2gTj19rnIi7BF4Ksz0U9sDLC"], ["created_at", "2020-04-08 18:20:01.548526"], ["updated_at", "2020-04-08 18:20:01.548526"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (2.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 39], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:20:01.552309"], ["updated_at", "2020-04-08 18:20:01.552309"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 39], ["created_at", "2020-04-08 18:20:01.558854"], ["updated_at", "2020-04-08 18:20:01.558854"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  [1m[36mTrade Create (0.8ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 31], ["created_at", "2020-04-08 18:20:01.577000"], ["updated_at", "2020-04-08 18:20:01.577000"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 39], ["created_at", "2020-04-08 18:20:01.582626"], ["updated_at", "2020-04-08 18:20:01.582626"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 11:20:01 -0700
Processing by StocksController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 39], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 39]]
  [1m[36mTrade Load (0.3ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 31]]
  [1m[36mTrade Load (0.5ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 32]]
Completed 200 OK in 8ms (Views: 4.5ms | ActiveRecord: 1.4ms | Allocations: 1904)
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (10.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$4WmHbwwOrZ.0HM/Xk4O7iOqd.5rsrRr4C.MWNRxkW2ELBfifXi/dy"], ["created_at", "2020-04-08 18:20:01.623006"], ["updated_at", "2020-04-08 18:20:01.623006"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.7ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 40], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:20:01.626899"], ["updated_at", "2020-04-08 18:20:01.626899"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 11:20:01 -0700
Processing by StocksController#create as HTML
  Parameters: {"stock"=>{"symbol"=>"test"}, "portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.6ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 40], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "test"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "test"], ["portfolio_id", 40], ["created_at", "2020-04-08 18:20:01.655072"], ["updated_at", "2020-04-08 18:20:01.655072"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTrade Load (0.4ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 33]]
Completed 200 OK in 18ms (Views: 1.0ms | ActiveRecord: 2.1ms | Allocations: 1781)
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" ORDER BY "stocks"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$/i5cdevGOEnwa6j1iF90renB34hvbyxDhArg3HkAASwucgpEl7vyi"], ["created_at", "2020-04-08 18:20:01.664965"], ["updated_at", "2020-04-08 18:20:01.664965"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.5ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 41], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:20:01.667721"], ["updated_at", "2020-04-08 18:20:01.667721"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 41], ["created_at", "2020-04-08 18:20:01.672312"], ["updated_at", "2020-04-08 18:20:01.672312"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  [1m[36mTrade Create (0.8ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 34], ["created_at", "2020-04-08 18:20:01.675603"], ["updated_at", "2020-04-08 18:20:01.675603"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 11:20:01 -0700
Processing by TradesController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.5ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 41], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.4ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 41], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mTrade Load (3.8ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 34]]
Completed 200 OK in 10ms (Views: 0.9ms | ActiveRecord: 4.9ms | Allocations: 1413)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$WWw.HmvqbpUHILYNecBqg.ij/eicP8f.1kIv7z/NSafSHiQ3Tb3Rm"], ["created_at", "2020-04-08 18:20:01.709969"], ["updated_at", "2020-04-08 18:20:01.709969"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.4ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 42], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:20:01.717747"], ["updated_at", "2020-04-08 18:20:01.717747"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 42], ["created_at", "2020-04-08 18:20:01.722301"], ["updated_at", "2020-04-08 18:20:01.722301"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 11:20:01 -0700
Processing by TradesController#create as HTML
  Parameters: {"trade"=>{"action"=>"1", "price"=>"100.0", "quantity"=>"20"}, "portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (1.6ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 42], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 42], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 100.0], ["quantity", 20], ["stock_id", 35], ["created_at", "2020-04-08 18:20:01.738739"], ["updated_at", "2020-04-08 18:20:01.738739"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.4ms | ActiveRecord: 2.8ms | Allocations: 1811)
  [1m[36mTrade Load (0.3ms)[0m  [1m[34mSELECT "trades".* FROM "trades" ORDER BY "trades"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (15.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$tD.2g.Odr1OjMf/5d.WgXe/Htz3gU6BToqszz4mOkTLCz.pBVZ.2."], ["created_at", "2020-04-08 18:21:19.236385"], ["updated_at", "2020-04-08 18:21:19.236385"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio1"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.8ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 43], ["name", "test_portfolio1"], ["created_at", "2020-04-08 18:21:19.263520"], ["updated_at", "2020-04-08 18:21:19.263520"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/portfolios" for 127.0.0.1 at 2020-04-08 11:21:19 -0700
Processing by PortfoliosController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1[0m  [["user_id", 43]]
  [1m[36mStock Load (0.5ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 43]]
Completed 200 OK in 19ms (Views: 6.3ms | ActiveRecord: 4.6ms | Allocations: 2747)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$BlJDC1gGUNGVolDTHIwb4.K2gt.Ft1JJJlY85LD8iktq1RCdF6pJ6"], ["created_at", "2020-04-08 18:21:19.319030"], ["updated_at", "2020-04-08 18:21:19.319030"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/portfolios" for 127.0.0.1 at 2020-04-08 11:21:19 -0700
Processing by PortfoliosController#create as HTML
  Parameters: {"portfolio"=>{"name"=>"test"}}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 44], ["name", "test"], ["created_at", "2020-04-08 18:21:19.338807"], ["updated_at", "2020-04-08 18:21:19.338807"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.8ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 44]]
Completed 200 OK in 7ms (Views: 1.7ms | ActiveRecord: 2.2ms | Allocations: 1450)
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" ORDER BY "portfolios"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$JNBK3aTWj.LmB8U.ZL36se5gNvKMgeX4DXkmFKcrLJ72aXOxg4Uye"], ["created_at", "2020-04-08 18:21:19.349558"], ["updated_at", "2020-04-08 18:21:19.349558"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 45], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:21:19.351835"], ["updated_at", "2020-04-08 18:21:19.351835"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 45], ["LIMIT", 1]]
  [1m[36mStock Exists? (3.6ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.6ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 45], ["created_at", "2020-04-08 18:21:19.377819"], ["updated_at", "2020-04-08 18:21:19.377819"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/" for 127.0.0.1 at 2020-04-08 11:21:19 -0700
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$cdoDS.h5F3XvPGHl.hOtmeiY6mM431IFi7g3DGkCGAP1JvQcLmaRq"], ["created_at", "2020-04-08 18:21:19.409322"], ["updated_at", "2020-04-08 18:21:19.409322"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 46], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:21:19.412365"], ["updated_at", "2020-04-08 18:21:19.412365"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 46], ["created_at", "2020-04-08 18:21:19.416025"], ["updated_at", "2020-04-08 18:21:19.416025"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 37], ["LIMIT", 1]]
  [1m[36mTrade Create (0.7ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 37], ["created_at", "2020-04-08 18:21:19.441345"], ["updated_at", "2020-04-08 18:21:19.441345"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (1.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 46], ["created_at", "2020-04-08 18:21:19.445810"], ["updated_at", "2020-04-08 18:21:19.445810"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 11:21:19 -0700
Processing by StocksController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 46], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 46]]
  [1m[36mTrade Load (0.4ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 37]]
  [1m[36mTrade Load (0.5ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 38]]
Completed 200 OK in 10ms (Views: 5.3ms | ActiveRecord: 1.7ms | Allocations: 1904)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$UVRdQiZTATVEiw8qvkcnauNAeqJvcu7hRzd06.X7aEaZO2wU11cFS"], ["created_at", "2020-04-08 18:21:19.512182"], ["updated_at", "2020-04-08 18:21:19.512182"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.4ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 47], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:21:19.516005"], ["updated_at", "2020-04-08 18:21:19.516005"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 11:21:19 -0700
Processing by StocksController#create as HTML
  Parameters: {"stock"=>{"symbol"=>"test"}, "portfolio"=>"test_portfolio"}
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 47], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "test"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "test"], ["portfolio_id", 47], ["created_at", "2020-04-08 18:21:19.547638"], ["updated_at", "2020-04-08 18:21:19.547638"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 39]]
Completed 200 OK in 12ms (Views: 0.8ms | ActiveRecord: 4.0ms | Allocations: 1781)
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" ORDER BY "stocks"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$8nbmDxbzckX7OXkQ6JE42.pbS38kS7KHyTi/T2trWd/4Bo/e6t5fW"], ["created_at", "2020-04-08 18:21:19.555342"], ["updated_at", "2020-04-08 18:21:19.555342"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.4ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 48], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:21:19.558341"], ["updated_at", "2020-04-08 18:21:19.558341"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.5ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 48], ["created_at", "2020-04-08 18:21:19.564625"], ["updated_at", "2020-04-08 18:21:19.564625"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  [1m[36mTrade Create (0.4ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 40], ["created_at", "2020-04-08 18:21:19.567605"], ["updated_at", "2020-04-08 18:21:19.567605"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 11:21:19 -0700
Processing by TradesController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 48], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 48], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 40]]
Completed 200 OK in 8ms (Views: 0.7ms | ActiveRecord: 1.5ms | Allocations: 1413)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$fVOFSVr6px.///5qunSSy.DN2txw0AoOJ3dUL64z9n6.3Ev0EbEmG"], ["created_at", "2020-04-08 18:21:19.594726"], ["updated_at", "2020-04-08 18:21:19.594726"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.4ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 49], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:21:19.597731"], ["updated_at", "2020-04-08 18:21:19.597731"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.5ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 49], ["created_at", "2020-04-08 18:21:19.601965"], ["updated_at", "2020-04-08 18:21:19.601965"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 11:21:19 -0700
Processing by TradesController#create as HTML
  Parameters: {"trade"=>{"action"=>"1", "price"=>"100.0", "quantity"=>"20"}, "portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 49], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 49], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTrade Create (0.4ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 100.0], ["quantity", 20], ["stock_id", 41], ["created_at", "2020-04-08 18:21:19.617891"], ["updated_at", "2020-04-08 18:21:19.617891"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.5ms | ActiveRecord: 1.5ms | Allocations: 1811)
  [1m[36mTrade Load (0.4ms)[0m  [1m[34mSELECT "trades".* FROM "trades" ORDER BY "trades"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$Tbdu1s7eZ3xgjiuEtJFyvezRzQcsrXQxtVDHELeyJjJiFghMgZVne"], ["created_at", "2020-04-08 18:23:42.390522"], ["updated_at", "2020-04-08 18:23:42.390522"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio1"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.4ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 50], ["name", "test_portfolio1"], ["created_at", "2020-04-08 18:23:42.437336"], ["updated_at", "2020-04-08 18:23:42.437336"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/portfolios" for 127.0.0.1 at 2020-04-08 11:23:42 -0700
Processing by PortfoliosController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1[0m  [["user_id", 50]]
  [1m[36mStock Load (1.0ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 50]]
Completed 200 OK in 16ms (Views: 5.0ms | ActiveRecord: 3.5ms | Allocations: 2747)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$T.Dz1gr7Yky09dOkvFkOHe9BaCtXy/9TQjbaAA46/OL5bRq4DpKGa"], ["created_at", "2020-04-08 18:23:42.487161"], ["updated_at", "2020-04-08 18:23:42.487161"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/portfolios" for 127.0.0.1 at 2020-04-08 11:23:42 -0700
Processing by PortfoliosController#create as HTML
  Parameters: {"portfolio"=>{"name"=>"test"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.7ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 51], ["name", "test"], ["created_at", "2020-04-08 18:23:42.508784"], ["updated_at", "2020-04-08 18:23:42.508784"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.4ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 51]]
Completed 200 OK in 10ms (Views: 1.8ms | ActiveRecord: 2.8ms | Allocations: 1450)
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" ORDER BY "portfolios"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$1Ja2DtHAK4lMtmZ/4dcHb.njy3SyWnmwBo0RfJg6X2hW/EGUnMZM6"], ["created_at", "2020-04-08 18:23:42.521422"], ["updated_at", "2020-04-08 18:23:42.521422"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.9ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 52], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:23:42.525245"], ["updated_at", "2020-04-08 18:23:42.525245"]]
  [1m[35m (6.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 52], ["created_at", "2020-04-08 18:23:42.549013"], ["updated_at", "2020-04-08 18:23:42.549013"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/" for 127.0.0.1 at 2020-04-08 11:23:42 -0700
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$awxwV/jt9rrwfQI1u0Xs2elFcqkX8P.mogBVOs8QymaB7Vga8XVFa"], ["created_at", "2020-04-08 18:23:42.575218"], ["updated_at", "2020-04-08 18:23:42.575218"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 53], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:23:42.579179"], ["updated_at", "2020-04-08 18:23:42.579179"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.7ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 53], ["created_at", "2020-04-08 18:23:42.584843"], ["updated_at", "2020-04-08 18:23:42.584843"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.5ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  [1m[36mTrade Create (0.8ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 43], ["created_at", "2020-04-08 18:23:42.606469"], ["updated_at", "2020-04-08 18:23:42.606469"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 53], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.6ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 53], ["created_at", "2020-04-08 18:23:42.611352"], ["updated_at", "2020-04-08 18:23:42.611352"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 11:23:42 -0700
Processing by StocksController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 53], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 53]]
  [1m[36mTrade Load (0.5ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 43]]
  [1m[36mTrade Load (0.3ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 44]]
Completed 200 OK in 9ms (Views: 3.3ms | ActiveRecord: 1.6ms | Allocations: 1904)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$1KAX0NhB82RzGil41QXOte5jzYpmVes/GLNiWAiv1TOS4bJn7X21G"], ["created_at", "2020-04-08 18:23:42.643062"], ["updated_at", "2020-04-08 18:23:42.643062"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (1.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 54], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:23:42.647442"], ["updated_at", "2020-04-08 18:23:42.647442"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 11:23:42 -0700
Processing by StocksController#create as HTML
  Parameters: {"stock"=>{"symbol"=>"test"}, "portfolio"=>"test_portfolio"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.6ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 54], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "test"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "test"], ["portfolio_id", 54], ["created_at", "2020-04-08 18:23:42.680065"], ["updated_at", "2020-04-08 18:23:42.680065"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 45]]
Completed 200 OK in 18ms (Views: 1.1ms | ActiveRecord: 2.9ms | Allocations: 1781)
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" ORDER BY "stocks"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$WttRRYDu1RrrTuKwe/07Ue/nn28RUqgQLnCaHib0z3u/JCiLDOFhy"], ["created_at", "2020-04-08 18:23:42.689324"], ["updated_at", "2020-04-08 18:23:42.689324"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 55], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:23:42.692302"], ["updated_at", "2020-04-08 18:23:42.692302"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.5ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 55], ["created_at", "2020-04-08 18:23:42.695880"], ["updated_at", "2020-04-08 18:23:42.695880"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 46], ["created_at", "2020-04-08 18:23:42.697952"], ["updated_at", "2020-04-08 18:23:42.697952"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 11:23:42 -0700
Processing by TradesController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 55], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 55], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 46]]
Completed 200 OK in 6ms (Views: 0.9ms | ActiveRecord: 1.0ms | Allocations: 1413)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$0AQmxad70uteP3L4cBifKOO8MUxTiNjmYxU37sjfrGqLJb3G1p.rO"], ["created_at", "2020-04-08 18:23:42.724949"], ["updated_at", "2020-04-08 18:23:42.724949"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 56], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:23:42.728968"], ["updated_at", "2020-04-08 18:23:42.728968"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 56], ["created_at", "2020-04-08 18:23:42.732448"], ["updated_at", "2020-04-08 18:23:42.732448"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 11:23:42 -0700
Processing by TradesController#create as HTML
  Parameters: {"trade"=>{"action"=>"1", "price"=>"100.0", "quantity"=>"20"}, "portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 56], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.4ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 56], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTrade Create (0.5ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 100.0], ["quantity", 20], ["stock_id", 47], ["created_at", "2020-04-08 18:23:42.750171"], ["updated_at", "2020-04-08 18:23:42.750171"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.3ms | ActiveRecord: 2.1ms | Allocations: 1811)
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" ORDER BY "trades"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$AuqvLcw3.AiW9zs0vS6PLuNfh98PPhQjLL5aj.Ny4Zv9nm6Q0hEC2"], ["created_at", "2020-04-08 18:24:59.352988"], ["updated_at", "2020-04-08 18:24:59.352988"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio1"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.4ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 57], ["name", "test_portfolio1"], ["created_at", "2020-04-08 18:24:59.376898"], ["updated_at", "2020-04-08 18:24:59.376898"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/portfolios" for 127.0.0.1 at 2020-04-08 11:24:59 -0700
Processing by PortfoliosController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1[0m  [["user_id", 57]]
  [1m[36mStock Load (0.9ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 57]]
Completed 200 OK in 17ms (Views: 5.6ms | ActiveRecord: 3.4ms | Allocations: 2747)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$z7Eyfo0qsFfQCwxMrO.hGeM31z1DXNyDcyBxoK.p9phtjCNhSL3Ai"], ["created_at", "2020-04-08 18:24:59.427458"], ["updated_at", "2020-04-08 18:24:59.427458"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/portfolios" for 127.0.0.1 at 2020-04-08 11:24:59 -0700
Processing by PortfoliosController#create as HTML
  Parameters: {"portfolio"=>{"name"=>"test"}}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.4ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 58], ["name", "test"], ["created_at", "2020-04-08 18:24:59.458483"], ["updated_at", "2020-04-08 18:24:59.458483"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.4ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 58]]
Completed 200 OK in 8ms (Views: 3.2ms | ActiveRecord: 1.7ms | Allocations: 1450)
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" ORDER BY "portfolios"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$d9ziA4I4oyTRxljcBg0MUuReO.vQ1XjXA6bWf1HMO1SbMbbaQxvLu"], ["created_at", "2020-04-08 18:24:59.470503"], ["updated_at", "2020-04-08 18:24:59.470503"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 59], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:24:59.472936"], ["updated_at", "2020-04-08 18:24:59.472936"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 59], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.5ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 59], ["created_at", "2020-04-08 18:24:59.487454"], ["updated_at", "2020-04-08 18:24:59.487454"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/" for 127.0.0.1 at 2020-04-08 11:24:59 -0700
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$DTl3XsChpq7QhU8rvN8w/.FTy0Cq4zP4pY972.gGoSFZAPfJ9QOtm"], ["created_at", "2020-04-08 18:24:59.516106"], ["updated_at", "2020-04-08 18:24:59.516106"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.5ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 60], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:24:59.521239"], ["updated_at", "2020-04-08 18:24:59.521239"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 60], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 60], ["created_at", "2020-04-08 18:24:59.524758"], ["updated_at", "2020-04-08 18:24:59.524758"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 49], ["LIMIT", 1]]
  [1m[36mTrade Create (0.8ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 49], ["created_at", "2020-04-08 18:24:59.548909"], ["updated_at", "2020-04-08 18:24:59.548909"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 60], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 60], ["created_at", "2020-04-08 18:24:59.557112"], ["updated_at", "2020-04-08 18:24:59.557112"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 11:24:59 -0700
Processing by StocksController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 60], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 60]]
  [1m[36mTrade Load (0.4ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 49]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 50]]
Completed 200 OK in 7ms (Views: 2.8ms | ActiveRecord: 1.3ms | Allocations: 1904)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$zyCAjnxHiQCgYwT4cQfP3uxm.QvShL4IvRanM37vRCxcS3ynnX9OO"], ["created_at", "2020-04-08 18:24:59.585772"], ["updated_at", "2020-04-08 18:24:59.585772"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.8ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 61], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:24:59.589823"], ["updated_at", "2020-04-08 18:24:59.589823"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 11:24:59 -0700
Processing by StocksController#create as HTML
  Parameters: {"stock"=>{"symbol"=>"test"}, "portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 61], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "test"], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "test"], ["portfolio_id", 61], ["created_at", "2020-04-08 18:24:59.646301"], ["updated_at", "2020-04-08 18:24:59.646301"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTrade Load (1.1ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 51]]
Completed 200 OK in 13ms (Views: 1.5ms | ActiveRecord: 3.4ms | Allocations: 1781)
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" ORDER BY "stocks"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$vT3DzlPerkRRNwuOE7PR2.7hpn5y.Wn2QBNGtz7Hme3kjrXI.5Ra2"], ["created_at", "2020-04-08 18:24:59.662101"], ["updated_at", "2020-04-08 18:24:59.662101"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.5ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 62], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:24:59.664956"], ["updated_at", "2020-04-08 18:24:59.664956"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 62], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 62], ["created_at", "2020-04-08 18:24:59.672012"], ["updated_at", "2020-04-08 18:24:59.672012"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 52], ["LIMIT", 1]]
  [1m[36mTrade Create (0.4ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 52], ["created_at", "2020-04-08 18:24:59.675172"], ["updated_at", "2020-04-08 18:24:59.675172"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 11:24:59 -0700
Processing by TradesController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.6ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 62], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.7ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 62], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mTrade Load (0.4ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 52]]
Completed 200 OK in 9ms (Views: 1.0ms | ActiveRecord: 2.0ms | Allocations: 1413)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$edMjB.OA1va1VbEG2.2zVOa/ruHL0dKx5J7WWguGZWEwsigItpasy"], ["created_at", "2020-04-08 18:24:59.700835"], ["updated_at", "2020-04-08 18:24:59.700835"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.4ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 63], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:24:59.705740"], ["updated_at", "2020-04-08 18:24:59.705740"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 63], ["created_at", "2020-04-08 18:24:59.709336"], ["updated_at", "2020-04-08 18:24:59.709336"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 11:24:59 -0700
Processing by TradesController#create as HTML
  Parameters: {"trade"=>{"action"=>"1", "price"=>"100.0", "quantity"=>"20"}, "portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.5ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 63], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 63], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 100.0], ["quantity", 20], ["stock_id", 53], ["created_at", "2020-04-08 18:24:59.728959"], ["updated_at", "2020-04-08 18:24:59.728959"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 10ms (Views: 0.4ms | ActiveRecord: 2.1ms | Allocations: 1811)
  [1m[36mTrade Load (0.3ms)[0m  [1m[34mSELECT "trades".* FROM "trades" ORDER BY "trades"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$GE5qGxDD0nasyykfB1n8FO7cBHQaMphgA0zm4yTTvST0A4gPh9YrK"], ["created_at", "2020-04-08 18:27:21.456201"], ["updated_at", "2020-04-08 18:27:21.456201"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio1"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.9ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 64], ["name", "test_portfolio1"], ["created_at", "2020-04-08 18:27:21.492575"], ["updated_at", "2020-04-08 18:27:21.492575"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/portfolios" for 127.0.0.1 at 2020-04-08 11:27:21 -0700
Processing by PortfoliosController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1[0m  [["user_id", 64]]
  [1m[36mStock Load (0.5ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 64]]
Completed 200 OK in 20ms (Views: 6.1ms | ActiveRecord: 4.6ms | Allocations: 2747)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$w5wOXs10BX684Ds9JgLyJu3SdMxTmKt52wK2ogpjpErq5vv/RJYsC"], ["created_at", "2020-04-08 18:27:21.545136"], ["updated_at", "2020-04-08 18:27:21.545136"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/portfolios" for 127.0.0.1 at 2020-04-08 11:27:21 -0700
Processing by PortfoliosController#create as HTML
  Parameters: {"portfolio"=>{"name"=>"test"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.5ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 65], ["name", "test"], ["created_at", "2020-04-08 18:27:21.564899"], ["updated_at", "2020-04-08 18:27:21.564899"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 65]]
Completed 200 OK in 21ms (Views: 1.1ms | ActiveRecord: 2.2ms | Allocations: 1450)
  [1m[36mPortfolio Load (8.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" ORDER BY "portfolios"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$jGXyN81rpDLd/64.WmFjzuakRQhlulOJb1w.MgsprKneRjJS5WMMu"], ["created_at", "2020-04-08 18:27:21.594057"], ["updated_at", "2020-04-08 18:27:21.594057"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 66], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:27:21.597233"], ["updated_at", "2020-04-08 18:27:21.597233"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 66], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.8ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 66], ["created_at", "2020-04-08 18:27:21.609603"], ["updated_at", "2020-04-08 18:27:21.609603"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$a9mfQYLwmx9gfkW029xQbuvJlc9Xh1qPv9ww6ex7MPEqZAEPPwHM."], ["created_at", "2020-04-08 18:27:21.624681"], ["updated_at", "2020-04-08 18:27:21.624681"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 67], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:27:21.630449"], ["updated_at", "2020-04-08 18:27:21.630449"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 67], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (1.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 67], ["created_at", "2020-04-08 18:27:21.634063"], ["updated_at", "2020-04-08 18:27:21.634063"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
  [1m[36mTrade Create (0.5ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 55], ["created_at", "2020-04-08 18:27:21.670561"], ["updated_at", "2020-04-08 18:27:21.670561"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 67], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 67], ["created_at", "2020-04-08 18:27:21.674896"], ["updated_at", "2020-04-08 18:27:21.674896"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 11:27:21 -0700
Processing by StocksController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 67], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 67]]
  [1m[36mTrade Load (0.5ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 55]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 56]]
Completed 200 OK in 22ms (Views: 16.8ms | ActiveRecord: 1.6ms | Allocations: 1905)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$LNxfnCgYn.yWyURbT/NGxuwWdBqso4a0yWnX1PUv69sRkTpqekOIO"], ["created_at", "2020-04-08 18:27:21.717326"], ["updated_at", "2020-04-08 18:27:21.717326"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (1.6ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 68], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:27:21.720136"], ["updated_at", "2020-04-08 18:27:21.720136"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 11:27:21 -0700
Processing by StocksController#create as HTML
  Parameters: {"stock"=>{"symbol"=>"test"}, "portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 68], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "test"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "test"], ["portfolio_id", 68], ["created_at", "2020-04-08 18:27:21.736125"], ["updated_at", "2020-04-08 18:27:21.736125"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTrade Load (0.3ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 57]]
Completed 200 OK in 8ms (Views: 1.4ms | ActiveRecord: 1.6ms | Allocations: 1779)
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" ORDER BY "stocks"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$METuTvj1LEWWazY6GxBbTuM8d0/0Ti3E23IEN1qhJceUSQxdzT28e"], ["created_at", "2020-04-08 18:27:21.744717"], ["updated_at", "2020-04-08 18:27:21.744717"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.7ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 69], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:27:21.748219"], ["updated_at", "2020-04-08 18:27:21.748219"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.6ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 69], ["LIMIT", 1]]
  [1m[36mStock Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 69], ["created_at", "2020-04-08 18:27:21.756622"], ["updated_at", "2020-04-08 18:27:21.756622"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 58], ["LIMIT", 1]]
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 58], ["created_at", "2020-04-08 18:27:21.759630"], ["updated_at", "2020-04-08 18:27:21.759630"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 11:27:21 -0700
Processing by TradesController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 69], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 69], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mTrade Load (0.3ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 58]]
Completed 200 OK in 6ms (Views: 0.8ms | ActiveRecord: 1.2ms | Allocations: 1413)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$7bLM0c3xTz7SBVpT1bDWCOmB.UYoz6eqT0sa1OzTkGVcVwU5nyEgG"], ["created_at", "2020-04-08 18:27:21.784825"], ["updated_at", "2020-04-08 18:27:21.784825"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.4ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 70], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:27:21.788670"], ["updated_at", "2020-04-08 18:27:21.788670"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 70], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 70], ["created_at", "2020-04-08 18:27:21.792236"], ["updated_at", "2020-04-08 18:27:21.792236"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 11:27:21 -0700
Processing by TradesController#create as HTML
  Parameters: {"trade"=>{"action"=>"1", "price"=>"100.0", "quantity"=>"20"}, "portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 70], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 70], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTrade Create (0.4ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 100.0], ["quantity", 20], ["stock_id", 59], ["created_at", "2020-04-08 18:27:21.808322"], ["updated_at", "2020-04-08 18:27:21.808322"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.3ms | ActiveRecord: 1.6ms | Allocations: 1811)
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" ORDER BY "trades"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (2.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$905tqhE/8PkWApUxnvY3/OfPxfbsR7QVmn9cflQ2jOQp7Lkh.TWhy"], ["created_at", "2020-04-08 18:27:37.809091"], ["updated_at", "2020-04-08 18:27:37.809091"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio1"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.5ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 71], ["name", "test_portfolio1"], ["created_at", "2020-04-08 18:27:37.827953"], ["updated_at", "2020-04-08 18:27:37.827953"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/portfolios" for 127.0.0.1 at 2020-04-08 11:27:37 -0700
Processing by PortfoliosController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1[0m  [["user_id", 71]]
  [1m[36mStock Load (0.4ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 71]]
Completed 200 OK in 17ms (Views: 5.8ms | ActiveRecord: 2.9ms | Allocations: 2747)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$8IFoxoNBkfdWYcfPJ5zuxO3b.mBgVBXBIuD.4ttJkIScyrg6s7vdm"], ["created_at", "2020-04-08 18:27:37.879233"], ["updated_at", "2020-04-08 18:27:37.879233"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/portfolios" for 127.0.0.1 at 2020-04-08 11:27:37 -0700
Processing by PortfoliosController#create as HTML
  Parameters: {"portfolio"=>{"name"=>"test"}}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (2.5ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.4ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 72], ["name", "test"], ["created_at", "2020-04-08 18:27:37.903514"], ["updated_at", "2020-04-08 18:27:37.903514"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 72]]
Completed 200 OK in 12ms (Views: 1.1ms | ActiveRecord: 5.5ms | Allocations: 1450)
  [1m[36mPortfolio Load (0.6ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" ORDER BY "portfolios"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$2D87xOQghddFJirK.IeGf.WUHRdi8aQpc8AzbRNTY0hTkIzJjgtxa"], ["created_at", "2020-04-08 18:27:37.913277"], ["updated_at", "2020-04-08 18:27:37.913277"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (1.1ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 73], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:27:37.915725"], ["updated_at", "2020-04-08 18:27:37.915725"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.6ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 73], ["LIMIT", 1]]
  [1m[36mStock Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.6ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 73], ["created_at", "2020-04-08 18:27:37.933179"], ["updated_at", "2020-04-08 18:27:37.933179"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$kVc0TPwOM6th4dgqMKAFX.JufUiN1tCLvlnXKiKHMNyNFq5BBX3gO"], ["created_at", "2020-04-08 18:27:37.955773"], ["updated_at", "2020-04-08 18:27:37.955773"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 74], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:27:37.958571"], ["updated_at", "2020-04-08 18:27:37.958571"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 74], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 74], ["created_at", "2020-04-08 18:27:37.961689"], ["updated_at", "2020-04-08 18:27:37.961689"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 61], ["LIMIT", 1]]
  [1m[36mTrade Create (0.9ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 61], ["created_at", "2020-04-08 18:27:37.980769"], ["updated_at", "2020-04-08 18:27:37.980769"]]
  [1m[35m (1.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.8ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 74], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 74], ["created_at", "2020-04-08 18:27:37.989652"], ["updated_at", "2020-04-08 18:27:37.989652"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 11:27:37 -0700
Processing by StocksController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 74], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 74]]
  [1m[36mTrade Load (0.3ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 61]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 62]]
Completed 200 OK in 7ms (Views: 3.0ms | ActiveRecord: 1.2ms | Allocations: 1904)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$m77CbAYgLW8bQcQDmQNXMOTawCZYD1wWwi.iVbKRyJfMKVskVdct."], ["created_at", "2020-04-08 18:27:38.014225"], ["updated_at", "2020-04-08 18:27:38.014225"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.4ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 75], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:27:38.018415"], ["updated_at", "2020-04-08 18:27:38.018415"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 11:27:38 -0700
Processing by StocksController#create as HTML
  Parameters: {"stock"=>{"symbol"=>"test"}, "portfolio"=>"test_portfolio"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 75], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "test"], ["LIMIT", 1]]
  [1m[36mStock Create (19.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "test"], ["portfolio_id", 75], ["created_at", "2020-04-08 18:27:38.047021"], ["updated_at", "2020-04-08 18:27:38.047021"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTrade Load (0.7ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 63]]
Completed 200 OK in 30ms (Views: 1.1ms | ActiveRecord: 23.6ms | Allocations: 1781)
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" ORDER BY "stocks"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$EF0e0aFE0lEV0Uo6tAcz9OASulzhNhIkeCFG22fS1Mce824F/6QMy"], ["created_at", "2020-04-08 18:27:38.077101"], ["updated_at", "2020-04-08 18:27:38.077101"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (2.4ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 76], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:27:38.080826"], ["updated_at", "2020-04-08 18:27:38.080826"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 76], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 76], ["created_at", "2020-04-08 18:27:38.088153"], ["updated_at", "2020-04-08 18:27:38.088153"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 64], ["LIMIT", 1]]
  [1m[36mTrade Create (0.5ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 64], ["created_at", "2020-04-08 18:27:38.091724"], ["updated_at", "2020-04-08 18:27:38.091724"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 11:27:38 -0700
Processing by TradesController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 76], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 76], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 64]]
Completed 200 OK in 6ms (Views: 0.6ms | ActiveRecord: 1.1ms | Allocations: 1413)
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$jO.sfpS3SEgnKxAmp3m.9endej6fbx6DyNEJ4jYjrwC1zpTYLy77y"], ["created_at", "2020-04-08 18:27:38.114183"], ["updated_at", "2020-04-08 18:27:38.114183"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.2ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 77], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:27:38.118266"], ["updated_at", "2020-04-08 18:27:38.118266"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 77], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 77], ["created_at", "2020-04-08 18:27:38.122404"], ["updated_at", "2020-04-08 18:27:38.122404"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 11:27:38 -0700
Processing by TradesController#create as HTML
  Parameters: {"trade"=>{"action"=>"1", "price"=>"100.0", "quantity"=>"20"}, "portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 77], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.5ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 77], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTrade Create (0.7ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 100.0], ["quantity", 20], ["stock_id", 65], ["created_at", "2020-04-08 18:27:38.140325"], ["updated_at", "2020-04-08 18:27:38.140325"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 8ms (Views: 0.3ms | ActiveRecord: 2.4ms | Allocations: 1811)
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" ORDER BY "trades"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$i7KS1RP59MGWNuT/WlvasurAKMukk7n32GQ2f5.Q93co3JuYI/Evi"], ["created_at", "2020-04-08 18:28:03.410420"], ["updated_at", "2020-04-08 18:28:03.410420"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio1"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 78], ["name", "test_portfolio1"], ["created_at", "2020-04-08 18:28:03.430748"], ["updated_at", "2020-04-08 18:28:03.430748"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/portfolios" for 127.0.0.1 at 2020-04-08 11:28:03 -0700
Processing by PortfoliosController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1[0m  [["user_id", 78]]
  [1m[36mStock Load (0.4ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 78]]
Completed 200 OK in 21ms (Views: 6.1ms | ActiveRecord: 5.0ms | Allocations: 2747)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$V2rKLO3srCvaiOvv17j2hOL1x5oSl9sISHsiBcyKn3kBd.e/efsJ6"], ["created_at", "2020-04-08 18:28:03.492628"], ["updated_at", "2020-04-08 18:28:03.492628"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/portfolios" for 127.0.0.1 at 2020-04-08 11:28:03 -0700
Processing by PortfoliosController#create as HTML
  Parameters: {"portfolio"=>{"name"=>"test"}}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.5ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 79], ["name", "test"], ["created_at", "2020-04-08 18:28:03.515374"], ["updated_at", "2020-04-08 18:28:03.515374"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.5ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 79]]
Completed 200 OK in 10ms (Views: 1.4ms | ActiveRecord: 2.6ms | Allocations: 1450)
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" ORDER BY "portfolios"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$QSjwHaxLYBbq2PTJkPOCoOn28DSwl3EILB302HX20pkHpnBnMgIge"], ["created_at", "2020-04-08 18:28:03.525089"], ["updated_at", "2020-04-08 18:28:03.525089"]]
  [1m[35m (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 80], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:28:03.532077"], ["updated_at", "2020-04-08 18:28:03.532077"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.5ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 80], ["created_at", "2020-04-08 18:28:03.547041"], ["updated_at", "2020-04-08 18:28:03.547041"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/" for 127.0.0.1 at 2020-04-08 11:28:03 -0700
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (5.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$B35PABQtt4KNetVP0Zxg3.BT5aXLVr/wca1BKnIrVMwn78ykJed7y"], ["created_at", "2020-04-08 18:28:03.576693"], ["updated_at", "2020-04-08 18:28:03.576693"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.4ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 81], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:28:03.588361"], ["updated_at", "2020-04-08 18:28:03.588361"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.9ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 81], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.7ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 81], ["created_at", "2020-04-08 18:28:03.593620"], ["updated_at", "2020-04-08 18:28:03.593620"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 67], ["LIMIT", 1]]
  [1m[36mTrade Create (0.6ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 67], ["created_at", "2020-04-08 18:28:03.618182"], ["updated_at", "2020-04-08 18:28:03.618182"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 81], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 81], ["created_at", "2020-04-08 18:28:03.621803"], ["updated_at", "2020-04-08 18:28:03.621803"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 11:28:03 -0700
Processing by StocksController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 81], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 81]]
  [1m[36mTrade Load (0.4ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 67]]
  [1m[36mTrade Load (17.3ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 68]]
Completed 200 OK in 28ms (Views: 4.9ms | ActiveRecord: 18.7ms | Allocations: 1904)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$peuC2I4CHVwS4M8Y.H27XunvHy1jdQSKFCK.i8FP7Zeg7BRAT88OC"], ["created_at", "2020-04-08 18:28:03.673374"], ["updated_at", "2020-04-08 18:28:03.673374"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.3ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 82], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:28:03.678817"], ["updated_at", "2020-04-08 18:28:03.678817"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 11:28:03 -0700
Processing by StocksController#create as HTML
  Parameters: {"stock"=>{"symbol"=>"test"}, "portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.8ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 82], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "test"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "test"], ["portfolio_id", 82], ["created_at", "2020-04-08 18:28:03.706104"], ["updated_at", "2020-04-08 18:28:03.706104"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTrade Load (0.4ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 69]]
Completed 200 OK in 17ms (Views: 1.1ms | ActiveRecord: 2.5ms | Allocations: 1781)
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" ORDER BY "stocks"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$.HANbTpmil9ZzayYZ5hjru5NA.ZzAT.AWdeTx/Sc1/CDSqMYGZzGu"], ["created_at", "2020-04-08 18:28:03.713747"], ["updated_at", "2020-04-08 18:28:03.713747"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.5ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 83], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:28:03.716453"], ["updated_at", "2020-04-08 18:28:03.716453"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 83], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.4ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 83], ["created_at", "2020-04-08 18:28:03.720635"], ["updated_at", "2020-04-08 18:28:03.720635"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.4ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 70], ["LIMIT", 1]]
  [1m[36mTrade Create (0.6ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 70], ["created_at", "2020-04-08 18:28:03.725622"], ["updated_at", "2020-04-08 18:28:03.725622"]]
  [1m[35m (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 11:28:03 -0700
Processing by TradesController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 83], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 83], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mTrade Load (0.4ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 70]]
Completed 200 OK in 9ms (Views: 0.7ms | ActiveRecord: 1.6ms | Allocations: 1413)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$kT6j1vCX/zEs9tFiSAs.e.gZKZddMipraCvjwxGuYI9GTKnzoHPeO"], ["created_at", "2020-04-08 18:28:03.755118"], ["updated_at", "2020-04-08 18:28:03.755118"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.5ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 84], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:28:03.759568"], ["updated_at", "2020-04-08 18:28:03.759568"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 84], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 84], ["created_at", "2020-04-08 18:28:03.763858"], ["updated_at", "2020-04-08 18:28:03.763858"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 11:28:03 -0700
Processing by TradesController#create as HTML
  Parameters: {"trade"=>{"action"=>"1", "price"=>"100.0", "quantity"=>"20"}, "portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 84], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 84], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 100.0], ["quantity", 20], ["stock_id", 71], ["created_at", "2020-04-08 18:28:03.782296"], ["updated_at", "2020-04-08 18:28:03.782296"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 9ms (Views: 0.6ms | ActiveRecord: 1.9ms | Allocations: 1811)
  [1m[36mTrade Load (0.4ms)[0m  [1m[34mSELECT "trades".* FROM "trades" ORDER BY "trades"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "schema_sha1"]]
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$8hrb.f8fWCXeLNslCoYE1O0BNmawEDk/QOjC5To15D9s2rNwVdjtS"], ["created_at", "2020-04-08 18:30:00.949820"], ["updated_at", "2020-04-08 18:30:00.949820"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio1"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.5ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 85], ["name", "test_portfolio1"], ["created_at", "2020-04-08 18:30:00.969121"], ["updated_at", "2020-04-08 18:30:00.969121"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/portfolios" for 127.0.0.1 at 2020-04-08 11:30:00 -0700
Processing by PortfoliosController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1[0m  [["user_id", 85]]
  [1m[36mStock Load (0.5ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 85]]
Completed 200 OK in 19ms (Views: 7.0ms | ActiveRecord: 3.1ms | Allocations: 2747)
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$ZzpsGaXh7hOJpePgWyTrMu4ZmzzfXHN6uHDMFVRtgzYlQzlldg/zy"], ["created_at", "2020-04-08 18:30:01.018713"], ["updated_at", "2020-04-08 18:30:01.018713"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/portfolios" for 127.0.0.1 at 2020-04-08 11:30:01 -0700
Processing by PortfoliosController#create as HTML
  Parameters: {"portfolio"=>{"name"=>"test"}}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.9ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 86], ["name", "test"], ["created_at", "2020-04-08 18:30:01.039981"], ["updated_at", "2020-04-08 18:30:01.039981"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 86]]
Completed 200 OK in 9ms (Views: 1.1ms | ActiveRecord: 2.7ms | Allocations: 1450)
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" ORDER BY "portfolios"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$1N07CgPTJSltExGreZvTkuSBcdZw3gGveKsYq.5rYJaqa.O74Nl1e"], ["created_at", "2020-04-08 18:30:01.049391"], ["updated_at", "2020-04-08 18:30:01.049391"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.4ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 87], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:30:01.052980"], ["updated_at", "2020-04-08 18:30:01.052980"]]
  [1m[35m (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 87], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.5ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 87], ["created_at", "2020-04-08 18:30:01.066704"], ["updated_at", "2020-04-08 18:30:01.066704"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started DELETE "/" for 127.0.0.1 at 2020-04-08 11:30:01 -0700
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$GJBhgEkg.Cd8ajkSYEfS2eAnDMi3DgJuCYkK3C6v.shvoB/DvTu2O"], ["created_at", "2020-04-08 18:30:01.091455"], ["updated_at", "2020-04-08 18:30:01.091455"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.5ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 88], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:30:01.095202"], ["updated_at", "2020-04-08 18:30:01.095202"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST1"], ["LIMIT", 1]]
  [1m[36mStock Create (0.2ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST1"], ["portfolio_id", 88], ["created_at", "2020-04-08 18:30:01.099321"], ["updated_at", "2020-04-08 18:30:01.099321"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 73], ["LIMIT", 1]]
  [1m[36mTrade Create (0.8ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 73], ["created_at", "2020-04-08 18:30:01.117204"], ["updated_at", "2020-04-08 18:30:01.117204"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.7ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 88], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST2"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST2"], ["portfolio_id", 88], ["created_at", "2020-04-08 18:30:01.122882"], ["updated_at", "2020-04-08 18:30:01.122882"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 11:30:01 -0700
Processing by StocksController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.4ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 88], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.3ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1[0m  [["portfolio_id", 88]]
  [1m[36mTrade Load (0.4ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 73]]
  [1m[36mTrade Load (0.3ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 74]]
Completed 200 OK in 9ms (Views: 3.6ms | ActiveRecord: 1.8ms | Allocations: 1904)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$sFQcUEVhHmGwo7LR.ttQzOmJD7UaSW5sjuIGxQiFOXXRLdQpzW94W"], ["created_at", "2020-04-08 18:30:01.154531"], ["updated_at", "2020-04-08 18:30:01.154531"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.7ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 89], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:30:01.159052"], ["updated_at", "2020-04-08 18:30:01.159052"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/stocks?portfolio=test_portfolio" for 127.0.0.1 at 2020-04-08 11:30:01 -0700
Processing by StocksController#create as HTML
  Parameters: {"stock"=>{"symbol"=>"test"}, "portfolio"=>"test_portfolio"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.2ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 89], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "test"], ["LIMIT", 1]]
  [1m[36mStock Create (0.6ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "test"], ["portfolio_id", 89], ["created_at", "2020-04-08 18:30:01.185387"], ["updated_at", "2020-04-08 18:30:01.185387"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTrade Load (0.5ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 75]]
Completed 200 OK in 10ms (Views: 1.4ms | ActiveRecord: 3.5ms | Allocations: 1781)
  [1m[36mStock Load (0.4ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" ORDER BY "stocks"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$SodE2DQyhhNFGOSAYtg1nuiJ5N18xhhHw2em6.eDgxPlesM68w8.2"], ["created_at", "2020-04-08 18:30:01.200528"], ["updated_at", "2020-04-08 18:30:01.200528"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.5ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 90], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:30:01.207743"], ["updated_at", "2020-04-08 18:30:01.207743"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 90], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.6ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 90], ["created_at", "2020-04-08 18:30:01.211723"], ["updated_at", "2020-04-08 18:30:01.211723"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mStock Load (0.8ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."id" = $1 LIMIT $2[0m  [["id", 76], ["LIMIT", 1]]
  [1m[36mTrade Create (0.4ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 225.0], ["quantity", 10], ["stock_id", 76], ["created_at", "2020-04-08 18:30:01.215703"], ["updated_at", "2020-04-08 18:30:01.215703"]]
  [1m[35m (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started GET "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 11:30:01 -0700
Processing by TradesController#index as HTML
  Parameters: {"portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 90], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.2ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 90], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" WHERE "trades"."stock_id" = $1[0m  [["stock_id", 76]]
Completed 200 OK in 5ms (Views: 0.8ms | ActiveRecord: 1.1ms | Allocations: 1413)
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "test@email.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "test@email.com"], ["encrypted_password", "$2a$04$CpzhbDzvPvEmmlrgzI1qO.607ei.AlDsOTVBXjLNXK8Zs8K652PL."], ["created_at", "2020-04-08 18:30:01.241595"], ["updated_at", "2020-04-08 18:30:01.241595"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "portfolios" WHERE "portfolios"."name" = $1 LIMIT $2[0m  [["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mPortfolio Create (0.5ms)[0m  [1m[32mINSERT INTO "portfolios" ("user_id", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 91], ["name", "test_portfolio"], ["created_at", "2020-04-08 18:30:01.245300"], ["updated_at", "2020-04-08 18:30:01.245300"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPortfolio Load (0.5ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."id" = $1 LIMIT $2[0m  [["id", 91], ["LIMIT", 1]]
  [1m[36mStock Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "stocks" WHERE "stocks"."symbol" = $1 LIMIT $2[0m  [["symbol", "TEST"], ["LIMIT", 1]]
  [1m[36mStock Create (0.3ms)[0m  [1m[32mINSERT INTO "stocks" ("symbol", "portfolio_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["symbol", "TEST"], ["portfolio_id", 91], ["created_at", "2020-04-08 18:30:01.249319"], ["updated_at", "2020-04-08 18:30:01.249319"]]
  [1m[35m (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Started POST "/trades?portfolio=test_portfolio&stock=TEST" for 127.0.0.1 at 2020-04-08 11:30:01 -0700
Processing by TradesController#create as HTML
  Parameters: {"trade"=>{"action"=>"1", "price"=>"100.0", "quantity"=>"20"}, "portfolio"=>"test_portfolio", "stock"=>"TEST"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mPortfolio Load (0.3ms)[0m  [1m[34mSELECT "portfolios".* FROM "portfolios" WHERE "portfolios"."user_id" = $1 AND "portfolios"."name" = $2 LIMIT $3[0m  [["user_id", 91], ["name", "test_portfolio"], ["LIMIT", 1]]
  [1m[36mStock Load (0.4ms)[0m  [1m[34mSELECT "stocks".* FROM "stocks" WHERE "stocks"."portfolio_id" = $1 AND "stocks"."symbol" = $2 LIMIT $3[0m  [["portfolio_id", 91], ["symbol", "TEST"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mTrade Create (0.3ms)[0m  [1m[32mINSERT INTO "trades" ("action", "price", "quantity", "stock_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["action", 1], ["price", 100.0], ["quantity", 20], ["stock_id", 77], ["created_at", "2020-04-08 18:30:01.265457"], ["updated_at", "2020-04-08 18:30:01.265457"]]
  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Completed 200 OK in 7ms (Views: 0.4ms | ActiveRecord: 1.6ms | Allocations: 1811)
  [1m[36mTrade Load (0.2ms)[0m  [1m[34mSELECT "trades".* FROM "trades" ORDER BY "trades"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
